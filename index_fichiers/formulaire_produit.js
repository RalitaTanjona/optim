var http_host=window.location.hostname,protocol=window.location.protocol,context,is_begin,live_matching;if(http_host.includes("conseils.hellopro")&&(http_host=http_host.replace("conseils.","www."),protocol="https:"),void 0===STEP_NUMBER_DE_BASE_GTM)var STEP_NUMBER_DE_BASE_GTM=0;var ajax_demande_devis,ajax_siretisation,ajax_recup_ville,telMask,maskOptions={lazy:!0,definitions:{"#":/[1-9]/}},template_tel_top={1:{id:1,nom_pays:"France",indicatif:"+33",exemple_num_mobile:"6 12 34 56 78",mask:"# 00 00 00 00",regex_verif:/^\d\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},4:{id:4,nom_pays:"Belgique",indicatif:"+32",exemple_num_mobile:"212 12 34 56",mask:"000 00 00 00",regex_verif:/^\d{3}\s\d{2}\s\d{2}\s\d{2}$/},353:{id:353,nom_pays:"Maroc",indicatif:"+212",exemple_num_mobile:"6 50 12 34 56",mask:"0 00 00 00 00",regex_verif:/^\d{1}\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},224:{id:224,nom_pays:"Algerie",indicatif:"+213",exemple_num_mobile:"0551 23 45 67",mask:"0000 00 00 00",regex_verif:/^\d{4}\s\d{2}\s\d{2}\s\d{2}$/},439:{id:439,nom_pays:"Tunisie",indicatif:"+216",exemple_num_mobile:"20 123 456",mask:"00 000 000",regex_verif:/^\d{2}\s\d{3}\s\d{3}$/},28:{id:28,nom_pays:"Suisse",indicatif:"+41",exemple_num_mobile:"78 123 45 67",mask:"00 000 00 00",regex_verif:/^\d{2}\s\d{3}\s\d{2}\s\d{2}$/},12:{id:12,nom_pays:"Canada",indicatif:"+1",exemple_num_mobile:"506 234 5678",mask:"000 000 0000",regex_verif:/^\d{3}\s\d{3}\s\d{4}$/},275:{id:275,nom_pays:"Cote d'ivoire",indicatif:"+225",exemple_num_mobile:"01 23 45 67 89",mask:"00 00 00 00 00",regex_verif:/^\d{2}\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},399:{id:399,nom_pays:"Reunion",indicatif:"+262",exemple_num_mobile:"692 12 34 56",mask:"000 00 00 00",regex_verif:/^\d{3}\s\d{2}\s\d{2}\s\d{2}$/},260:{id:260,nom_pays:"Cameroun",indicatif:"+237",exemple_num_mobile:"6 71 23 45 67",mask:"0 00 00 00 00",regex_verif:/^\d\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/}},$slider_produit=null,pond=null,ajax_verification_mail_acheteur,ajax_verif_doublon_di,cookie_redir_di_popup;function getNextSlide(currentIndex){var nextIndex=currentIndex+1;do{if(slide=$slider_produit.slick("getSlick").$slides.eq(nextIndex),toskip=$(slide).find(".question-wrapper.skip").length>0,!toskip&&slide.length)return nextIndex;nextIndex++}while(nextIndex<$slider_produit.slick("getSlick").slideCount);return!1}function getPreviousSlide(currentIndex){var prevIndex=currentIndex-1;do{if(slide=$slider_produit.slick("getSlick").$slides.eq(prevIndex),toskip=$(slide).find(".question-wrapper.skip").length>0,!toskip)return prevIndex;prevIndex--}while(prevIndex>-1);return prevIndex}function update_step(nextSlide,parentSelector){var current_slide=nextSlide+1,prev_max_step=0,activate_step=null;$(parentSelector+" .step-wrapper-form .step-item").removeClass("step-item-active"),$(parentSelector+" .step-item").each((function(){var step_type=$(this).data("step").replace("step-",""),step_number=$(parentSelector+" .question-wrapper."+step_type).length,default_step_done=1,max_step=step_number;if(current_slide>prev_max_step&&current_slide<=prev_max_step+max_step)$(this).find(".step-item-loader-inner").css("width",100*(current_slide-prev_max_step)/max_step+"%"),activate_step=this,default_step_done=current_slide-prev_max_step;else{if(per=0,current_slide>prev_max_step){var per=100;default_step_done=step_number}$(this).find(".step-item-loader-inner").css("width",per+"%")}prev_max_step+=max_step,$(this).find(".step-item-text span").html(default_step_done+"/"+step_number)})),$(activate_step).addClass("step-item-active"),$(parentSelector+" .step-item-text-mobile").html($(parentSelector+" .step-item.step-item-active .step-item-text").html())}function validateStep(stepIndex){return!0;var isStepValid}function init_formulaire_produit(){($slider_produit=$(".questions-container-produit")).slick({infinite:!1,slidesToShow:1,slidesToScroll:1,arrows:!1,draggable:!1,adaptiveHeight:!0,swipe:!1,speed:0});var init_slide=$(".question-wrapper.screen.active").parents(".slick-slide").data("slick-index");$slider_produit.slick("slickGoTo",init_slide),update_step(init_slide,"#modal_devis"),$slider_produit.off("beforeChange").on("beforeChange",(function(event,slick,currentSlide,nextSlide){update_step(nextSlide,"#modal_devis")})),$slider_produit.off("afterChange").on("afterChange",(function(event,slick,currentSlide,nextSlide){afterChangeActions_hpfr()})),$(document).off("click","#modal_devis .slick-slide",ajustModalHeight_hpfr).on("click","#modal_devis .slick-slide",ajustModalHeight_hpfr);var observer_prod=new MutationObserver((function(mutationsList,observer){$slider_produit.slick("setPosition")})),observerConfigProduit={attributes:!0,childList:!0,subtree:!0};$slider_produit.find(".slick-slide").each((function(){observer_prod.observe(this,observerConfigProduit)}))}function ajustModalHeight_hpfr(){null!=$slider_produit&&$slider_produit.slick("setPosition")}function change_screen(action="next",slide=null){screen_active=$(".screen.active");var response=!1;if("next"==action&&slide>-1&&!1!==slide&&null!==slide){$(".questions-container-produit").slick("slickGoTo",slide),$(".screen").removeClass("active");var slide_element=$(".questions-container-produit").slick("getSlick").$slides.eq(slide);$(slide_element).find(".screen").addClass("active"),ao_scroll_modal_to_top_hpfr(),response=!0}if("prev"==action&&slide>-1&&!1!==slide&&null!==slide){$(".questions-container-produit").slick("slickGoTo",slide),$(".screen").removeClass("active");var slide_element=$(".questions-container-produit").slick("getSlick").$slides.eq(slide);$(slide_element).find(".screen").addClass("active"),ao_scroll_modal_to_top_hpfr(),response=!0}return response&&traite_gtm_quote_form_funnel_hpfr(response),response}function trigger_click_next_slide(){var currentSlide=$slider_produit.slick("slickCurrentSlide"),isValid;if(validateStep(currentSlide)){var nextSlide=getNextSlide(currentSlide),has_next_screen=change_screen("next",nextSlide),has_next_screen;return!(!1===nextSlide)}}function modify_title_modal(){$("#modal_devis .hp-modal-title").html($(".screen.active").data("title"))}function modify_response_time(){$(".screen.active").hasClass("final")&&$("#temps_reponse").html($("#temps_reponse").data("final"))}function handle_scroll_error(obj){$("#message_devis").val().length<40?($("#message_devis").focus(),scrollToEl(".textarea-alert-inner")):($("#ao-input-mail-acheteur-hpfr").focus(),obj.find(".email").addClass("error"),obj.find(".email").closest(".demande-input").next(".badge-danger").html('<i class="bx bxs-x-circle"></i> Ce champ doit être renseigné').removeClass("d-none"),scrollDown(obj))}function verif_contrainte(obj){if(obj.find(".badge-danger").addClass("d-none"),obj.hasClass("coordonnees")){var tab_input_error=[],ok_coordonnee=!0;obj.find(".form-group").each((function(i,parent){$(parent).find("[type=radio]").length>0?0==$(parent).find("input[type=radio]:checked").length&&(ok_coordonnee=!1,$(parent).find(".badge").removeClass("d-none"),tab_input_error.push($(this).attr("id"))):$(parent).find("[type=text]:not(:hidden):not(.search)").each((function(i,e){1!=parseInt($("#ao-pays-acheteur-hpfr").val())&&454!=parseInt($("#ao-pays-acheteur-hpfr").val())&&"ao-code-postal-acheteur-hpfr"==$(e).attr("id")||""==$(e).val().trim()&&(ok_coordonnee=!1,$(parent).find(".badge").removeClass("d-none"),tab_input_error.push($(this).attr("id")))}))}));var e=$("#list_pays_tel_form_hpfr li.active_").data("id_pays");if(""!=$.trim($("#telephone-acheteur-hpfr").val())&&(est_pays_top(e)?verifier_num_tel_top(e,$("#telephone-acheteur-hpfr").val())||($("#telephone-acheteur-hpfr").parents(".form-group").find(".badge-danger").html('<i class="bx bxs-x-circle"></i> Veuillez ajouter un format de téléphone valide').removeClass("d-none"),ok_coordonnee=!1,tab_input_error.push("telephone-acheteur")):verifier_longueur_num_tel($("#telephone-acheteur-hpfr").val())||($("#telephone-acheteur-hpfr").parents(".form-group").find(".badge-danger").html('<i class="bx bxs-x-circle"></i> Veuillez ajouter un format de téléphone valide').removeClass("d-none"),ok_coordonnee=!1,tab_input_error.push("telephone-acheteur"))),!ok_coordonnee){if(tab_input_error.length>0){var liste_input_error;let dataToPush={event:"error_form",action_type:"form submit error",action_name:tab_input_error.join(",")},isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm),produitSimilaireVersion=getCookie("_ab_version_ps_2_");isPageProduit&&""!=produitSimilaireVersion&&(dataToPush.abtest=produitSimilaireVersion),dataLayer.push(dataToPush)}scrollToEl(".badge-danger:not(.d-none)")}return ok_coordonnee}if(obj.hasClass("message")){var message_length_ok=!0,mail_length_ok=!0,tab_input_error=[];return(obj.hasClass("screen-first")||obj.find(".email").length)&&""==$.trim(obj.find(".email").val())&&(obj.find(".email").addClass("error"),obj.find(".email").closest(".demande-input").next(".badge-danger").html('<i class="bx bxs-x-circle"></i> Ce champ doit être renseigné').removeClass("d-none"),mail_length_ok=!1,tab_input_error.push("email")),obj.find(".bloc-compteur").children(".transcription").val(obj.find("textarea.message").val().replace(/<br><\/div>|<\/br><\/div>|<\/ br><\/div>|<\/div>|<br>|<\/br>|<\/ br>/g,"\r\n").trim("\r\n").replace(/(<([^>]+)>)/gi,"")),obj.find(".bloc-compteur").children(".transcription").val().length<40?(tab_input_error.push("message"),message_length_ok=!1,obj.find("textarea.message").addClass("error").closest(".textarea-demande-devis").prev(".badge-danger").removeClass("d-none"),obj.find(".bloc-compteur").addClass("d-none"),i=!1):obj.find("textarea.message").removeClass("error").closest(".textarea-demande-devis").prev(".badge-danger").addClass("d-none"),message_length_ok&&mail_length_ok||(tab_input_error.length>0&&dataLayer.push({event:"error_form",action_type:"form submit error",action_name:tab_input_error.join(",")}),handle_scroll_error(obj)),null!=$slider_produit&&$slider_produit.slick("setPosition"),message_length_ok&&mail_length_ok}if(obj.hasClass("pro-part-screen")){if(prop_fr=!0,prop_not_fr=!0,prop_part=!0,selectedValue=parseInt($("#modal_devis [name='type_societe']:checked").val()),$("#modal_devis #ao-input-mail-acheteur-mockup").val($("#modal_devis #ao-input-mail-acheteur").val()),1===selectedValue){console.log("Selected is 1");let search_val=$("#modal_devis #block_pro_part_france #siretisation-input").val().trim(),nom_entreprise=$('#modal_devis #block_pro_part_france input[name="societe-acheteur-mockup"]').val().trim(),code_postal=$('#modal_devis #block_pro_part_france input[name="code-postal-acheteur-mockup"]').val().trim(),pays=$("#modal_devis #block_pro_part_france #ao-pays-acheteur-mockup-2").attr("data-selected"),ville=$("#modal_devis #block_pro_part_france #ao-ville-acheteur").attr("data-selected");return $("#modal_devis #block_pro_part_france #bloc-info-soc").hasClass("d-none")&&""===search_val&&($("#modal_devis #siretisation-input").addClass("error"),$("#modal_devis #siretisation-input").parent().addClass("contains-error"),$("#modal_devis #siretisation-input").parent().find(".has-error").show(),prop_fr=!1),$("#modal_devis #block_pro_part_france #bloc-info-soc").hasClass("d-none")||(""===nom_entreprise&&($("#modal_devis #ao-societe-acheteur-mockup").addClass("error"),$("#modal_devis #ao-societe-acheteur-mockup").parent().addClass("contains-error"),$("#modal_devis #ao-societe-acheteur-mockup").parent().find(".has-error").removeClass("d-none"),prop_fr=!1),""===code_postal&&($("#modal_devis #ao-code-postal-acheteur-mockup").addClass("error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().find(".has-error").removeClass("d-none"),prop_fr=!1),""===nom_entreprise&&""===code_postal&&"0"===pays&&""===ville&&($("#modal_devis #ao-societe-acheteur-mockup").addClass("error"),$("#modal_devis #ao-societe-acheteur-mockup").parent().addClass("contains-error"),$("#modal_devis #ao-societe-acheteur-mockup").parent().find(".has-error").removeClass("d-none"),$("#modal_devis #ao-code-postal-acheteur-mockup").addClass("error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().find(".has-error").removeClass("d-none"),$("#modal_devis #ville-fr-mockup .custom-select-wrapper").addClass("error"),$("#modal_devis #ville-fr-mockup .custom-select-wrapper").parent().addClass("contains-error"),$("#modal_devis #ville-fr-mockup .custom-select-wrapper").each((function(){var $parent=$(this).parent(),$errorElement=$parent.find(".has-error");$errorElement.length>0&&($parent.append($errorElement),$errorElement.removeClass("d-none"))})),prop_fr=!1),""===code_postal&&($("#modal_devis #ao-code-postal-acheteur-mockup").addClass("error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#modal_devis #ao-code-postal-acheteur-mockup").parent().find(".has-error").removeClass("d-none"),prop_fr=!1),""===ville&&($("#modal_devis #ville-fr-mockup .custom-select-wrapper").addClass("error"),$("#modal_devis #ville-fr-mockup .custom-select-wrapper").parent().addClass("contains-error"),$("#modal_devis #ville-fr-mockup .custom-select-wrapper").each((function(){var $parent=$(this).parent(),$errorElement=$parent.find(".has-error");$errorElement.length>0&&($parent.append($errorElement),$errorElement.removeClass("d-none"))})),prop_fr=!1),""!==ville&&""!==nom_entreprise&&""!==code_postal&&""!==pays&&($("#modal_devis #block-pro-title").removeClass("d-none"),$("#modal_devis #block-particulier-title").addClass("d-none"),$("#modal_devis #block-cp-pays-ville").addClass("d-none-important"),$("#modal_devis #info-information-utilisee").addClass("d-none"),$("#modal_devis #ao-code-postal-acheteur-hpfr").val(`${code_postal}`),$("#modal_devis #ao-societe-acheteur-hpfr").val(`${nom_entreprise}`),$("#modal_devis #pays-ach-hpfr .custom-option[data-value="+pays+"]").click(),$("#modal_devis #ville-fr #ao-ville-acheteur").attr("data-selected",`${ville}`),$("#modal_devis #pro-part-societe #prof_option").click(),prop_fr=!0)),prop_fr}if(2===selectedValue){console.log("Selected is 2");let nom_entreprise=$('#modal_devis #block_pro_part_not_france input[name="societe-acheteur-mockup-20"]').val().trim(),pays=$("#modal_devis #pays-ach-mkp #pays-acheteur-mockup-30").attr("data-selected");return""===nom_entreprise?($("#modal_devis #societe-acheteur-mockup-20").addClass("error"),$("#modal_devis #societe-acheteur-mockup-20").parent().addClass("contains-error"),$("#modal_devis #societe-acheteur-mockup-20").parent().find(".has-error").removeClass("d-none"),prop_not_fr=!1):"0"===pays&&($("#modal_devis #custom-select-wrapper").addClass("error"),$("#modal_devis #custom-select-wrapper").parent().addClass("contains-error"),$("#modal_devis #custom-select-wrapper").parent().find(".has-error").removeClass("d-none"),prop_not_fr=!1),"0"===pays&&($("#modal_devis #pays-acheteur-mockup-30").addClass("error"),$("#modal_devis #pays-ach-mkp .custom-select-wrapper").parent().addClass("contains-error"),$("#modal_devis #pays-ach-mkp .custom-select-wrapper").parent().find(".has-error").removeClass("d-none"),prop_not_fr=!1),""===nom_entreprise&&"0"===pays&&($("#modal_devis #societe-acheteur-mockup-20").addClass("error"),$("#modal_devis #societe-acheteur-mockup-20").parent().addClass("contains-error"),$("#modal_devis #societe-acheteur-mockup-20").parent().find(".has-error").removeClass("d-none"),$("#modal_devis #pays-acheteur-mockup-30").addClass("error"),$("#modal_devis #pays-acheteur-mockup-30").parent().addClass("contains-error"),$("#modal_devis #pays-acheteur-mockup-30").parent().find(".has-error").removeClass("d-none"),prop_not_fr=!1),""!==nom_entreprise&&"0"!==pays&&($("#modal_devis #block-pro-title").removeClass("d-none"),$("#modal_devis #block-particulier-title").addClass("d-none"),$("#modal_devis #block-cp-pays-ville").addClass("d-none-important"),$("#modal_devis #info-information-utilisee").addClass("d-none"),$("#modal_devis #ao-societe-acheteur-hpfr").val(`${nom_entreprise}`),$("#modal_devis #pays-ach-hpfr .custom-option[data-value="+pays+"]").click(),"input_pro_not_france"==$("#modal_devis [name=type_societe]:checked").attr("id")?$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").hasClass("d-none")||$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").addClass("d-none"):$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").hasClass("d-none")&&$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").removeClass("d-none"),prop_not_fr=!0),$("#modal_devis #pro-part-societe #prof_option").click(),prop_not_fr}if(3===selectedValue)return console.log("Selected is 3"),$("#modal_devis #block-pro-title").addClass("d-none"),$("#modal_devis #block-particulier-title").removeClass("d-none"),$("#modal_devis #block-cp-pays-ville").removeClass("d-none-important"),$("#modal_devis #info-information-utilisee").removeClass("d-none"),$("#modal_devis #ao-code-postal-acheteur").val(""),$("#modal_devis #ao-societe-acheteur-hpfr").val(""),$("#modal_devis #pays-ach-hpfr .custom-option[data-value='1']").click(),$("#modal_devis #pro-part-societe #part_option").click(),prop_part}var obligatoire_ok=!0;return obj.find(".info-group.required:not(.d-none)").each((function(){let input_sibling_has_autre=$(this).find("input[type=radio]:checked.has-autre").closest("label").find(".input-autre");0==$(this).find("#delai-souhaiter").attr("data-selected")&&($(this).find("#delai-souhaiter").closest(".info-group").find(".badge-danger").removeClass("d-none"),obligatoire_ok=!1),$(this).find("input[type=radio]:checked.has-autre").length>0&&input_sibling_has_autre.length>0&&0==input_sibling_has_autre.val().trim().length&&input_sibling_has_autre.is("input[type=text]")&&(input_sibling_has_autre.css("border-bottom","1px solid var(--color-rouge)"),$(this).find(".badge-danger").html("<i class='bx bxs-x-circle'></i>Le champ a coté doit être remplis."),$(this).find(".badge-danger").removeClass("d-none"),$(this).find(".error-info").show(),$(this).closest('[data-typeq="budget"]').length&&(input_sibling_has_autre.closest('[data-typeq="budget"]').find("#input-budget").css("border","1px solid var(--color-rouge)").focus(),$(this).find(".error-info").html('\n                            <span class="badge badge-danger  font-16"><i class="bx bxs-x-circle"></i> Merci de renseigner votre budget pour continuer.</span>\n                        ')),obligatoire_ok=!1),($(this).find("input[type=checkbox], input[type=radio]").length>0&&0==$(this).find("input:checked").length||$(this).find("input[type=text], input[type=file]").length>0&&""==$(this).find("input").val().trim())&&($(this).find(".badge-danger").removeClass("d-none"),$(this).closest('[data-typeq="budget"]').length&&$(this).find(".error-info").html('\n                        <span class="badge badge-danger font-16">\n                            <i class="bx bxs-x-circle"></i>\n                            Vous devez sélectionner une réponse avant de valider\n                        </span>\n                    ').show(),obligatoire_ok=!1),obligatoire_ok||(scrollToEl(".badge-danger:not(.d-none)"),scrollDown(obj))})),obligatoire_ok}function gestionCaractereRestant(editable){var max=2e3,text=$(editable).val().replace(/<br><\/div>|<\/br><\/div>|<\/ br><\/div>|<\/div>|<br>|<\/br>|<\/ br>/g,"\r\n").replace(/^[\r\n\s]+/,"").replace(/(<([^>]+)>)/gi,"");"<br>"==$(editable).html()&&$(editable).html(""),$(".bloc-compteur").children(".transcription").val(text),$(editable).val(text);var current=$(".bloc-compteur").children(".transcription").val().length;if(current>2e3)return!1;var span_txt=$(".bloc-compteur").find("span");const textareaAlert=$(".textarea-alert-inner"),textareaAlertOnFocus=$(".textarea-alert-inner-on-focus");current<1?(textareaAlert.hide(),textareaAlertOnFocus.hide()):current>=40?(textareaAlert.hide(),textareaAlertOnFocus.show()):current>0&&current<40&&(textareaAlert.show(),textareaAlertOnFocus.hide()),current<40?span_txt.addClass("nb_carac_nok").removeClass("nb_carac_ok"):span_txt.addClass("nb_carac_ok").removeClass("nb_carac_nok");var delta=parseInt(2e3)-parseInt(current);return span_txt.text(current),delta}function appliquerGestionCaractere(target_msg){$("body").on("paste",target_msg,(function(event){var restant=gestionCaractereRestant(target_msg),curval=$(target_msg).val(),paste=(event.originalEvent.clipboardData||window.clipboardData).getData("text");$(target_msg).val(curval+paste.substr(0,restant)),gestionCaractereRestant(target_msg),event.preventDefault()})),$(document).on("keydown",target_msg,(function(event){var keycode,ret=[8,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(parseInt(event.which)),remaining;if(event.ctrlKey||"-1"!=ret)$(target_msg).removeClass("error");else if(!gestionCaractereRestant(target_msg))return void event.preventDefault()})),$(document).on("keyup",target_msg,(function(event){gestionCaractereRestant(target_msg)})),$(document).on("focus",target_msg,(function(event){gestionCaractereRestant(target_msg)})),$(document).on("blur",target_msg,(function(event){gestionCaractereRestant(target_msg)})),$(document).on("click",target_msg,(function(event){gestionCaractereRestant(target_msg)}))}function ao_active_desactive_btn_envoyer(e){1==e?($("#cta-dmd-devis").removeAttr("disabled"),$("#cta-dmd-devis").removeClass("btn-disabled").addClass("btn-primary")):($("#cta-dmd-devis").attr("disabled","disabled"),$("#cta-dmd-devis").addClass("btn-disabled").removeClass("btn-primary"))}function scrollToEl(selector){var element=document.querySelector(selector);void 0!==element&&element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}function ao_scroll_modal_to_top_hpfr(){$("#modal_devis").animate({scrollTop:0},"slow")}function ao_verif_dbl_di_hpfr(sel){ajax_verif_doublon_di&&ajax_verif_doublon_di.abort();const e=$.trim($(sel).val());if(""!=e){var id_rubrique_a_verif=id_rubrique_js;void 0===$("#ao-id_rubrique-hpfr").val()||""!=id_rubrique_a_verif&&id_rubrique_a_verif==$("#ao-id_rubrique-hpfr").val()||(id_rubrique_a_verif=$("#ao-id_rubrique-hpfr").val());var t=encodeURIComponent($.trim($("input#url_page").val())),param_ia=$("#id_produit_ia").length?"&id_produit_ia="+$("#id_produit_ia").val():"";ao_active_desactive_btn_envoyer(0),ajax_verif_doublon_di=$.ajax({url:protocol+"//"+http_host+"/annuaire_hp/ajax/demande_information/verif_doublon_di.php",type:"post",data:"email="+e+"&id_rubrique="+id_rubrique_a_verif+"&url_page="+t+"&telcoo=1"+param_ia,success:function(e){if(""==e){$(".dbl_di,#dbl_di,#di-refuser").remove();var i,r=ao_init_data_dir_hpfr(document.querySelector("input#ao-input-mail-acheteur-hpfr").value.trim());ajax_verification_mail_acheteur=$.ajax({url:protocol+"//"+http_host+"/hellopro_fr/ajax/ajax_verification_mail_acheteur.php",type:"POST",dataType:"JSON",data:r,beforeSend:function(){},success:function(e){if(e.dir>0&&$("#ao-id_svgrd-hpfr").val(e.dir),"#0#"!=e.verif){for(var property in $(".cta-devis").removeClass("btn-disabled").removeAttr("disabled"),$("#ao-mail_acheteur_connu-hpfr").val(1),$("#ao-recup_adresse-hpfr").val(e.adr),e){var input=document.createElement("input"),name=property;"cp"==property&&(name="code-postal-acheteur"),"nom"==property&&(name="nom-acheteur"),"prenom"==property&&(name="prenom-acheteur"),"pays"==property&&(name="pays-acheteur"),"statut"==property&&(name="rep_prof_part"),input.setAttribute("type","hidden"),input.setAttribute("name",name),input.setAttribute("id",name),input.setAttribute("value",e[property]),input.setAttribute("data-creation","dynamic");var nb_element=$('#form-demande-devis [name="'+name+'"]').length;nb_element?nb_element>1?$('#form-demande-devis [name="'+name+'"]').each((function(){"radio"==$(this).attr("type")?1==$(this).val()&&$(this).prop("checked",!0):$(this).val(e[property])})):$('#form-demande-devis [name="'+name+'"]').val(e[property]):document.getElementById("form-demande-devis").appendChild(input)}$("#modal_devis #pro_part_screen").length&&$("#modal_devis #pro_part_screen").addClass("skip"),ao_attribution_hpfr(),ao_active_desactive_btn_envoyer(1)}else $("#ao-mail_acheteur_connu-hpfr").val(0),$("#ao-recup_adresse-hpfr").val(""),$('#form-demande-devis [name="prenom-acheteur"]').val(""),$('#form-demande-devis [name="nom-acheteur"]').val(""),$('#form-demande-devis [name="telephone-acheteur"]').val(""),$('#form-demande-devis .country[data-id_pays="1"]').click(),$("#form-demande-devis #prof_option").parent("label").click(),$('#form-demande-devis [name="societe-acheteur"]').val(""),$('#form-demande-devis [name="code-postal-acheteur"]').val(""),$('#form-demande-devis .custom-option[data-value="1"]').click(),ao_active_desactive_btn_envoyer(1),$("#modal_devis #pro_part_screen").length&&$("#modal_devis #pro_part_screen").removeClass("skip");var _url_demande_v2=protocol+"//"+http_host+"/hellopro_fr/include/demande_information/demande_info_insertion.php";$("#form-demande-devis").attr("action",_url_demande_v2),preselectionner_critere(2)},complete:function(){var type_lead_verif="devis_plus";"2"==$('#modal_devis input[name="souhait_devis_prod_sim"]:checked').val()&&(type_lead_verif="exclusif"),construire_tab_matching_acheteur_algo_v2(0,type_lead_verif)}})}"notifier"==e&&(ao_active_desactive_btn_envoyer(0),!$("#dbl_di").length&&$(".screen.active").append('<div id="dbl_di">Vous avez déjà effectué une demande dans cette même catégorie, elle est en cours de traitement. En cas d’urgence merci de contacter le 0 825 815 816</div>').prepend('<input type="hidden" class="dbl_di">'),$("#dbl_di").slideDown(300),scrollToEl("#form-demande-devis #dbl_di"),null!=$slider_produit&&$slider_produit.slick("setPosition"))}})}}function ao_init_data_dir_hpfr(e){var t={},id_rubrique_a_verif=id_rubrique_js,id_produit_a_verif=id_produit_js,id_soc_a_verif=id_societe;return void 0===$("#ao-id_rubrique-hpfr").val()||""!=id_rubrique_a_verif&&id_rubrique_a_verif==$("#ao-id_rubrique-hpfr").val()||(id_rubrique_a_verif=$("#ao-id_rubrique-hpfr").val()),void 0!==$("#check_prod").val()&&id_produit_a_verif!=$("#check_prod").val()&&(id_produit_a_verif=$("#check_prod").val()),void 0!==$("#form-demande-devis #ao-soc").val()&&(id_soc_a_verif=$("#form-demande-devis #ao-soc").val()),$("#init").remove(),t.frns=id_soc_a_verif,t.prod=id_produit_a_verif,t.rub=id_rubrique_a_verif,{verification:e,init:t,dir:$("#ao-id_svgrd").val(),id_produit_ia:$("#id_produit_ia").length?$("#id_produit_ia").val():""}}function ao_attribution_hpfr(){return!0;var type_lead,_tab_critere_,_tab_acheteur_}function ctrl_radio(element){var state=$(element).is(":checked");$(element).closest(".info-group").find("input[type=radio]").each((function(){if($(this).prop("checked",!1),$(this).parents("label").removeClass("checked"),$(this).hasClass("has-autre")&&$(this).prop("checked")){var val_name=$(this).attr("name");$(this).closest("label").find(".input-autre").addClass("visible").focus(),$(this).closest("label").find(".input-autre").attr("name",val_name)}else $(this).hasClass("has-autre")&&!$(this).prop("checked")&&$(this).closest("label").find(".input-autre").removeClass("visible"),$(this).closest("label").find(".input-autre").attr("name","")})),$(element).prop("checked",state),state&&$(element).parent("label").addClass("checked"),$(element).closest(".info-group.required").find(".badge-danger").addClass("d-none");var currentSlide,nextSlide=getNextSlide($slider_produit.slick("slickCurrentSlide"));0!=$(element).parents(".has_imbrique").length||$(element).hasClass("has-autre")||change_screen("next",nextSlide)}function forcer_champ_numerique(e){var t=$(e),a=/[^\d]+/g;(e[0].id.includes("telephone-acheteur")||e[0].id.includes("input-num-rappel"))&&(a=/[^\d\s?]+/g),t.val(t.val().replace(a,""))}function parse_soc_origine_di(data_lien_redir){var origine_di=check_param_redir_di(/(origine=\d+)/g,data_lien_redir);/^\d+$/.test(origine_di)&&$("#ao-origine-hpfr").val(origine_di);var soc_di=check_param_redir_di(/(soc=\d+)/g,data_lien_redir);/^\d+$/.test(soc_di)?$(".dd-ao-soc").val(soc_di):(soc_di=check_param_redir_di(/(restreint=\d+)/g,data_lien_redir),/^\d+$/.test(soc_di)&&$(".dd-ao-soc").val(soc_di))}function check_param_redir_di(pattern,data_lien_redir){if(void 0!==data_lien_redir)var tab_lien_redir=data_lien_redir.match(pattern);return null==tab_lien_redir?"":void 0!==tab_lien_redir[0]?tab_lien_redir[0].split("=")[1]:""}function creer_inserer_input_check_id_prod(id_soc,id_prod){$("#check_prod").remove(),$("#form-demande-devis").prepend('<input type="hidden" id="check_prod" name="check_id_prod_soc_'+id_soc+'" value="'+id_prod+'">')}function ao_ek_upload_hpfr(){function ao_Init(){var file_select=document.querySelectorAll(".file-upload"),file_drag=document.querySelectorAll(".file-drag"),xhr;file_select.forEach((element,index)=>{element.addEventListener("change",event=>{ao_file_select_handler(event,index)},!1)}),(new XMLHttpRequest).upload&&file_drag.forEach((element,index)=>{element.addEventListener("dragover",event=>ao_file_drag_hover(event,index),!1),element.addEventListener("dragleave",event=>ao_file_drag_hover(event,index),!1),element.addEventListener("drop",event=>ao_file_select_handler(event,index),!1)})}function ao_file_drag_hover(event,index){var file_drag=document.querySelectorAll(".file-drag");event.stopPropagation(),event.preventDefault(),file_drag[index].className="dragover"===event.type?"file-drag hover":"file-drag modal-body file-upload"}function ao_file_select_handler(event,index){var files=event.target.files||event.dataTransfer.files;if(ao_file_drag_hover(event,index),1!==files.length){var not_valid=document.querySelectorAll(".notvalid")[index],not_valid_xs=document.querySelectorAll(".notvalid-xs")[index];return not_valid.classList.remove("hidden"),not_valid_xs.classList.remove("hidden"),document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),not_valid.textContent="Veuillez ne téléverser qu'un seul fichier.",not_valid_xs.textContent="Veuillez ne téléverser qu'un seul fichier.",remove_critere(ao_get_parent(document.querySelectorAll("input[type=file]")[index],".reponses").previousElementSibling),!1}for(let i=0,f;f=files[i];i++)ao_parse_file(f,index)}function ao_output(message,index){var messages=document.querySelectorAll(".messages")[index],messages_xs=document.querySelectorAll(".input-file span")[index];messages.innerHTML=message,messages_xs.innerHTML=message}function ao_parse_file(file,index){var fileSizeLimit=2,image_name=file.name,is_valid=/\.(?=(gif|jpg|png|jpeg|docx|doc|xlsx|xls|pptx|ppt|odp|ops|odt|pdf))/i,is_image=/\.(?=gif|jpg|png|jpeg)/i.test(image_name),extension=is_valid.exec(image_name);if(extension=null!==extension?extension[1]:"",is_valid.test(image_name)){if(!(file.size<=2097152)){var not_valid=document.querySelectorAll(".notvalid")[index],not_valid_xs=document.querySelectorAll(".notvalid-xs")[index];return not_valid.classList.remove("hidden"),not_valid_xs.classList.remove("hidden"),document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),not_valid.textContent="Veuillez téléverser un fichier d'une plus petite taille (< 2 MB).",not_valid_xs.textContent="Veuillez téléverser un fichier d'une plus petite taille (< 2 MB).",!1}Object.defineProperty(file,"name",{writable:!0,value:ao_generer_id(20)+"."+extension});var src_preview=is_image?URL.createObjectURL(file):"https://"+http_host+"/annuaire_hp/demande_information_v2/images/icon/"+extension+".png";return document.querySelectorAll(".start")[index].classList.add("hidden"),document.querySelectorAll(".response")[index].classList.remove("hidden"),document.querySelectorAll(".notvalid")[index].classList.add("hidden"),document.querySelectorAll(".notvalid-xs")[index].classList.add("hidden"),document.querySelectorAll(".file-image")[index].classList.remove("hidden"),document.querySelectorAll(".file-image")[index].src=src_preview,ao_output(`<strong>${encodeURI(file.name)}</strong>`,index),!0}return document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".notvalid")[index].classList.remove("hidden"),document.querySelectorAll(".notvalid-xs")[index].classList.remove("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),document.querySelectorAll(".notvalid")[index].textContent="Veuillez sélectionner un format valide",document.querySelectorAll(".notvalid-xs")[index].textContent="Veuillez sélectionner un format valide",!1}function ao_decimal2hex(decimal){return("0"+decimal.toString(16)).substr(-2)}function ao_generer_id(taille){var array=new Uint8Array((taille||40)/2);return ao_check_ie()?window.msCrypto.getRandomValues(array):window.crypto.getRandomValues(array),Array.from(array,ao_decimal2hex).join("")}window.File&&window.FileList&&window.FileReader?ao_Init():document.querySelectorAll(".file-drag").forEach(element=>element.style.display="none")}function ao_check_ie(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}function preselectionner_critere(etape=1){if("object"==typeof cookie_redir_di_popup)if("object"==typeof cookie_redir_di_popup.a){var cookie_critere=cookie_redir_di_popup.a,message_acheteur_c=cookie_critere.com,mail_acheteur_c=cookie_critere.m,id_acheteur_c=cookie_critere.id,critere_acheteur_c=cookie_critere.crit;1==etape?($("#ao-input-mail-acheteur-hpfr").val(mail_acheteur_c).focus().blur(),$("#message_devis").val(message_acheteur_c)):2==etape&&(2!=$('input[name="souhait_devis_prod_sim"]:checked').val()&&($.each(critere_acheteur_c.choix,(function(index,value){"on"==value?(indice_click_critere++,$("#r_"+index).click().parent("label").addClass("checked")):(indice_click_critere++,$("#r_"+index).click().parent("label").addClass("checked"),$("#r_"+index).siblings(".input-autre").val(value))})),$.each(critere_acheteur_c.input,(function(index,value){$("#r_"+index).val(value)}))),$("#modal_devis").animate({scrollTop:0},0),cookie_redir_di_popup="")}else cookie_redir_di_popup=""}function show_newform(id){$("#backdrop").show(),$("#"+id).parents(".modal-wrapper").show(),$("#"+id).addClass("show")}function hide_newform(id){$("#backdrop").hide(),$(".modal-wrapper").hide(),$("#"+id).removeClass("show"),$("#"+id+" .popup-content").html("")}function show_modal_devis(origine,fp_produit,souhait_devis,mail_acheteur_connu,appel_offre=0,devis_from_scratch=0,param_lien_feuille="",source_modal="",id_rubrique="",nom_rubrique="",matching_v2=""){var param=$("#x-tag-crypt").val(),ao=appel_offre;let isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm)?1:0;$("#modal_devis").hasClass("demande_devis")&&(param=param_lien_feuille);var type_matching_v2=1,file_to_call="/hellopro_fr/ajax/ajax_formulaire_produit.php",abtest_coordonnee_cookie=getCookie("_abtest_etape_coordonnee_");ajax_demande_devis=$.ajax({url:protocol+"//"+http_host+file_to_call,type:"post",data:{param:param,souhait_devis:souhait_devis,mail_acheteur_connu:mail_acheteur_connu,ao:ao,rok:nom_rubrique.trim()?"1":0,isPageProduit:isPageProduit,matching_v2:1},beforeSend:function(){window.location.href.includes("abtest=newform")&&$(".bandeau_cookie").length&&!$(".bandeau_cookie").is(":hidden")&&$(".bandeau_cookie").hide(),hide_input_error(),$(".dbl_di,#dbl_di,#di-refuser").remove(),$("#modal_devis").find(".popup-content").html('<div class="w-100 d-flex justify-content-center"><i class="loader loader-md font-color-bleu"></i></div>'),show_newform("modal_devis")},success:function(data){$("#modal_devis").find(".popup-content").html(data),init_formulaire_produit(),$("#modal_devis #input_pro_france").length&&$("#modal_devis #input_pro_france").click(),ao_ek_upload_hpfr(),$(".screen #list_pays_tel_form_hpfr").width($(".screen #telephone-acheteur-hpfr").parents(".form-group").width()),event_ga_ao_push_("Popup_Appel_Offre","Affichage","Popup_AO_Affichage"),0==$("#mail_acheteur_connu").val()&&$("#modal_devis #pro_part_screen,#modal_devis .nv_coordonnee").removeClass("skip"),$("#modal_devis .cta-devis").removeClass("btn-disabled").removeAttr("disabled"),$("#nom_feuille_rok").length&&setTimeout((function(){$("#form-demande-devis #ao-objet-hpfr").val($("#nom_feuille_rok").val())}),500),setTimeout((function(){preselectionner_critere(1),"object"==typeof cookie_redir_di_popup&&"fp"==cookie_redir_di_popup.type_redir&&$("input#ao-input-mail-acheteur-hpfr").focus().blur()}),500)},complete:function(){$("#ao-origine-hpfr").val(origine),init_select_custom(),!param_lien_feuille&&copy_info_ach_to_modal(devis_from_scratch),lazyLoadImages(),modify_title_modal(),modify_response_time(),gest_cta_pro_part(),modify_size_content_modal(),init_message_libre_acheteur(),7==origine&&fp_produit&&($("#modal_devis .hp-modal-content").append('<input type="hidden" name="soc" value="'+$("#form-demande #soc").val()+'">'),$("#modal_devis .hp-modal-content").append('<input type="hidden" name="'+$("#form-demande #check_id_prod_soc_").attr("name")+'" value="'+$("#form-demande #check_id_prod_soc_").val()+'">')),id_rubrique?($("#form-demande-devis #ao-id_rubrique-hpfr").val(id_rubrique),""!=nom_rubrique.trim()&&$("#form-demande-devis #ao-objet-hpfr").val(nom_rubrique)):reset_id_rub_devis(),"fiche_societe_top"==source_modal&&($("#modal_devis #prod_sim_non").click(),$("#modal_devis .ps_element").hide()),"listing_produit_rubrique"==source_modal&&($("#modal_devis #prod_sim_oui").click(),$("#modal_devis .ps_element").hide()),(origine=7)&&traite_gtm_quote_form_funnel_hpfr(!0,mail_acheteur_connu),$(".is_conditionnel:not(.custom-option)").each((function(i,el){var cible=$(this).attr("data-cible"),effet=$(this).attr("data-effet"),tab_cible=cible.split(","),el_source=el;tab_cible.forEach((function(elem){var is_reponse=!1,is_question=!1;/r_/.test(elem)?is_reponse=!0:is_question=!0,$(el_source).find(".choix_reponse").prop("checked")&&!$(el_source).hasClass("option")||"show"==effet&&$(el_source).hasClass("option")&&$(el_source).hasClass("init_condition")&&$("#"+elem).removeClass("d-none")}))}))}})}function hide_input_error(){$("#input-mail-acheteur").removeClass("error").parent().find(".badge-danger").addClass("d-none"),$("#message-acheteur").removeClass("error").parent().find(".badge-danger").addClass("d-none")}function gerer_info_ao_screen_to_screen(){$("#email-copy").val($("#ao-input-mail-acheteur-hpfr").val()),1==$("#ao-mail_acheteur_connu-hpfr").val()&&$(".screen.coordonnees").addClass("skip"),$("#modal_devis #prod_sim_non").prop("checked")&&$(".screen.final").addClass("skip")}function gerer_changement_indicatif_tel(code_pays,selecteur,target){if(est_pays_top(code_pays)){1==code_pays?($(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")+" (0)"),$(target).css("paddingLeft","104px")):($(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")),$(target).css("paddingLeft","95px")),$(target).attr("placeholder",template_tel_top[code_pays].exemple_num_mobile.toString());var mask_pays_top,mask_obj={mask:template_tel_top[code_pays].mask.toString()},maskPersonnalise=Object.assign({},mask_obj,maskOptions);null!=telMask&&telMask.destroy(),telMask=IMask(document.querySelector(target),maskPersonnalise)}else $(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")),$(target).css("paddingLeft","95px"),$(target).attr("placeholder",""),null!=telMask&&telMask.destroy()}function verifier_num_tel_top(e,t){return template_tel_top[e].regex_verif.test(t)}function verifier_longueur_num_tel(e){return(e=e.replace(/\s/g,"").trim()).length<=14&&e.length>=7}function reset_form_tel(sel){$(sel).val("")}function est_pays_top(e){for(var t=Object.keys(template_tel_top),a=0;a<t.length;a++)if(t[a]==e)return!0;return!1}function init_select_custom(step=""){document.querySelectorAll(".select-custom").forEach((e,t)=>{if(null==e.closest(".custom-select-wrapper")){var a=e.className,i=(e.id,e.name,["ao-pays-acheteur-hpfr","pays-acheteur-mockup-30"]),r=`\n<span class="custom-select-trigger">\n${e.getAttribute("aria-placeholder")}\n</span>\n<div class="custom-options">\n`,n=["ville-acheteur","delai-souhaiter"];i.includes(e.id)&&(r+='<input type="text" class="search" placeholder="Rechercher...">'),children_matches(e,"option").forEach(e=>{e.selected&&!n.includes(e.id)&&e.classList.add("selection"),r+=`\n<span class="custom-option ${e.className}" data-value="${e.value}">\n${e.innerHTML}\n</span>\n`}),children_matches(e,"optgroup").forEach(e=>{r+=`\n                <div class="custom-optgroup ${e.className}" id="${e.id}">\n                    <span>${e.getAttribute("label")}</span>\n            `,children_matches(e,"option").forEach(e=>{e.selected&&e.classList.add("selection"),r+=`\n                    <span class="custom-option ${e.className}" data-value="${e.value}">\n                        ${e.innerHTML}\n                    </span>\n                `}),r+="</div>"}),r+="\n</div>\n";var o=document.createElement("div");o.setAttribute("class",a),o.innerHTML=r;var s=document.createElement("div");s.classList.add("custom-select-wrapper"),wrap(e,s),e.after(o),"0"!==e.value&&(children_matches(e,"option.selection")[0]?e.nextElementSibling.children[0].textContent=children_matches(e,"option.selection")[0].textContent:children_matches(e,"optgroup").filter(t=>{children_matches(t,"option.selection").length>0&&(e.nextElementSibling.children[0].textContent=children_matches(t,"option.selection")[0].textContent)})),i.includes(e.id)&&document.querySelectorAll(".custom-options")[t].children[1].classList.add("hidden")}}),document.querySelectorAll(".custom-option:first-of-type").forEach(e=>{e.addEventListener("mouseover",e=>{get_parent(e.target,".custom-options").classList.add("option-hover")},!1),e.addEventListener("mouseleave",e=>{get_parent(e.target,".custom-options").classList.remove("option-hover")},!1)}),document.querySelectorAll(".custom-select-trigger").forEach(e=>{var clonedElement=null;""!=step&&($(e).parents(".custom-select-wrapper").find("#ao-pays-acheteur-hpfr").length||$(e).parents(".custom-select-wrapper").find("#delai-souhaiter").length)||$(e).parents(".custom-select-wrapper").find(".liste_custom").length||(clonedElement=e.cloneNode(!0),e.replaceWith(clonedElement),clonedElement.addEventListener("click",t=>{get_parent(clonedElement,".select-custom").classList.toggle("opened"),cacher_option(),t.stopPropagation(),t.stopImmediatePropagation();var elem=$(e);if(null!=clonedElement&&$(clonedElement).parents("#pays-ach-mkp").length){var prt=$(clonedElement).parents("#pays-ach-mkp");sch=prt.find(".custom-options .search"),setTimeout((function(){sch.focus()}),200)}return!1}))}),document.querySelectorAll(".custom-option").forEach(e=>{e.addEventListener("click",()=>{var t=children_matches(get_parent(e,".custom-select-wrapper"),"select")[0];t.value=e.getAttribute("data-value"),t.setAttribute("data-selected",e.getAttribute("data-value")),"pays-acheteur"==t.name&&ao_attribution_hpfr(),children_matches(get_parent(e,".custom-options"),".custom-option").forEach(e=>{e.classList.remove("selection")}),get_siblings(e).forEach(e=>{e.classList.contains("custom-optgroup")&&children_matches(e,".custom-option").forEach(e=>{e.classList.remove("selection")}),e.classList.remove("selection")}),e.classList.add("selection"),get_parent(e,".select-custom").classList.remove("opened"),children_matches(get_parent(e,".select-custom"),".custom-select-trigger")[0].textContent=e.textContent})}),document.querySelectorAll(".custom-optgroup").forEach(e=>{}),document.querySelectorAll(".search").forEach(e=>{e.addEventListener("keyup",e=>{if(!e.isComposing&&229!==e.keyCode){var t=e.target.value;get_siblings(e.target).forEach(e=>{if(e.textContent.toLowerCase().includes(t.toLowerCase())?e.classList.remove("hidden"):e.classList.add("hidden"),"custom-optgroup"==e.className){var a=e.children;for(let e=0;e<a.length;e++){const i=a[e];i.textContent.toLowerCase().includes(t.toLowerCase())?i.classList.remove("hidden"):i.classList.add("hidden")}}})}})})}function cacher_option(){document.querySelector("html").addEventListener("click",e=>{if("custom-select-trigger"==e.explicitOriginalTarget.className)return!1;"search"==e.target.className?cacher_option():document.querySelectorAll(".select-custom").forEach(e=>{e.classList.remove("opened")})},{once:!0})}function children_matches(e,t){return Array.prototype.filter.call(e.children,e=>e.matches(t))}function wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}function get_parent(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}function get_siblings(e){return Array.prototype.filter.call(e.parentNode.children,t=>t!==e)}function siretisation(){if($("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val())return!1;var raison_social=$.trim($("#ao-societe-acheteur-hpfr").val()),code_postal=$.trim($("#ao-code-postal-acheteur-hpfr").val());if(raison_social.length>0&&code_postal.length>0&&0==code_postal.search(/^[0-9]+$/)&&$("#prof_option").prop("checked")){var data={soc:raison_social,cp:code_postal,p:"demande_information_v2"},type_siretisation,url_ws="";url_ws=2==$("#ao-type_siretisation-hpfr").val()?protocol+"//"+http_host+"/api_insee/_ag_web_service_insee.php":protocol+"//"+http_host+"/annuaire_hp/demande_information_v2/ajax/ag_web_service_cartegie.php",ajax_siretisation&&ajax_siretisation.abort(),ajax_siretisation=$.ajax({type:"GET",url:url_ws,dataType:"html",data:data,beforeSend:function(){$("#list-cartegie").html('<div class="d-flex flex-d-column justify-content-center align-items-center"><i class="loader loader-md font-color-bleu"></i><span>Nous cherchons vos coordonnées</span></div>'),show_bloc_siretisation()},success:function(retour){""!=$.trim(retour)?$("#modal_devis #list-cartegie").html(retour):($("#modal_devis #list-cartegie").html('<div class="d-flex justify-content-center align-items-center text-align-center" style="font-size:18px;height: 180px;text-align: center;">Nous n\'avons pas trouvé les coordonnées de votre société, merci de les saisir manuellement</div>'),setTimeout((function(){$("#modal_devis #list-cartegie").html(""),hide_bloc_siretisation()}),3e3))},error:function(e){hide_bloc_siretisation()}})}}function show_bloc_siretisation(){$("#modal_devis .hp-modal-title").html($(".bloc-siretisation").data("title")),$(".bloc-siretisation").show(),$("#form-demande-devis").hide()}function hide_bloc_siretisation(){modify_title_modal(),$(".bloc-siretisation").hide(),$("#form-demande-devis").show()}function gerer_selection_ville(nom_ville){$("#ville-acheteur").attr("data-selected",nom_ville),$("#ville-acheteur option:not(.disabled)").remove(),$("#ville-acheteur").append('<option class="selection" value="'+nom_ville+'" selected>'+nom_ville+"</option>"),$("#ville-acheteur + .select-custom .custom-options .custom-option:not(.disabled)").remove(),$("#ville-acheteur + .select-custom .custom-select-trigger").text(nom_ville),$("#ville-acheteur + .select-custom .custom-options").append('<span class="custom-option selection" data-value="'+nom_ville+'">'+nom_ville+"</span>"),$("#ao-ville-fr").show()}function event_ga_ao_push_(event,action_type,action_name){let dataToPush={event:event,action_type:action_type,action_name:action_name},isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm),produitSimilaireVersion=getCookie("_ab_version_tcta2_");isPageProduit&&""!=produitSimilaireVersion&&(dataToPush.abtest=produitSimilaireVersion),dataLayer.push(dataToPush)}function event_ga_ao_quote_form_funnel_push_(step_index,step_name,step_number,funnel_devisplus,funnel_context,user_known_status,product_category){let produitSimilaireVersion=getCookie("_ab_version_tcta2_"),data={event:"quote_form_funnel",step_index:step_index,step_name:step_name,step_number:step_number,funnel_devisplus:funnel_devisplus,funnel_context:funnel_context,user_known_status:user_known_status,"product.category5":product_category};"product"==page_template_gtm&&""!=produitSimilaireVersion&&(data.abtest=produitSimilaireVersion),dataLayer.push(data)}function traite_gtm_quote_form_funnel_hpfr(has_next_screen,mail_acheteur_connu){let step_number=3,produitSimilaireVersion=getCookie("_ab_version_tcta2_"),isVersionOriginal=Boolean(-1===$.inArray(produitSimilaireVersion,["produit-similaire-1","produit-similaire-2"])),isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm),step_index,step_name,context,user_known;isVersionOriginal=!1,isPageProduit&&(step_number=4),user_known=null!=mail_acheteur_connu?1==mail_acheteur_connu?"Known":"Unknown":1==$("#ao-mail_acheteur_connu-hpfr").val()?"Known":"Unknown";let devis_plus=1==$('#modal_devis input[name="souhait_devis_prod_sim"]:checked').val()?"True":"False";if("undefined"!=typeof page_referer_apo)switch(page_referer_apo){case"feuille_fa":context="cta devis pages feuilles","fa"==page_template_gtm&&(context="cta devis pages fa");break;case"page_conseil":context="cta devis pages conseils";break;case"fiche_produit":context="form pages produits"}"Known"==user_known&&(step_number=2,isPageProduit&&(step_number=3));var dataTypeqValue=null;if(context){if($(".screen.active").hasClass("coordonnees")&&has_next_screen)step_index=1,step_name="champ-coordonnees",$("#modal_devis #prod_sim_non").prop("checked")&&(step_number=2);else if($(".screen.active").hasClass("produits-similaires")&&has_next_screen)step_index=2,"Known"==user_known&&(step_index=1),step_name="produit-similaire";else if($(".screen.active").hasClass("final")&&has_next_screen){step_index=2,isPageProduit&&(step_index=3),"Known"==user_known&&(step_index=1,isPageProduit&&(step_index=2));var container=$("#screen-container"),active_screen=container.find(".screen.active");step_index=container.find("div.screen.final").index(active_screen.get(0));let question_number=step_index+1;step_name=`${question_number}eme-question`,dataTypeqValue=`${question_number}eme-question`,1==question_number&&(step_name=`${question_number}ere-question`,dataTypeqValue=`${question_number}ere-question`);var screenActiveElement=document.querySelector(".screen.active");if(screenActiveElement){var elementWithTypeq=screenActiveElement.querySelector("[data-typeq]");elementWithTypeq&&"autres"!=elementWithTypeq.getAttribute("data-typeq")&&(dataTypeqValue=elementWithTypeq.getAttribute("data-typeq"))}}else $(".screen.active").hasClass("message")?(step_index=0,step_name="champ-mail-message-libre"):has_next_screen||(step_index=3,isPageProduit&&(step_index=4),"Known"==user_known?(step_index=2,isPageProduit&&(step_index=3),$(".screen.coordonnees").hasClass("skip")&&$("#modal_devis #prod_sim_non").prop("checked")&&(step_index=step_number=1,isPageProduit&&(step_index=step_number=2))):$("#modal_devis #prod_sim_non").prop("checked")&&(step_index=step_number=2,isPageProduit&&(step_index=step_number=3)),step_name="page-remerciement");if(0==step_index&&(STEP_NUMBER_DE_BASE_GTM=step_number),"pro_part_screen"==$(".screen.active").attr("id")&&(step_name="choix-propart"),step_name&&has_next_screen&&event_ga_ao_quote_form_funnel_push(step_index,step_name,STEP_NUMBER_DE_BASE_GTM,devis_plus,context,user_known,category5,"originale",dataTypeqValue),!has_next_screen){let data_to_add={event:"quote_form_funnel",step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,funnel_devisplus:devis_plus,funnel_context:context,user_known_status:user_known,product_category5:category5};isPageProduit&&""!=produitSimilaireVersion&&(data_to_add.abtest=produitSimilaireVersion),submit_form_with_gtm_data_hpfr($("#form-demande-devis"),data_to_add)}}if(!has_next_screen){let user_known_status=1==$("#ao-mail_acheteur_connu-hpfr").val()?"Known":"Unknown";if("undefined"!=typeof max_step&&$("#id_produit_ia").val()){let data_to_add={event:"quote_form_funnel",step_index:5+parseInt(max_step),step_name:"Quote, clic-valider-coordonnees",step_number:parseInt(max_step)+2,funnel_context:"Recherche IA",user_known_status:user_known,"product.category5":category5,"step_type ":"coordonnees-IA"};"Known"==user_known_status&&(data_to_add={event:"quote_form_funnel",step_index:4+parseInt(max_step),step_name:"Quote, clic-envoyer",step_number:parseInt(max_step)+2,funnel_context:"Recherche IA",user_known_status:user_known,"product.category5":category5,"step_type ":"popup-message-ia"}),dataLayer.push(data_to_add),submit_form_with_gtm_data_hpfr($("#form-demande-devis"),data_to_add)}"undefined"!=typeof produit_from_lpia&&$("#form-demande-devis").append('<input type="hidden" name="produit_from_lpia" value="'+produit_from_lpia+'">'),$("#form-demande-devis").trigger("submit"),$(".cta-devis").on("click",(function(){return!1}))}}function submit_form_with_gtm_data_hpfr(form,data){$.each(data,(function(attribute,value){$("<input />").attr("type","hidden").attr("name",attribute).attr("value",value).appendTo(form)}))}function reset_id_rub_devis(){$("#form-demande-devis #ao-id_rubrique-hpfr").val($("#form-demande-devis #ao-id_rubrique-hpfr").data("default_id_rubrique")),$("#form-demande-devis #ao-objet-hpfr").val($("#form-demande-devis #ao-objet-hpfr").data("default_objet"))}function ao_recup_critere_hpfr(){var criteres="";return $(".ccr [type=checkbox]:checked, .ccr [type=radio]:checked").each((function(){var id_reponse=$(this).attr("id").replace("r_","");if($(this).attr("rel")!=$(this).attr("name")&&$(this).val()){var reponse_input=$(this).val();$(this).hasClass("has-autre")&&(reponse_input=$(this).siblings(".input-autre").val()),criteres+="#_&_#c_choix["+$(this).attr("rel").replace("ind_","")+"]["+id_reponse+"]="+reponse_input}})),$(".ccr input[type=text]").each((function(){if($(this).val()&&!$(this).hasClass("input-autre")){var id_reponse=$(this).attr("id").replace("r_","");criteres+="#_&_#c_simple["+id_reponse+"]="+$(this).val()}})),$(".ccr .file-upload[type=file]").each((function(){var attr_id=$(this).attr("id"),id_reponse=attr_id.replace("r_",""),name=$(this).attr("name");$('.file-upload[for="'+attr_id+'"] img.file-image').attr("src")&&(criteres+="#_&_#c_pj["+id_reponse+"] ="+id_reponse)})),criteres}function ao_save_info_acheteur_hpfr(cible,valeur){if(!$(".screen input[name=mail-acheteur]").val())return!1;var cle_svgrd=$("#ao-id_svgrd-hpfr").val();"_critere_"==cible&&(cible="critere",valeur=ao_recup_critere_hpfr());var init={};0==$("#init").length&&(init.frns=0,init.prod=0,init.rub=$("input[name=id_rubrique]").val(),init.origine=$("#ao-origine-hpfr").val()?$("#ao-origine-hpfr").val():"0",init.msg=$(".screen textarea[name=message-acheteur]").val(),init.type="0",init.critere=ao_recup_critere_hpfr(),init.mail=$(".screen input[name=mail-acheteur]").val()),$.ajax({url:"https://"+http_host+"/hellopro_fr/ajax/ajax_verification_mail_acheteur.php",type:"POST",dataType:"JSON",data:{dir:cle_svgrd,target:cible,value:valeur,init:init,id_produit_ia:$("#id_produit_ia").length?$("#id_produit_ia").val():""},success:function(retour){$("#disable_input").length&&$("#disable_input").hide(),"_ok"==retour.status&&0==$("#init").length&&($("#ao-id_svgrd-hpfr").after('<input type="hidden" id="init">'),$("#ao-id_svgrd-hpfr").val(retour.dir))}})}$((function(){$("body").on("focus change",".input",(function(e){$(this).parents(".form-group").find(".badge-danger").addClass("d-none"),$(this).removeClass("error")})),handleEmailDDBlur("input#ao-input-mail-acheteur-hpfr","#ao-mhp-mail-ok"),$(document).on("blur","input#ao-input-mail-acheteur-hpfr",(function(params){0==$(this).val().trim().length&&$(this).parents(".demande-devis-form").find(".badge.badge-danger").addClass("d-none")&&$("#cta-dmd-devis").addClass("btn-primary").removeClass("btn-disabled").removeAttr("disabled")})),$(document).on("focus","input#ao-input-mail-acheteur-hpfr",(function(params){0==$(this).val().trim().length&&$(this).parents(".demande-devis-form").find(".badge.badge-danger").addClass("d-none"),$("#cta-dmd-devis").removeClass("btn-primary").addClass("btn-disabled").attr("disabled")})),$(document).on("propertychange input",".telephone-acheteur, #ao-code-postal-acheteur-hpfr",(function(){forcer_champ_numerique($(this))})),$(document).on("change","#modal_devis .prof_part",(function(){ao_attribution_hpfr();var c=$(".prof_part:checked").attr("id");"prof_option"==c?$("#ao-societe-acheteur-hpfr").parent().show():"part_option"==c&&($("#ao-societe-acheteur-hpfr").parent().hide(),$("#ao-societe-acheteur-hpfr").val("").removeClass("readonly"),$("#ao-code-postal-acheteur-hpfr").removeClass("readonly"),$("#ao-pays-acheteur-hpfr").parent().removeClass("disabled"),$("#ao-recup_adresse-hpfr,#ao-adresse-acheteur-hpfr").val(""),$("#ao-id_cartegie_siret-hpfr,#ao-id_siret_insee-hpfr").val("")),$("#prof_option").is(":checked")&&siretisation()})),$(document).on("blur","#ao-societe-acheteur-hpfr",(function(){siretisation()})),$(document).on("blur","#ao-code-postal-acheteur-hpfr",(function(){siretisation(),ao_attribution_hpfr()})),$(document).on("click",".btn-siret",(function(e){hide_bloc_siretisation()})),$(document).on("change",'#modal_devis .info-group [type="checkbox"],#modal_devis .info-group [type="radio"]',(function(e){"quantite"==$(this).attr("name")?ao_save_info_acheteur_hpfr("qtte",$('input[name="quantite"]:checked').val()):ao_save_info_acheteur_hpfr("_critere_"),ao_attribution_hpfr()})),$(document).on("click","#ao-pays-acheteur-hpfr + .select-custom .custom-option",(function(e){$("#ao-pays-acheteur-hpfr").data("selected",$(this).data("value")),$("#ao-ville-fr").addClass("d-none"),$("#ville-acheteur").attr("data-selected",""),$("#ao-code-postal-acheteur-hpfr").trigger("input"),1==parseInt($("#ao-pays-acheteur-hpfr").val())?$("#ao-code-postal-acheteur-hpfr").parents(".form-group").find("label > span").removeClass("d-none"):$("#ao-code-postal-acheteur-hpfr").parents(".form-group").find("label > span").addClass("d-none")})),$(document).on("click","#list_pays_tel_form_hpfr li.country",(function(e){reset_form_tel("#telephone-acheteur-hpfr");var flag_pays_courant=$("#list_pays_tel_form_hpfr li.country.active_").data("flag_class");$("#list_pays_tel_form_hpfr li.country").removeClass("active_"),$(this).addClass("active_");var flag_pays_sel=$(this).data("flag_class"),id_pays;gerer_changement_indicatif_tel($(this).data("id_pays"),this,"#telephone-acheteur-hpfr"),$(this).parents(".intl-tel-input").find(".indicatif_tel").val($(this).data("flag_class")),$(this).parents(".intl-tel-input").find(".id_pays_tel").val($(this).data("id_pays")),$(this).parents(".intl-tel-input").find(".select_pays .flag").removeClass(flag_pays_courant).addClass(flag_pays_sel),$("#list_pays_tel_form_hpfr").hide(100),e.stopPropagation()})),$(document).on("click",(function(){$(".flag-dropdown").length&&$(".list_pays_tel").hide(100)})),$(document).on("click","#modal_devis .flag-dropdown",(function(e){$("#list_pays_tel_form_hpfr").toggle(250),e.stopPropagation()})),$(document).on("keydown keypress keyup",".telephone-acheteur",(function(e){32==e.keyCode&&e.preventDefault()})),$(document).on("propertychange input","#ao-code-postal-acheteur-hpfr",(function(){if(5==$(this).val().length&&1==parseInt($("#ao-pays-acheteur-hpfr").val())){var cp_acheteur=$(this).val(),action="recup-ville",version=7;ajax_recup_ville&&ajax_recup_ville.abort(),ajax_recup_ville=$.ajax({url:protocol+"//"+http_host+"/hellopro_fr/ajax/ajax_fiche_produit_v7.php",type:"post",data:{action:action,cp_acheteur:cp_acheteur,version:7},success:function(data){if(""==data)return!1;$("#ao-ville-fr").parents(".default-champ-content").html('<div class="default-champ-lib">Ville</div>\n                    <div class="default-champ-box" id="ao-ville-fr">\n                    '+data+"\n                    </div>"),$("#ao-ville-fr > label").remove(),$("#ao-ville-fr .select-custom").length&&init_select_custom("ville-acheteur"),$("#ao-ville-fr").parents(".default-champ-content").removeClass("d-none-important")},error:function(e){$("#ao-ville-fr").parents(".default-champ-content").addClass("d-none-important"),$("#ao-ville-fr").children().remove()}})}else $("#ao-ville-fr").children().remove(),$("#ao-ville-fr").parents(".default-champ-content").addClass("d-none-important")})),$(document).on("change","#modal_devis .choix_reponse",(function(){var actual_input=$(this);if($(this).hasClass("has-autre")&&$(this).prop("checked")){var val_name=$(this).attr("name");$(this).parent().find(".input-autre").addClass("visible").focus(),$(this).parent().find(".input-autre").attr("name",val_name)}else $(this).hasClass("has-autre")&&!$(this).prop("checked")&&$(this).parent().find(".input-autre").removeClass("visible"),$(this).parent().find(".input-autre").attr("name","");var parent=$(this).parents(".info-group"),elem_source=$(this).parents(".is_conditionnel");if(elem_source.length&&$(this).parent().hasClass("checked")){var cible=elem_source.attr("data-cible"),effet=elem_source.attr("data-effet"),tab_cible;(tab_cible=cible.split(",")).forEach((function(elem){var is_question=!1,is_reponse=!1;/r_/.test(elem)?is_reponse=!0:is_question=!0,"show"==effet?($("#"+elem).removeClass("d-none"),$("#"+elem).parents(".screen").removeClass("skip")):($("#"+elem).addClass("d-none"),$("#"+elem).parents(".screen").addClass("skip"),$("#"+elem+" .info-group-input label").removeClass("checked"),$("#"+elem+" .info-group-input label input").prop("checked",!1))}))}else{var elem_question=$(this).parents(".info-group"),id_question=$(elem_question).attr("id"),siblings_conditionnel=$("#"+id_question).find(".is_conditionnel");if(siblings_conditionnel.length&&!$("#"+id_question+" .is_conditionnel label").hasClass("checked")){var cible=siblings_conditionnel.attr("data-cible"),effet=siblings_conditionnel.attr("data-effet"),tab_cible;(tab_cible=cible.split(",")).forEach((function(elem){"show"==effet?($("#"+elem).addClass("d-none"),$("#"+elem).parents(".screen").addClass("skip"),$("#"+elem+" .info-group-input label").removeClass("checked"),$("#"+elem+" .info-group-input label input").prop("checked",!1)):($("#"+elem).removeClass("d-none"),$("#"+elem).parents(".screen").removeClass("skip"))}))}}})),appliquerGestionCaractere("#message_devis"),appliquerGestionCaractere("#message-acheteur"),$("body").on("click",".phfr_btn_prev",(function(){var currentSlide,prevSlide;screen_active=$(".screen.active"),change_screen("prev",getPreviousSlide($slider_produit.slick("slickCurrentSlide"))),afterChangeActions_hpfr()})),$("body").on("click",".cta-devis",(function(e){if($(this).hasClass("btn-disabled"))return!1;var type_lead="devis_plus";"2"==$('#modal_devis input[name="souhait_devis_prod_sim"]:checked').val()&&(type_lead="exclusif");var ok=verif_contrainte($("#modal_devis .screen.active"));if($(".screen.active").hasClass("message")&&$("#message_devis").val().length<40&&($(".textarea-alert-inner").css("animation","shake 0.8s"),$(".textarea-alert-inner").show(),setTimeout((function(){$(".textarea-alert-inner").css("animation","none")}),800)),ok&&$(".screen.active").hasClass("message")&&$("#input_pro_france").length&&$("#input_pro_france").click(),ok){gerer_info_ao_screen_to_screen();var res=trigger_click_next_slide();gest_cta_pro_part(),construire_tab_matching_critere_algo_v2(),construire_tab_matching_acheteur_algo_v2(0,type_lead),res||traite_gtm_quote_form_funnel_hpfr(res)}})),$("body").on("change",'#form-demande-devis [name="souhait_devis_prod_sim"]',(function(e){ao_attribution_hpfr()})),$("body").on("keyup","#form-demande-devis #message_devis",(function(e){10==$(this).val().length&&ao_attribution_hpfr()})),$("body").on("keydown","#form-right textarea,#modal_devis textarea",(function(e){$(this).siblings(".bloc-compteur").hasClass("d-none")&&$(this).siblings(".bloc-compteur").removeClass("d-none")})),$(document).on("click","#delai-souhaiter + .select-custom .custom-option",(function(e){$(this).hasClass("disabled")||$("#delai-souhaiter").parents(".form-group").find(".badge-danger").addClass("d-none")})),$("body").on("click",".aff_di_popup",(function(e){e.preventDefault();var from_lien_categorie_fiche_societe=$(this).hasClass("lien_categorie"),from_listing_produit_rubrique=$(this).hasClass("apo-rubrique"),param_di_popup=$(this).data("di_popup"),data_lien_redir=$(this).data("lien-redir"),matching_v2=$(this).hasClass("matching_v2"),src_modal="",origine=1,id_rubrique="",nom_rubrique="";if(from_lien_categorie_fiche_societe){$("#modal_open_devis").hide(),src_modal="fiche_societe_top";var orig_rub=$(this).data("orig_rub").split("_###_");origine=orig_rub[0],id_rubrique=orig_rub[1],nom_rubrique=$(this).find(".nom_categorie").attr("title")}from_listing_produit_rubrique&&(origine=46,id_rubrique=$(this).data("idf"),nom_rubrique=$(this).data("obj"),src_modal="listing_produit_rubrique",$("#ao-id_rubrique-hpfr").val(id_rubrique));var type_matching=0;matching_v2&&(type_matching=1);var fp_produit=0,souhait_devis=1,mail_acheteur_connu=0,appel_offre=1,devis_from_scratch=0;if(gestion_css_apo(),/(f=\d+)/.test(data_lien_redir)){var id_feuille_=check_param_redir_di(/(f=\d+)/g,data_lien_redir);id_feuille_>0&&(id_rubrique=id_feuille_)}show_modal_devis(origine,0,1,0,1,0,param_di_popup,src_modal,id_rubrique,nom_rubrique,matching_v2);var id_prod=check_param_redir_di(/(id_prod=\d+)/g,data_lien_redir);if(/(soc=\d+)/.test(data_lien_redir))var id_soc=check_param_redir_di(/(soc=\d+)/g,data_lien_redir);else if(/(restreint=\d+)/.test(data_lien_redir))var id_soc=check_param_redir_di(/(restreint=\d+)/g,data_lien_redir);parse_soc_origine_di(data_lien_redir),creer_inserer_input_check_id_prod(id_soc,id_prod),$("#data-dip").val(""),$("#data-dip").val(data_lien_redir)})),$(document).on("click","#modal_devis .close",(function(){gestion_css_apo(1),hide_newform("modal_devis"),$(".bandeau_cookie").length&&$(".bandeau_cookie").is(":hidden")&&$(".bandeau_cookie").show()})),$(document).on("change","#modal_devis [name=type_societe]",(function(e,i){$("#siretisation-input, #ao-societe-acheteur-mockup, #ao-code-postal-acheteur-mockup, #societe-acheteur-mockup-20, #ao-adresse-acheteur, #ao-recup_adresse , #ao-id_siret_insee ,#ao-id_cartegie_siret-hpfr, #ao-recup_adresse-hpfr, #ao-adresse-acheteur-hpfr").val(""),$("#block_pro_part_not_france #pays-acheteur-mockup-30").val("").attr("data-selected",""),$(".insert_manuel_texts > a.text-underline").click(),$("#block_pro_part_not_france #pays-ach-mkp .custom-select-trigger").text(""),!$("#modal_devis #pro_part_screen").hasClass("skip")&&$("#modal_devis #pro_part_screen").hasClass("active")&&($("#modal_devis #input_particulier").prop("checked")?($("#modal_devis .info-particulier").removeClass("d-none"),$(".cta-devis").removeClass("btn-disabled").removeAttr("disabled")):($("#modal_devis .info-particulier").addClass("d-none"),$(".cta-devis").addClass("btn-disabled").attr("disabled","disabled"))),($("#modal_devis #input_particulier").prop("checked")||$("#modal_devis #input_pro_not_france").prop("checked"))&&$("#modal_devis [name=id_siret_insee]").val(""),"input_pro_not_france"==$("#modal_devis [name=type_societe]:checked").attr("id")?$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").hasClass("d-none")||$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").addClass("d-none"):$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").hasClass("d-none")&&$("#modal_devis #block-cp-pays-ville #ao-code-postal-acheteur-hpfr").siblings("label").children("span").removeClass("d-none"),$(this).parents("#modal_devis").length&&(e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation())})),$(document).on("input","#modal_devis #ao-societe-acheteur-mockup, #modal_devis #ao-code-postal-acheteur-mockup, #modal_devis #societe-acheteur-mockup-20",(function(){let activated=!0;$(this).is("#societe-acheteur-mockup-20")?0==$(this).val().trim().length&&(activated=!1):$("#modal_devis #ao-societe-acheteur-mockup, #modal_devis #ao-code-postal-acheteur-mockup").each((function(){0==$(this).val().trim().length&&(activated=!1)})),activated?$(".cta-devis").hasClass("btn-disabled")&&$(".cta-devis").removeClass("btn-disabled").removeAttr("disabled"):$("#pro_part_screen").hasClass("skip")||$(".cta-devis").hasClass("btn-disabled")||$(".cta-devis").addClass("btn-disabled").attr("disabled","disabled")})),$(document).on("change","#modal_devis [name='type_societe']",(function(){$slider_produit.slick("setPosition")})),recup_cookie_redir_popup("redir_di_fp")?void 0!==(cookie_redir_di_popup=recup_cookie_redir_popup("redir_di_fp"))&&((cookie_redir_di_popup=JSON.parse(cookie_redir_di_popup)).type_redir="fp",$("#bloc-dd .demander_un_devis").click(),remove_cookie_popup("redir_di_fp")):recup_cookie_redir_popup("redir_di_fs")&&void 0!==(cookie_redir_di_popup=recup_cookie_redir_popup("redir_di_fs"))&&((cookie_redir_di_popup=JSON.parse(cookie_redir_di_popup)).type_redir="fs",id_rubrique=cookie_redir_di_popup.id_f,show_popup_devis(1,id_rubrique,cookie_redir_di_popup),remove_cookie_popup("redir_di_fs")),$(document).on("change","[name='souhait_devis_prod_sim']",(function(){var guil,text='Demander plusieurs devis <i class="bx bx-right-arrow-alt"></i>';"prod_sim_non"==$("[name='souhait_devis_prod_sim']:checked").attr("id")&&(text='<span>Envoyer <span class="md-none">ma demande</span></span>'),$(".cta-produit-sim").html(text)}))}));var indice_click_critere=0;function recup_cookie_redir_popup(nomDuCookie){for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(0===cookie.indexOf(nomDuCookie+"="))return decodeURIComponent(cookie.substring(nomDuCookie.length+1))}return!1}function remove_cookie_popup(nomDuCookie){document.cookie=nomDuCookie+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}if("undefined"!=typeof page_referer_apo&&("feuille_fa"==page_referer_apo||"page_conseil"==page_referer_apo))var link_css_onepage="",link_css_apo_custom="",link_css_feuille_apo_3="";function gestion_css_apo(initialiser=0){"undefined"==typeof page_referer_apo||"feuille_fa"!=page_referer_apo&&"page_conseil"!=page_referer_apo||(1==initialiser?($("#css_onepage").attr("href",link_css_onepage),$("#css_apo_custom").attr("href",link_css_apo_custom),$("#css_feuille_apo_3").attr("href",link_css_feuille_apo_3)):(""==link_css_onepage&&(link_css_onepage=$("#css_onepage").attr("href"),link_css_apo_custom=$("#css_apo_custom").attr("href"),link_css_feuille_apo_3=$("#css_feuille_apo_3").attr("href")),$("#css_onepage").attr("href",""),$("#css_apo_custom").attr("href",""),$("#css_feuille_apo_3").attr("href","")))}function modify_size_content_modal(){let modal=$("#modal_devis"),screen_active=modal.find(".screen.active"),hp_modal_content=modal.find(".hp-modal-content"),ab_version_ps=getCookie("_ab_version_ps_2_");hp_modal_content.removeClass("w-80"),hp_modal_content.removeClass("w-75"),screen_active.hasClass("produits-similaires")&&window.innerWidth>=700&&hp_modal_content.addClass("w-80")}function construire_tab_matching_critere_algo_v2(type_return="0"){var object_critere={};if($('.info-group[data-matching="1"]').each((function(i,el){var id_question=$(this).attr("id").split("_")[1];if(is_type_radio(el))$(this).find(".choix_reponse:checked").length&&(object_critere[id_question]=[],$(this).find(".choix_reponse:checked").each((function(i,el){var id_reponse=$(this).attr("id").split("_")[1];object_critere[id_question].push(id_reponse)})));else if(is_type_checkbox(el))$(this).find(".choix_reponse:checked").length&&(object_critere[id_question]=[],$(this).find(".choix_reponse:checked").each((function(i,el){var id_reponse=$(this).attr("id").split("_")[1];object_critere[id_question].push(id_reponse)})));else if(is_type_select(el)){var val_selected=$(this).find("select").attr("data-selected"),id_reponse=$(this).find("select").attr("id").split("_")[1];"0"!=val_selected&&(object_critere[id_question]=[id_reponse+"##"+val_selected])}else if(is_type_input(el)){var val_entered=$(this).find(".group-input>input").val(),id_reponse=$(this).attr("id").split("_")[1];""==$.trim(val_entered)&&(object_critere[id_question]=[id_reponse])}})),Object.keys(object_critere).length){var critere_matching=JSON.stringify(object_critere);if(1==type_return)return critere_matching;$("#dd-info_critere_matching").val(critere_matching)}}function construire_tab_matching_acheteur_algo_v2(type_return="0",type_lead="devis_plus"){var id_prof_part=$(".prof_part:checked").attr("id"),typologie="";void 0===id_prof_part?$("#ao-rep_prof_part-hpfr").length?(typologie=$("#ao-rep_prof_part-hpfr").val())>1&&7!=typologie&&(typologie=1):typologie=1:$("#ao-rep_prof_part-hpfr").length?(typologie=$("#ao-rep_prof_part-hpfr").val())>1&&7!=typologie&&(typologie=1):"prof_option"==id_prof_part?typologie=1:(typologie=7,$("#dd-code_naf_v2").val("")),$("#ao-mail_acheteur_connu-hpfr").length&&1==$("#ao-mail_acheteur_connu-hpfr").val()||(typologie=$(".input.prof_part:checked").val()),console.log(typologie);var object_info_acheteur={};object_info_acheteur.id_acheteur=$('#id[data-creation="dynamic"]').length>0?$('#id[data-creation="dynamic"]').val():"",object_info_acheteur.type_lead=type_lead,object_info_acheteur.mail=$("#input#ao-input-mail-acheteur-hpfr").val(),object_info_acheteur.cp=$("#code-postal-acheteur").length>0?$("#code-postal-acheteur").val():$("#ao-code-postal-acheteur-hpfr").val(),$('#pays-acheteur[data-creation="dynamic"]').length?object_info_acheteur.pays=$('#pays-acheteur[data-creation="dynamic"]').val():object_info_acheteur.pays=$("#ao-pays-acheteur-hpfr").val(),object_info_acheteur.typologie=typologie,object_info_acheteur.id_rubrique=$("#ao-id_rubrique-hpfr").val(),object_info_acheteur.id_produit=void 0!==$("#check_prod").val()?$("#check_prod").val():id_produit_js,object_info_acheteur.naf_acheteur=$("#dd-code_naf_v2").val(),object_info_acheteur.societe_originel=$("#ao-soc").val();var info_acheteur=JSON.stringify(object_info_acheteur);if(1==type_return)return info_acheteur;$("#dd-info_acheteur_matching").val(info_acheteur)}function is_type_radio(elem){return"radio"==$(elem).find(".choix_reponse").attr("type")}function is_type_checkbox(elem){return"checkbox"==$(elem).find(".choix_reponse").attr("type")}function is_type_input(elem){var type=$(elem).find(".group-input>input").attr("type");return"text"==type||"number"==type}function is_type_select(elem){return $(elem).find("select.liste_custom").length}function gest_cta_pro_part(){$("#modal_devis .pro-part-screen.active").length&&$("#modal_devis .cta-devis").addClass("btn-disabled")}function init_message_libre_acheteur(){}function afterChangeActions_hpfr(){if(screen=$(".screen.active"),console.log("called, screen : "),console.log(screen),screen.find("#message_devis").length>0&&($(".custom-scrollbar").each((function(){new SimpleBar(this,{autoHide:!0})})),$("#message_devis").focus()),screen.hasClass("pro-part-screen")||screen.hasClass("final")||screen.hasClass("nv_coordonnee")){screen.hasClass("final")&&$(".phfr_btn_prev").removeClass("d-none-important");var labelButton="Suivant <i class='bx bx-right-arrow-alt'></i>",currentSlide,nextSlide;!1===getNextSlide($slider_produit.slick("slickCurrentSlide"))&&(labelButton='<span>Envoyer <span class="md-none">ma demande</span></span>'),$("#cta-dmd-devis").html(labelButton)}else screen.hasClass("screen-first")?($(".cta-devis").html("Demander un devis <i class='bx bx-right-arrow-alt'></i>"),!$(".phfr_btn_prev").hasClass("d-none-important")&&$(".phfr_btn_prev").addClass("d-none-important")):screen.hasClass("produits-similaires")?($(".cta-devis").addClass("cta-produit-sim"),$(".cta-devis").html('Demander plusieurs devis <i class="bx bx-right-arrow-alt"></i>'),!$(".phfr_btn_prev").hasClass("d-none-important")&&$(".phfr_btn_prev").addClass("d-none-important")):!$(".phfr_btn_prev").hasClass("d-none-important")&&$(".phfr_btn_prev").addClass("d-none-important");setTimeout(()=>{$slider_produit.slick("setPosition")},200)}$(document).on("click",".screen.final .custom-select-wrapper",(function(e){$(e.target).hasClass("custom-option")||$(this).find(".liste_custom").toggleClass("opened")})),$(document).on("click",".screen.final .liste_custom .custom-option",(function(){var id=$(this).attr("data-value"),selectCustom=$('[data-selected="'+id+'"]');if(selectCustom.length>0){var id_rep=selectCustom.attr("id"),ordre_question=$("#"+id_rep).attr("data-ordre"),id_split=id_rep.split("_")[1],name_input="reponses["+ordre_question+"][liste]["+id+"]";$(".input_liste_r_"+id_split).attr("name",name_input)}if($(this).hasClass("is_conditionnel")&&$(this).hasClass("selection")){var elem_source=$("#r_"+id),cible=elem_source.attr("data-cible"),effet=elem_source.attr("data-effet"),tab_cible;(tab_cible=cible.split(",")).forEach((function(elem){var is_question=!1,is_reponse=!1;/r_/.test(elem)?is_reponse=!0:is_question=!0,"show"==effet?$("#"+elem).removeClass("d-none"):($("#"+elem).addClass("d-none"),$("#"+elem+" .info-group-input label").removeClass("checked"),$("#"+elem+" .info-group-input label input").prop("checked",!1))}))}else{var elem_question=$(this).parents(".info-group"),id_question=$(elem_question).attr("id"),siblings_conditionnel=$("#"+id_question).find(".is_conditionnel");if(siblings_conditionnel.length&&!$("#"+id_question+" .is_conditionnel label").hasClass("checked")){var cible=siblings_conditionnel.attr("data-cible"),effet=siblings_conditionnel.attr("data-effet"),tab_cible;(tab_cible=cible.split(",")).forEach((function(elem){"show"==effet?($("#"+elem).addClass("d-none"),$("#"+elem+" .info-group-input label").removeClass("checked"),$("#"+elem+" .info-group-input label input").prop("checked",!1)):$("#"+elem).removeClass("d-none")}))}}$(this).parents(".select-custom").removeClass("opened")})),$(document).on("click","#modal_devis .cartegid_list",(function(){var code_naf=$(this).attr("data-naf");$("#dd-code_naf_v2").val(code_naf),ao_attribution_hpfr()}));