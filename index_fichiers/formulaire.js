function scrollToEl(selector){var element=document.querySelector(selector);void 0!==element&&element.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}function ao_gestion_overflow_body(){$("body").css("overflow","hidden")}function typeWriter(element,text,i,fnCallback){i<text.length&&animationInProgress?($(element).html(text.substring(0,i+1)+'<span aria-hidden="true"></span>'),setTimeout((function(){typeWriter(element,text,i+1,fnCallback)}),40)):"function"==typeof fnCallback&&setTimeout(fnCallback,700)}function stopAnimation(){animationInProgress=!1}function event_ga_ao_push(event,action_type,action_name){let dataToPush={event:event,action_type:action_type,action_name:action_name},isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm),produitSimilaireVersion=getCookie("_ab_version_tcta2_");isPageProduit&&""!=produitSimilaireVersion&&(dataToPush.abtest=produitSimilaireVersion),dataLayer.push(dataToPush)}function event_ga_ao_quote_form_funnel_push(step_index,step_name,step_number,funnel_devisplus,funnel_context,user_known_status,product_category,abtest_name="originale",dataTypeqValue){let produitSimilaireVersion=getCookie("_ab_version_tcta2_");step_name.includes("page-remerciement")&&(dataTypeqValue="page-remerciement"),"1ere-question"!=step_name&&"2eme-question"!=step_name||(dataTypeqValue=step_name),null==dataTypeqValue&&(dataTypeqValue="autres");let data={event:"quote_form_funnel",step_index:step_index,step_name:step_name,step_number:step_number,funnel_devisplus:funnel_devisplus,funnel_context:funnel_context,user_known_status:user_known_status,"product.category5":product_category,step_type:dataTypeqValue};"product"==page_template_gtm&&""!=produitSimilaireVersion&&(data.abtest=produitSimilaireVersion),data.abtest=abtest_name,$("[name=abtest]").length&&""!=$("[name=abtest]").val()&&(data.abtest=$("[name=abtest]").val().trim()),dataLayer.push(data)}var cookie_redir_di_ao;function recup_cookie_redir_ao(nomDuCookie){for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(0===cookie.indexOf(nomDuCookie+"="))return decodeURIComponent(cookie.substring(nomDuCookie.length+1))}return!1}function scrollDown(obj){var that=obj.closest(".popup-content");that.animate({scrollTop:that[0].scrollHeight},500)}function remove_cookie_ao(nomDuCookie){document.cookie=nomDuCookie+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function disable_click(e){return e.preventDefault(),e.stopPropagation(),!1}function ao_verif_contrainte(obj){if($(".has-error").hide(),obj.hasClass("coordonnees")){var ok_coordonnee=!0;0!=$("#ao-mail_acheteur_connu").val()||all_coordonnee()?all_coordonnee()&&($("#ao-input-mail-acheteur").hasClass("1stAff")?($("#ao-input-mail-acheteur").removeClass("1stAff"),ok_coordonnee=!1):obj.find(".input-parent").each((function(i,parent){$(parent).find("[type=radio]").length>0?0==$(parent).find("input[type=radio]:checked").length&&(ok_coordonnee=!1,$(parent).find(".has-error").show()):$(parent).find("[type=text]:not(:hidden):not(.search)").each((function(i,e){1!=parseInt($("#ao-pays-acheteur").val())&&"ao-code-postal-acheteur"==$(e).attr("id")||""==$(e).val().trim()&&(ok_coordonnee=!1,$(parent).find(".has-error").show())}))}))):($(".input-parent.email-container").siblings("label").hide(),$(".input-parent.email-container").removeClass("mt-4").addClass("mt-24").find("label").removeClass("d-none"),$(".badge-confidentialite").hide(),$(".input-parent:not(.email-container)").show(),$("#ao-cta").on("click",disable_click),console.log("called from line 109"),$("input#ao-input-mail-acheteur").attr("ancien_valeur",""),$("#ao-input-mail-acheteur").addClass("disable"),ok_coordonnee=!1);var e=$("#list_pays_tel_form li.active_").data("id_pays");return""!=$.trim($("#telephone-acheteur").val())&&1!=$("#ao-mail_acheteur_connu").val()&&(ao_est_pays_top(e)?ao_verifier_num_tel_top(e,$("#telephone-acheteur").val())||($("#telephone-acheteur").parents(".input-parent").find(".badge-danger").html('<i class="bx bxs-x-circle"></i> Veuillez ajouter un format de téléphone valide').show(),ok_coordonnee=!1):ao_verifier_longueur_num_tel($("#telephone-acheteur").val())||($("#telephone-acheteur").parents(".input-parent").find(".badge-danger").html('<i class="bx bxs-x-circle"></i> Veuillez ajouter un format de téléphone valide').show(),ok_coordonnee=!1)),ok_coordonnee}if(obj.hasClass("message")&&"googleads"!=ab_google_ads){var message_length_ok=!0,mail_length_ok=!0;if(obj.hasClass("screen-first")&&""==$.trim($("#ao-input-mail-acheteur").val())&&($("#ao-input-mail-acheteur").addClass("error"),$("#ao-input-mail-acheteur").parent().addClass("contains-error"),$("#ao-input-mail-acheteur").parent().find(".has-error").show(),mail_length_ok=!1),obj.hasClass("Msg_libre_V3")){let checkboxes=$("#screen-ab .info-group .form-group").children(".bloc-ckeck"),checkbox_ok=!1;return checkboxes.each((function(){if($(this).hasClass("checked")){checkbox_ok=!0;let textarea_value=$("#ao-message-acheteur").val()+". ";textarea_value+="["+$(this).find("span").text()+"] ",$("#ao-message-acheteur").val(textarea_value)}})),obj.children().eq(0).children().eq(2).css("display","block"),checkbox_ok}if(obj.hasClass("Msg_libre_V2")){$("#ao-message-acheteur").val("");let textarea_1=$("#ao-message-acheteur_1").val(),textarea_2=$("#ao-message-acheteur_2").val(),textarea_3=$("#ao-message-acheteur_3").val(),texteareas_ok=""!==textarea_1.trim()&&""!==textarea_2.trim()&&""!==textarea_3.trim();return texteareas_ok?$("#ao-message-acheteur").val(textarea_1+"\n\n"+textarea_2+"\n\n"+textarea_3):obj.children().eq(0).children().eq(-2).css("display","block"),texteareas_ok}return $(".bloc-compteur").children(".transcription").val($("#ao-message-acheteur").val().replace(/<br><\/div>|<\/br><\/div>|<\/ br><\/div>|<\/div>|<br>|<\/br>|<\/ br>/g,"\r\n").trim("\r\n").replace(/(<([^>]+)>)/gi,"")),$(".bloc-compteur").children(".transcription").val().length<40&&(message_length_ok=!1),message_length_ok&&mail_length_ok}if("pro_part_screen"!==obj.attr("id")){var obligatoire_ok=!0,$required;return obj.find(".info-group.required").each((function(){let input_sibling_has_autre=$(this).find("input[type=radio]:checked.has-autre").siblings(".group-input").find(".input-autre");$(this).find("input[type=checkbox],input[type=radio]").length>0&&0==$(this).find("input:checked").length?(obligatoire_ok=!1,$(this).find(".error-info").show()&&setTimeout(()=>$(this).find(".error-info").is(":visible")&&scrollToEl(".error-info"),0),scrollDown(obj),$(this).closest('[data-typeq="budget"]').length&&(input_sibling_has_autre.closest('[data-typeq="budget"]').find("#input-budget").css("border","1px solid var(--color-rouge)").focus(),$(this).find(".error-info").html('\n                        <span class="badge badge-danger font-16">\n                            <i class="bx bxs-x-circle"></i>\n                            Vous devez sélectionner une réponse avant de valider\n                        </span>\n                    ')),$slider.slick("setPosition")):$(this).find("input[type=radio]:checked.has-autre").length>0?input_sibling_has_autre.length>0&&0==input_sibling_has_autre.val().trim().length&&input_sibling_has_autre.is("input[type=text]")&&(obligatoire_ok=!1,input_sibling_has_autre.css("border","1px solid var(--color-rouge)"),input_sibling_has_autre.closest('[data-typeq="budget"]').length&&(input_sibling_has_autre.closest('[data-typeq="budget"]').find("#input-budget").css("border","1px solid var(--color-rouge)").focus(),$(this).find(".error-info").html('\n                            <span class="badge badge-danger  font-16"><i class="bx bxs-x-circle"></i> Merci de renseigner votre budget pour continuer.</span>\n                        ')),$(this).find(".error-info .badge-danger").html("<i class='bx bxs-x-circle'></i> Merci de renseigner votre budget pour continuer."),$(this).find(".error-info").show()&&setTimeout(()=>$(this).find(".error-info").is(":visible")&&scrollToEl(".error-info"),0),scrollDown(obj),$slider.slick("setPosition")):$(this).find("input[type=text],input[type=file],input[type=email]").length>0&&""==$(this).find("input").val().trim()?(obligatoire_ok=!1,$(this).find(".error-info").show()&&setTimeout(()=>$(this).find(".error-info").is(":visible")&&scrollToEl(".error-info"),0),scrollDown(obj),$(this).find("input[type=email]").length&&$("#emailFeedback").removeClass("d-none-important").html('\n                    \t<span class="alert-error"><i class="bx bxs-x-circle"></i> Ce champ doit être renseigné</span>\n                    '),$slider.slick("setPosition")):$(this).find("select.liste_custom").length>0&&"0"==$(this).find("select.liste_custom").attr("data-selected")&&(obligatoire_ok=!1,$(this).find(".error-info").show()&&setTimeout(()=>$(this).find(".error-info").is(":visible")&&scrollToEl(".error-info"),0),scrollDown(obj),$slider.slick("setPosition"))})),obligatoire_ok}if(prop_fr=!0,prop_not_fr=!0,prop_part=!0,selectedValue=parseInt($("#apoModal [name='type_societe']:checked").val()),$("#apoModal #ao-input-mail-acheteur-mockup").val($("#apoModal #ao-input-mail-acheteur").val()),1===selectedValue){let search_val=$("#apoModal #block_pro_part_france #siretisation-input").val().trim(),nom_entreprise=$('#apoModal #block_pro_part_france input[name="societe-acheteur-mockup"]').val().trim(),code_postal=$('#apoModal #block_pro_part_france input[name="code-postal-acheteur-mockup"]').val().trim(),pays=$("#apoModal #block_pro_part_france #ao-pays-acheteur-mockup-2").attr("data-selected"),ville=$("#apoModal #block_pro_part_france #ao-ville-acheteur").attr("data-selected");return $("#apoModal #block_pro_part_france #bloc-info-soc").hasClass("d-none")&&""===search_val&&($("#apoModal #siretisation-input").addClass("error"),$("#apoModal #siretisation-input").parent().addClass("contains-error"),$("#apoModal #siretisation-input").parent().find(".has-error").show(),prop_fr=!1),$("#apoModal #block_pro_part_france #bloc-info-soc").hasClass("d-none")||(""===nom_entreprise&&($("#apoModal #ao-societe-acheteur-mockup").addClass("error"),$("#apoModal #ao-societe-acheteur-mockup").parent().addClass("contains-error"),$("#apoModal #ao-societe-acheteur-mockup").parent().find(".has-error").show(),prop_fr=!1),""===code_postal&&($("#apoModal #ao-code-postal-acheteur-mockup").addClass("error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().find(".has-error").show(),prop_fr=!1),""===nom_entreprise&&""===code_postal&&"0"===pays&&""===ville&&($("#apoModal #ao-societe-acheteur-mockup").addClass("error"),$("#apoModal #ao-societe-acheteur-mockup").parent().addClass("contains-error"),$("#apoModal #ao-societe-acheteur-mockup").parent().find(".has-error").show(),$("#apoModal #ao-code-postal-acheteur-mockup").addClass("error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().find(".has-error").show(),$("#apoModal #ville-fr-mockup .custom-select-wrapper").addClass("error"),$("#apoModal #ville-fr-mockup .custom-select-wrapper").parent().addClass("contains-error"),$("#apoModal #ville-fr-mockup .custom-select-wrapper").each((function(){var $parent=$(this).parent(),$errorElement=$parent.find(".has-error");$errorElement.length>0&&($parent.append($errorElement),$errorElement.show())})),prop_fr=!1),""===code_postal&&($("#apoModal #ao-code-postal-acheteur-mockup").addClass("error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().addClass("contains-error"),$("#apoModal #ao-code-postal-acheteur-mockup").parent().find(".has-error").show(),prop_fr=!1),""===ville&&($("#apoModal #ville-fr-mockup .custom-select-wrapper").addClass("error"),$("#apoModal #ville-fr-mockup .custom-select-wrapper").parent().addClass("contains-error"),$("#apoModal #ville-fr-mockup .custom-select-wrapper").each((function(){var $parent=$(this).parent(),$errorElement=$parent.find(".has-error");$errorElement.length>0&&($parent.append($errorElement),$errorElement.show())})),prop_fr=!1),""!==ville&&""!==nom_entreprise&&""!==code_postal&&""!==pays&&($("#apoModal #block-pro-title").removeClass("d-none"),$("#apoModal #block-particulier-title").addClass("d-none"),$("#apoModal #block-cp-pays-ville").addClass("d-none-important"),$("#apoModal #info-information-utilisee").addClass("d-none"),$("#apoModal #ao-code-postal-acheteur").val(`${code_postal}`),$("#apoModal #ao-societe-acheteur").val(`${nom_entreprise}`),$("#apoModal #pays-ach .custom-option[data-value="+pays+"]").click(),$("#apoModal #ville-fr #ao-ville-acheteur").attr("data-selected",`${ville}`),$("#apoModal #pro_part_radio #prof_option").click(),prop_fr=!0)),prop_fr}if(2===selectedValue){$("#apoModal #ao-id_siret_insee").val("");let nom_entreprise=$('#apoModal #block_pro_part_not_france input[name="societe-acheteur-mockup-20"]').val().trim(),pays=$("#apoModal #pays-ach-mkp #pays-acheteur-mockup-30").attr("data-selected");return""===nom_entreprise?($("#apoModal #societe-acheteur-mockup-20").addClass("error"),$("#apoModal #societe-acheteur-mockup-20").parent().addClass("contains-error"),$("#apoModal #societe-acheteur-mockup-20").parent().find(".has-error").show(),prop_not_fr=!1):"0"===pays&&($("#apoModal #custom-select-wrapper").addClass("error"),$("#apoModal #custom-select-wrapper").parent().addClass("contains-error"),$("#apoModal #custom-select-wrapper").parent().find(".has-error").show(),prop_not_fr=!1),"0"===pays&&($("#apoModal #pays-acheteur-mockup-30").addClass("error"),$("#apoModal #pays-ach-mkp .custom-select-wrapper").parent().addClass("contains-error"),$("#apoModal #pays-ach-mkp .custom-select-wrapper").parent().find(".has-error").show(),prop_not_fr=!1),""===nom_entreprise&&"0"===pays&&($("#apoModal #societe-acheteur-mockup-20").addClass("error"),$("#apoModal #societe-acheteur-mockup-20").parent().addClass("contains-error"),$("#apoModal #societe-acheteur-mockup-20").parent().find(".has-error").show(),$("#apoModal #pays-acheteur-mockup-30").addClass("error"),$("#apoModal #pays-acheteur-mockup-30").parent().addClass("contains-error"),$("#apoModal #pays-acheteur-mockup-30").parent().find(".has-error").show(),prop_not_fr=!1),""!==nom_entreprise&&"0"!==pays&&($("#apoModal #block-pro-title").removeClass("d-none"),$("#apoModal #block-particulier-title").addClass("d-none"),$("#apoModal #block-cp-pays-ville").addClass("d-none-important"),$("#apoModal #info-information-utilisee").addClass("d-none"),$("#apoModal #ao-societe-acheteur").val(`${nom_entreprise}`),$("#apoModal #pays-ach .custom-option[data-value="+pays+"]").click(),prop_not_fr=!0),$("#apoModal #pro_part_radio #prof_option").click(),prop_not_fr}if(3===selectedValue)return $("#apoModal #ao-id_siret_insee").val(""),$("#apoModal #block-pro-title").addClass("d-none"),$("#apoModal #block-particulier-title").removeClass("d-none"),$("#apoModal #block-cp-pays-ville").removeClass("d-none-important"),$("#apoModal #info-information-utilisee").removeClass("d-none"),$("#apoModal #ao-code-postal-acheteur").val(""),$("#apoModal #ao-societe-acheteur").val(""),$("#apoModal #pays-ach-hpfr .custom-option[data-value='0']").click(),$("#apoModal #pro_part_radio #part_option").click(),prop_part}function ao_scroll_to_top(){$("html, body ,.modal-wrapper,#apoModal").animate({scrollTop:0},"slow")}function ao_ctrl_radio(element){var state=$(element).is(":checked"),is_ffa=!1;"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo&&(is_ffa=!0),$(element).parents(".info-group-input").find("input[type=radio]").each((function(index,el){$(this).prop("checked",!1),$(this).parent(".group-input").removeClass("checked"),is_ffa&&$(el).parent("label").removeClass("checked"),$(el).parent("label").removeClass("checked");let input_sibling_has_autre_text=$(this).siblings(".input-autre");input_sibling_has_autre_text.length>0&&input_sibling_has_autre_text.is("input[type=text]")&&input_sibling_has_autre_text.css("border","0")})),$(element).prop("checked",state),state&&($(element).parent(".group-input").addClass("checked"),is_ffa&&$(element).parent("label").addClass("checked"));var currentSlide=$slider.slick("slickCurrentSlide");handle_conditionnnel();var nextSlide=ao_getNextSlide(currentSlide);is_ffa&&0==$(element).parents(".has_imbrique").length&&!$(element).hasClass("has-autre")?ao_change_screen("next",nextSlide):0!=$(element).parents(".has_imbrique").length||$(element).hasClass("has-autre")||ao_change_screen("next",nextSlide)}function ao_ek_upload(){function ao_Init(){var file_select=document.querySelectorAll(".file-upload"),file_drag=document.querySelectorAll(".file-drag"),xhr;file_select.forEach((element,index)=>{element.addEventListener("change",event=>{ao_file_select_handler(event,index)},!1)}),(new XMLHttpRequest).upload&&file_drag.forEach((element,index)=>{element.addEventListener("dragover",event=>ao_file_drag_hover(event,index),!1),element.addEventListener("dragleave",event=>ao_file_drag_hover(event,index),!1),element.addEventListener("drop",event=>ao_file_select_handler(event,index),!1)})}function ao_file_drag_hover(event,index){var file_drag=document.querySelectorAll(".file-drag");event.stopPropagation(),event.preventDefault(),file_drag[index].className="dragover"===event.type?"file-drag hover":"file-drag modal-body file-upload"}function ao_file_select_handler(event,index){var files=event.target.files||event.dataTransfer.files;if(ao_file_drag_hover(event,index),1!==files.length){var not_valid=document.querySelectorAll(".notvalid")[index],not_valid_xs=document.querySelectorAll(".notvalid-xs")[index];return not_valid.classList.remove("hidden"),not_valid_xs.classList.remove("hidden"),document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),not_valid.textContent="Veuillez ne téléverser qu'un seul fichier.",not_valid_xs.textContent="Veuillez ne téléverser qu'un seul fichier.",remove_critere(ao_get_parent(document.querySelectorAll("input[type=file]")[index],".reponses").previousElementSibling),!1}for(let i=0,f;f=files[i];i++)ao_parse_file(f,index)}function ao_output(message,index){var messages=document.querySelectorAll(".messages")[index],messages_xs=document.querySelectorAll(".input-file span")[index];messages.innerHTML=message,messages_xs.innerHTML=message}function ao_parse_file(file,index){var fileSizeLimit=2,image_name=file.name,is_valid=/\.(?=(gif|jpg|png|jpeg|docx|doc|xlsx|xls|pptx|ppt|odp|ops|odt|pdf))/i,is_image=/\.(?=gif|jpg|png|jpeg)/i.test(image_name),extension=is_valid.exec(image_name);if(extension=null!==extension?extension[1]:"",is_valid.test(image_name)){if(!(file.size<=2097152)){var not_valid=document.querySelectorAll(".notvalid")[index],not_valid_xs=document.querySelectorAll(".notvalid-xs")[index];return not_valid.classList.remove("hidden"),not_valid_xs.classList.remove("hidden"),document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),not_valid.innerHTML='<i class="bx bxs-x-circle"></i>Veuillez téléverser un fichier d\'une plus petite taille (< 2 MB).',not_valid_xs.innerHTML='<i class="bx bxs-x-circle"></i>Veuillez téléverser un fichier d\'une plus petite taille (< 2 MB).',!1}Object.defineProperty(file,"name",{writable:!0,value:ao_generer_id(20)+"."+extension});var src_preview=is_image?URL.createObjectURL(file):"https://"+http_host+"/annuaire_hp/demande_information_v2/images/icon/"+extension+".png";return document.querySelectorAll(".start")[index].classList.add("hidden"),document.querySelectorAll(".response")[index].classList.remove("hidden"),document.querySelectorAll(".notvalid")[index].classList.add("hidden"),document.querySelectorAll(".notvalid-xs")[index].classList.add("hidden"),document.querySelectorAll(".file-image")[index].classList.remove("hidden"),document.querySelectorAll(".file-image")[index].src=src_preview,ao_output(`<strong>${encodeURI(file.name)}</strong>`,index),!0}return document.querySelectorAll(".file-image")[index].classList.add("hidden"),document.querySelectorAll(".notvalid")[index].classList.remove("hidden"),document.querySelectorAll(".notvalid-xs")[index].classList.remove("hidden"),document.querySelectorAll(".start")[index].classList.remove("hidden"),document.querySelectorAll(".response")[index].classList.add("hidden"),document.querySelectorAll(".notvalid")[index].innerHTML='<i class="bx bxs-x-circle"></i>Veuillez sélectionner un format valide',document.querySelectorAll(".notvalid-xs")[index].innerHTML='<i class="bx bxs-x-circle"></i>Veuillez sélectionner un format valide',!1}function ao_decimal2hex(decimal){return("0"+decimal.toString(16)).substr(-2)}function ao_generer_id(taille){var array=new Uint8Array((taille||40)/2);return ao_check_ie()?window.msCrypto.getRandomValues(array):window.crypto.getRandomValues(array),Array.from(array,ao_decimal2hex).join("")}window.File&&window.FileList&&window.FileReader?ao_Init():document.querySelectorAll(".file-drag").forEach(element=>element.style.display="none")}function ao_attribution(lancer_avant_validation=!1){return!0;var _tab_critere_,_tab_acheteur_}function ao_check_ie(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}function ao_selecteur(){document.querySelectorAll(".ccr input[type=radio]").forEach(element=>{element.addEventListener("change",event_handler.radio_event)}),document.querySelectorAll(".ccr input[type=checkbox]").forEach(element=>{element.addEventListener("change",event_handler.checkbox_event)}),document.querySelectorAll("input[type=text], #filtre-quantite").forEach(element=>{element.addEventListener("change",event_handler.input_event)})}function ao_save_info_acheteur(cible,valeur){var cle_svgrd=$("#ao-id_svgrd").val();"first"==valeur&&(cle_svgrd="-1"),"_critere_"==cible&&(cible="critere",valeur=ao_recup_critere());var init={};0==$("#init").length&&(init.frns=0,init.prod=0,init.rub=$("input[name=id_rubrique]").val(),init.origine=$("#ao-origine").val()?$("#ao-origine").val():"46",init.msg=$(".screen [name=message-acheteur]").val(),init.type="0",init.critere=ao_recup_critere(),init.mail=$(".screen input[name=mail-acheteur]").val()),$.ajax({url:"https://"+http_host+"/hellopro_fr/ajax/ajax_verification_mail_acheteur.php",type:"POST",dataType:"JSON",data:{dir:cle_svgrd,target:cible,value:valeur,init:init},success:function(retour){$("#disable_input").length&&$("#disable_input").hide(),"_ok"==retour.status&&0==$("#init").length&&($("#ao-id_svgrd").after('<input type="hidden" id="init">'),$("#ao-id_svgrd").val(retour.dir))}})}function ao_recup_critere(){var criteres="";return $(".ccr [type=checkbox]:checked, .ccr [type=radio]:checked").each((function(){var id_reponse=$(this).attr("id").replace("r_","");if($(this).attr("rel")!=$(this).attr("name")&&$(this).val()){var reponse_input=$(this).val();$(this).hasClass("has-autre")&&(reponse_input=$(this).siblings(".input-autre").val()),criteres+="#_&_#c_choix["+$(this).attr("rel").replace("ind_","")+"]["+id_reponse+"]="+reponse_input}})),$(".ccr input[type=text]").each((function(){if($(this).val()&&!$(this).hasClass("input-autre")){var id_reponse=$(this).attr("id").replace("r_","");criteres+="#_&_#c_simple["+id_reponse+"]="+$(this).val()}})),$(".ccr .file-upload[type=file]").each((function(){var attr_id=$(this).attr("id"),id_reponse=attr_id.replace("r_",""),name=$(this).attr("name");$('.file-upload[for="'+attr_id+'"] img.file-image').attr("src")&&(criteres+="#_&_#c_pj["+id_reponse+"] ="+id_reponse)})),criteres}function all_coordonnee(){return $(".screen.active").hasClass("coordonnees")&&$(".screen.active").find("div.input-parent:not(.email-container):visible").length}function handle_conditionnnel(){screen_active=$(".screen.active"),screen_active.find(".choix_reponse").parents(".is_conditionnel").each((function(){var elem_source=$(this);$(elem_source).find(".choix_reponse").each((function(i,el){if($(el).prop("checked")){var cible=elem_source.attr("data-cible"),effet=elem_source.attr("data-effet"),tab_cible;ao_afficher_cible(tab_cible=cible.split(","),effet)}else if(has_siblings_conditionnel("group-input")&&!$(".screen.active .is_conditionnel .choix_reponse:checked").length){var elem_reset=elem_source,cible=elem_reset.attr("data-cible"),effet=elem_reset.attr("data-effet"),tab_cible;ao_cacher_cible(tab_cible=cible.split(","),effet)}}))}))}function ao_change_screen(action="next",slide=null){screen_active=$(".screen.active");var return_value=!1;if("next"==action)if(slide>-1){$(".questions-container").slick("slickGoTo",slide),$(".screen").removeClass("active");var slide_element=$(".questions-container").slick("getSlick").$slides.eq(slide);$(slide_element).find(".screen").addClass("active"),ao_scroll_to_top(),$("#main-container-header").slideUp(300),$(".screen.active").prevAll(".coordonnees").length>0&&ao_attribution(),$(".popup-apo .error-info").hide(),traite_gtm_quote_form_funnel(!0,is_begin),actu_ao_prev(),$("#dbl_di").length&&(screen_active.nextAll(".screen:not(.skip)").first().hasClass("coordonnees")?$("#ao-cta").addClass("btn-grise readonly"):$("#ao-cta").removeClass("btn-grise readonly")),$("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val()&&($(".screen.active").hasClass("coordonnees")&&"final-step"==$(".screen.active").attr("id")?$("#ao-cta").html('<span>Envoyer <span class="md-none">ma demande</span></span>'):$("#ao-cta").html('Suivant<i class="bx bx-right-arrow-alt"></i>'),"pro_part_screen"==$(".screen.active").attr("id")&&$("#ao-cta").addClass("btn-disabled"),"input_pro_not_france"==$("[name=type_societe]:checked").attr("id")?$("#block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").hasClass("d-none")||$("#block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").addClass("d-none"):$("#block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").hasClass("d-none")&&$("#block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").removeClass("d-none")),ao_save_info_acheteur("_critere_"),return_value=!0}else $("#dbl_di").length&&$("#ao-cta").addClass("btn-grise readonly");if("prev"==action&&slide>-1){$(".questions-container").slick("slickGoTo",slide),$(".screen").removeClass("active");var slide_element=$(".questions-container").slick("getSlick").$slides.eq(slide);$(slide_element).find(".screen").addClass("active"),ao_scroll_to_top(),$("#main-container-header").slideDown(300),$("#ao-cta").hasClass("disable")&&$("#ao-cta").off("click",disable_click).removeClass("disable"),$("#ao-cta").removeClass("btn-grise readonly");let container=$("#screen-container"),active_screen=container.find(".screen.active"),index;0==container.find("div.screen").index(active_screen.get(0))&&(is_begin=!0),$(".popup-apo .error-info").hide(),traite_gtm_quote_form_funnel(!0,is_begin,!0),actu_ao_prev(),$("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val()&&($(".screen.active").hasClass("coordonnees")&&"final-step"==$(".screen.active").attr("id")?$("#ao-cta").html('<span>Envoyer <span class="md-none">ma demande</span></span>'):$("#ao-cta").html('Suivant<i class="bx bx-right-arrow-alt"></i>')),return_value=!0}return return_value}function afterChangeActions(){screen=$(".screen.active"),console.log("called, screen : "),console.log(screen),screen.find("#ao-message-acheteur").length>0&&($(".custom-scrollbar").each((function(){new SimpleBar(this,{autoHide:!0})})),$("#ao-message-acheteur").focus(),document.querySelector(".filepond--list-scroller").setAttribute("data-state","none"),$("#cam-container").css("height",$(".filepond--drop-label").height()),$("#cam-container").css("width",$(".filepond--drop-label").width()))}function ao_hide_modal(){$("#backdrop-apo").hide(),$(".modal-wrapper").hide(),$("#apoModal .content").html(""),$("#ao-cta,#ao-prev").show(),$(".btn-group-ao .pub-ind").show(),$("#ao-siret,#delai-rep-frns").hide(),$("#apoModal").find(".hp-modal-header .hp-modal-title").text("Envoyez votre projet aux meilleurs fournisseurs"),$("#ao-cta").html('Suivant<i class="bx bx-right-arrow-alt"></i>'),$("body").css("overflowY","auto"),$("#check_prod").remove(),$("#ao-progress-bar").css("width",0)}function ao_gestion_overflow_body(){$("body").css("overflow","hidden")}function ao_gestion_overflow_body_ffa(){$("body").css("overflow","hidden"),(is_scroll_down||"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo)&&($("html").css("overflow","hidden"),"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo&&(backup_bloc_depile=$("#bloc_deplie").remove()))}function ao_init_select_custom(step=""){document.querySelectorAll(".select-custom").forEach((e,t)=>{if(null==e.closest(".custom-select-wrapper")&&null==e.closest(".custom-select-wrapper")){var a=e.className,i=(e.id,e.name,["ao-pays-acheteur","pays-acheteur-mockup-30"]),r=`\n  <span class="custom-select-trigger">\n  ${e.getAttribute("aria-placeholder")}\n  </span>\n  <div class="custom-options">\n  `,n=["ao-ville-acheteur"];i.includes(e.id)&&(r+='<input type="text" class="search" placeholder="Rechercher...">'),ao_children_matches(e,"option").forEach(e=>{e.selected&&!n.includes(e.id)&&e.classList.add("selection"),r+=`\n  <span class="custom-option ${e.className}" data-value="${e.value}">\n  ${e.innerHTML}\n  </span>\n  `}),ao_children_matches(e,"optgroup").forEach(e=>{r+=`\n                  <div class="custom-optgroup ${e.className}" id="${e.id}">\n                      <span>${e.getAttribute("label")}</span>\n              `,ao_children_matches(e,"option").forEach(e=>{e.selected&&e.classList.add("selection"),r+=`\n                      <span class="custom-option ${e.className}" data-value="${e.value}">\n                          ${e.innerHTML}\n                      </span>\n                  `}),r+="</div>"}),r+="\n</div>\n";var o=document.createElement("div");o.setAttribute("class",a),o.innerHTML=r;var s=document.createElement("div");s.classList.add("custom-select-wrapper"),ao_wrap(e,s),e.after(o),"0"!==e.value&&(ao_children_matches(e,"option.selection")[0]?e.nextElementSibling.children[0].textContent=ao_children_matches(e,"option.selection")[0].textContent:children_matches(e,"optgroup").filter(t=>{ao_children_matches(t,"option.selection").length>0&&(e.nextElementSibling.children[0].textContent=ao_children_matches(t,"option.selection")[0].textContent)})),i.includes(e.id)&&document.querySelectorAll(".custom-options")[t].children[1].classList.add("hidden")}}),document.querySelectorAll(".custom-option:first-of-type").forEach(e=>{e.addEventListener("mouseover",e=>{ao_get_parent(e.target,".custom-options").classList.add("option-hover")},!1),e.addEventListener("mouseleave",e=>{ao_get_parent(e.target,".custom-options").classList.remove("option-hover")},!1)}),document.querySelectorAll(".custom-select-trigger").forEach(e=>{if(""==step||!$(e).parents(".custom-select-wrapper").find("#ao-pays-acheteur").length){var clonedElement=e.cloneNode(!0);e.replaceWith(clonedElement),clonedElement.addEventListener("click",t=>{if(ao_get_parent(clonedElement,".select-custom").classList.toggle("opened"),t.stopPropagation(),t.stopImmediatePropagation(),$(clonedElement).parents("#pays-ach-mkp").length){var prt=$(clonedElement).parents("#pays-ach-mkp");sch=prt.find(".custom-options .search"),setTimeout((function(){sch.focus()}),200)}return!1})}}),document.querySelectorAll(".custom-option").forEach(e=>{e.addEventListener("click",()=>{var t=ao_children_matches(ao_get_parent(e,".custom-select-wrapper"),"select")[0];t.value=e.getAttribute("data-value"),t.setAttribute("data-selected",e.getAttribute("data-value")),"pays-acheteur"==t.name&&ao_attribution(),ao_children_matches(ao_get_parent(e,".custom-options"),".custom-option").forEach(e=>{e.classList.remove("selection")}),ao_get_siblings(e).forEach(e=>{e.classList.contains("custom-optgroup")&&ao_children_matches(e,".custom-option").forEach(e=>{e.classList.remove("selection")}),e.classList.remove("selection")}),e.classList.add("selection"),ao_get_parent(e,".select-custom").classList.remove("opened"),ao_children_matches(ao_get_parent(e,".select-custom"),".custom-select-trigger")[0].textContent=e.textContent})}),document.querySelectorAll(".custom-optgroup").forEach(e=>{}),document.querySelectorAll(".search").forEach(e=>{e.addEventListener("keyup",e=>{if(!e.isComposing&&229!==e.keyCode){var t=e.target.value;ao_get_siblings(e.target).forEach(e=>{if(e.textContent.toLowerCase().includes(t.toLowerCase())?e.classList.remove("hidden"):e.classList.add("hidden"),"custom-optgroup"==e.className){var a=e.children;for(let e=0;e<a.length;e++){const i=a[e];i.textContent.toLowerCase().includes(t.toLowerCase())?i.classList.remove("hidden"):i.classList.add("hidden")}}})}})})}function ao_cacher_option(){document.querySelector("html").addEventListener("click",e=>{if("custom-select-trigger"==e.explicitOriginalTarget.className)return!1;"search"==e.target.className?ao_cacher_option():document.querySelectorAll(".select-custom").forEach(e=>{e.classList.remove("opened")})},{once:!0})}function ao_children_matches(e,t){return Array.prototype.filter.call(e.children,e=>e.matches(t))}function ao_wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}function ao_get_parent(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}function ao_get_siblings(e){return Array.prototype.filter.call(e.parentNode.children,t=>t!==e)}function ao_verif_dbl_di(sel,elem=""){var rubrique_dbl=id_rubrique_js;$("#ao-id_rubrique").length&&""!=$("#ao-id_rubrique").val()&&(rubrique_dbl=$("#ao-id_rubrique").val());const e=$.trim($(sel).val());if(""!=e){var t=encodeURIComponent($.trim($("input#ao-url_page").val()));$.ajax({url:protocol+"//"+http_host+"/annuaire_hp/ajax/demande_information/verif_doublon_di.php",type:"post",async:!1,data:"email="+e+"&id_rubrique="+rubrique_dbl+"&url_page="+t,success:function(e){$(".dbl_di,#dbl_di").remove(),""==e&&"input#ao-input-mail-acheteur"==sel&&$("#ao-cta").removeClass("btn-grise readonly"),""==elem&&"notifier"==e&&($("#ao-cta").addClass("btn-grise readonly"),$(".screen.active").append('<div id="dbl_di">Vous avez déjà effectué une demande dans cette même catégorie, elle est en cours de traitement. En cas d’urgence merci de contacter le 0 825 815 816</div>').prepend('<input type="hidden" class="dbl_di">'),$("#dbl_di").slideDown(300).css("marginBottom","15px"),null!=$slider&&$slider.slick("setPosition"),"undefined"!=typeof $slider_produit&&null!==$slider_produit&&$slider_produit.slick("setPosition"))}})}}function ao_init_data_dir(e){var rubrique_init=id_rubrique_js;$("#ao-id_rubrique").length&&""!=$("#ao-id_rubrique").val()&&(rubrique_init=$("#ao-id_rubrique").val());var t={};return $("#init").remove(),t.frns=id_societe,t.prod=id_produit_js,t.rub=rubrique_init,{verification:e,init:t,dir:$("#ao-id_svgrd").val()}}function ao_gerer_changement_indicatif_tel(code_pays,selecteur,target){if(ao_est_pays_top(code_pays)){1==code_pays?($(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")+" (0)"),$(target).css("paddingLeft","95px")):($(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")),$(target).css("paddingLeft","86px")),$(target).attr("placeholder",template_tel_top[code_pays].exemple_num_mobile.toString());var mask_pays_top,mask_obj={mask:template_tel_top[code_pays].mask.toString()},maskPersonnalise=Object.assign({},mask_obj,maskOptions);null!=telMask&&telMask.destroy(),"undefined"!=typeof IMask&&(telMask=IMask(document.querySelector(target),maskPersonnalise))}else $(target).parents(".intl-tel-input").find(".indicateur_tel").text($(selecteur).data("dial_code")),$(target).css("paddingLeft","86px"),$(target).attr("placeholder",""),null!=telMask&&telMask.destroy()}function ao_verifier_num_tel_top(e,t){return template_tel_top[e].regex_verif.test(t)}function ao_verifier_longueur_num_tel(e){return(e=e.replace(/\s/g,"").trim()).length<=14&&e.length>=7}function ao_reset_form_tel(sel){$(sel).val("")}function ao_est_pays_top(e){for(var t=Object.keys(template_tel_top),a=0;a<t.length;a++)if(t[a]==e)return!0;return!1}function ao_forcer_champ_numerique(e){var t=$(e),a=/[^\d]+/g;e[0].id.includes("telephone-acheteur")&&(a=/[^\d\s?]+/g),t.val(t.val().replace(a,""))}function ao_gestionCaractereRestant(editable){var max=2e3;"<br>"==$(editable).html()&&$(editable).html(""),$(".bloc-compteur").children(".transcription").val($(editable).val().replace(/<br><\/div>|<\/br><\/div>|<\/ br><\/div>|<\/div>|<br>|<\/br>|<\/ br>/g,"\r\n").trim("\r\n").replace(/(<([^>]+)>)/gi,""));var current=0;if($(".bloc-compteur").children(".transcription").val()&&(current=$(".bloc-compteur").children(".transcription").val().length),current>2e3)return!1;var span_txt=$(".bloc-compteur").find("span");const textareaAlert=$(".textarea-alert-inner"),textareaAlertOnFocus=$(".textarea-alert-inner-on-focus");current<1?(textareaAlert.show(),textareaAlertOnFocus.hide()):current>=40?(textareaAlert.hide(),textareaAlertOnFocus.show()):current>0&&current<40&&(textareaAlert.show(),textareaAlertOnFocus.hide()),current<40?span_txt.addClass("nb_carac_nok").removeClass("nb_carac_ok"):span_txt.addClass("nb_carac_ok").removeClass("nb_carac_nok");var delta=parseInt(2e3)-parseInt(current);return $slider.slick("setPosition"),span_txt.text(current),delta}function ao_GetFilename(url){if(url){var m=url.toString().match(/.*\/(.+?)\./);if(m&&m.length>1)return m[1]}return""}function ao_valider_step_one(){var has_error=!0;return $(".description-besoin .error-info").length>0?$(".description-besoin .choix_reponse").each((function(i,el){$(el).prop("checked")&&(has_error=!1,$(".description-besoin").append('<input type="hidden" class="fst-question-sel" id="popup_'+$(el).attr("id")+'">'))})):has_error=!1,has_error&&$(".description-besoin .error-info").show(),has_error}function ao_valider_step_one_ffa(){var check=!1;return $("#cn-form-ao .choix_reponse").each((function(i,el){$(el).prop("checked")&&(check=!0,$("#cn-form-ao").append('<input type="hidden" class="fst-question-sel" id="popup_'+$(el).attr("id")+'">'),$(el).hasClass("has-autre")&&(reponse_autre=$(el).siblings(".input-autre").val()))})),!(!check&&$("#cn-form-ao .error-info").length>0)||($("#cn-form-ao .error-info").show(),!1)}function ao_siretisation(){var raison_social=$.trim($("#ao-societe-acheteur").val()),code_postal=$.trim($("#ao-code-postal-acheteur").val());if(raison_social.length>0&&code_postal.length>0&&0==code_postal.search(/^[0-9]+$/)&&!$("#part_option").prop("checked")){var data={soc:raison_social,cp:code_postal,p:"demande_information_v2"},type_siretisation,url_ws="";url_ws=2==$("#ao-type_siretisation").val()?protocol+"//"+http_host+"/api_insee/_ag_web_service_insee.php":protocol+"//"+http_host+"/annuaire_hp/demande_information_v2/ajax/ag_web_service_cartegie.php",ajax_siretisation&&ajax_siretisation.abort(),ajax_siretisation=$.ajax({type:"GET",url:url_ws,dataType:"html",data:data,beforeSend:function(){$("#loading-final-step").html('<div><i class="loader loader-md font-color-orange"></i><span>Nous cherchons vos coordonnées</span></div>'),$("#apoModal .backdrop-apo").show(),$("#loading-final-step").show()},success:function(retour){""!=$.trim(retour)?($("#apoModal .content #list-cartegie").html(retour),$("#apoModal .screen.coordonnees.active").removeClass("active"),$("#ao-cta,#ao-prev,.pub-ind").hide(),$("#ao-siret").show(),$("#apoModal .step-siret").show(),$("#apoModal .backdrop-apo").hide(),$("#loading-final-step").hide()):($("#apoModal .backdrop-apo").hide(),$("#loading-final-step").hide(),$("#apoModal .content #list-cartegie").html('<div style="display:flex;justify-content:center;align-items:center;font-size:18px;height: 180px;text-align: center;">Nous n\'avons pas trouvé les coordonnées de votre société, merci de les saisir manuellement</div>'),$("#apoModal .screen.coordonnees.active").removeClass("active"),$("#ao-cta,#ao-prev,.pub-ind").hide(),$("#apoModal .step-siret").show(),setTimeout((function(){$("#apoModal .content #list-cartegie").html(""),$("#apoModal .screen.coordonnees").addClass("active"),$("#ao-cta,#ao-prev,.pub-ind").show(),$("#apoModal .step-siret").hide()}),3e3))},error:function(e){$("#apoModal .backdrop-apo").hide(),$("#loading-final-step").hide()}})}}function webservice(e,t,a,i,r,n,o){$("#ao-id_cartegie_siret").val(e),t&&t.length>0&&a&&a.length>0&&$("#ao-pays-acheteur").parent().addClass("disabled"),$("#ao-societe-acheteur").val(t),t&&t.length>0&&$("#ao-societe-acheteur").addClass("readonly"),$("#ao-code-postal-acheteur").val(a),a&&a.length>0&&$("#ao-code-postal-acheteur").addClass("readonly"),$("#ao-ville-acheteur").val(r),r&&r.length>0&&$("#ao-ville-acheteur").addClass("readonly"),$("#ao-ville-acheteur").parent().removeClass("contains-error"),$("#ao-adresse-acheteur").val(i),$("#ao-recup_adresse").val(i)}function webservice_insee(e,t,a,i,r,n,o){""!=$.trim($("#apoModal .content").html())?($("#ao-id_siret_insee").val(e),t&&t.length>0&&a&&a.length>0&&$("#ao-pays-acheteur").parent().addClass("disabled"),$("#ao-societe-acheteur").val(t),t&&t.length>0&&$("#ao-societe-acheteur").addClass("readonly"),$("#ao-code-postal-acheteur").val(a),a&&a.length>0&&$("#ao-code-postal-acheteur").addClass("readonly"),ao_gerer_selection_ville(r),$("#ao-adresse-acheteur").val(i),$("#ao-recup_adresse").val(i),gerer_click_siretisation()):($("#ao-id_siret_insee-hpfr").val(e),t&&t.length>0&&a&&a.length>0&&$("#ao-pays-acheteur-hpfr").parent().addClass("disabled"),$("#ao-societe-acheteur-hpfr").val(t),t&&t.length>0&&$("#ao-societe-acheteur-hpfr").addClass("readonly"),$("#ao-code-postal-acheteur-hpfr").val(a),a&&a.length>0&&$("#ao-code-postal-acheteur-hpfr").addClass("readonly"),$('#ao-ville-fr .custom-option[data-value="'+$.trim(r)+'"]').length&&$('#ao-ville-fr .custom-option[data-value="'+$.trim(r)+'"]').trigger("click"),gerer_selection_ville(r),$("#ao-adresse-acheteur-hpfr").val(i),$("#ao-recup_adresse-hpfr").val(i),ao_attribution_hpfr(),hide_bloc_siretisation())}function webservice_none(e){""!=$.trim($("#apoModal .content").html())?(e&&e.preventDefault(),$("#ao-societe-acheteur").removeClass("readonly"),$("#ao-code-postal-acheteur").removeClass("readonly"),$("#modifier_cartegie").text("Nous n'avons pas trouvé les coordonnées de votre société, merci de les saisir manuellement"),$("#ao-id_cartegie_siret").val(""),$("#ao-id_siret_insee").val(""),$("#ao-societe-acheteur").focus(),$("#ao-recup_adresse").val(""),$("#ao-adresse-acheteur").val(""),gerer_click_siretisation()):(e&&e.preventDefault(),$("#ao-societe-acheteur-hpfr").removeClass("readonly"),$("#ao-code-postal-acheteur-hpfr").removeClass("readonly"),$("#modifier_cartegie").text("Nous n'avons pas trouvé les coordonnées de votre société, merci de les saisir manuellement"),$("#ao-id_cartegie_siret-hpfr").val(""),$("#ao-id_siret_insee-hpfr").val(""),$("#ao-societe-acheteur-hpfr").focus(),$("#ao-recup_adresse-hpfr").val(""),$("#ao-adresse-acheteur-hpfr").val(""),hide_bloc_siretisation())}function gerer_click_siretisation(){$("#apoModal .content #list-cartegie").html(""),$("#apoModal .step-siret").hide(),$("#ao-cta").show(),$("#ao-prev,.pub-ind").show(),$("#ao-siret").hide(),$("#apoModal .screen.coordonnees").addClass("active")}function ao_pre_check(){"undefined"!=typeof prechecked&&""!=prechecked.trim()&&prechecked.trim().split("_##_").forEach((function(e,i){$("#"+e).length&&$("#"+e).prop("checked",!0)})),"undefined"!=typeof reponse_autre&&""!=reponse_autre.trim()&&$(".screen:first-of-type .input-autre").length>0&&$(".screen:first-of-type .input-autre").val(reponse_autre).addClass("visible")}function afficher_popup_apo(scroll="",param_dip="",fp_coord="",souhait_prod_sim="",mail=""){var param=$("#x-tag-apo").val(),rand_n=Math.random(),ab=rand_n<.333?"":"ab_"+rand_n,file_popup="ajax_popup_appel_offre_v3",abtest_coordonnee_cookie=getCookie("_abtest_etape_coordonnee_");$.ajax({url:protocol+"//"+http_host+"/hellopro_fr/ajax/ajax_formulaire.php",type:"post",data:{param:param,scroll:scroll,param_dip:param_dip,fp_coord:fp_coord,souhait_prod_sim:souhait_prod_sim,mail:mail,ab:ab},dataType:"HTML",beforeSend:function(){$("#backdrop-apo").show(),$("#loading-popup-apo").html('<div><i class="loader loader-md font-color-orange"></i><span>Affichage en cours</span></div>'),$("#loading-popup-apo").show(),ao_gestion_overflow_body()},success:function(data){if($("#ao-cta").removeClass("btn-grise readonly"),$("#apoModal .bloc-popup-content").html(data),event_ga_ao_push("Popup_Appel_Offre","Affichage","Popup_AO_Affichage"),"popup"==form_abtest&&0==$(".screen.active").length&&activate_screen(2),$(".modal-wrapper").show(),$("#apoModal").addClass("show"),$("#loading-popup-apo").hide(200).html(""),init_formulaire(),init_filepond(),ao_init_select_custom(),ao_ek_upload(),"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo&&ao_pre_check(),lazyLoadImages(),$(".fst-question-sel").each((function(i,el){var id_s=$(el).attr("id").split("popup_");$(".popup-apo #"+id_s[1]).prop("checked",!0)})),$("#entry").addClass("popup-apo").removeClass("demandeinfopopup"),$(data).hasClass("apopopup")){let step_number=$(data).find("div.screen").length;STEP_NUMBER_DE_BASE_GTM=step_number;let active_screen=$(data).find(".screen.active"),step_index=$("#screen-container").find("div.screen").index(active_screen.get(0)),question_number=step_index+1,user_known=1==$("#ao-mail_acheteur_connu").val()?"Known":"Unknown",step_name,devis_plus="True";switch(is_begin=!1,page_referer_apo){case"feuille_fa":context="header pages feuilles","fa"==page_template_gtm&&(context="header pages fa");break;case"page_conseil":context="header pages conseils";break;case"fiche_produit":context="suggest pages produits"}if(1==scroll)switch(step_index=0,question_number=1,is_begin=!0,page_referer_apo){case"feuille_fa":context="auto pop pages feuilles"}if($("#from_input_categ").length&&$("#input_funnel_context_feuille_v2").length){var input_funnel_context_feuille_v2=$("#input_funnel_context_feuille_v2").val();""!=input_funnel_context_feuille_v2&&(context=input_funnel_context_feuille_v2)}if(context){if(active_screen.hasClass("message")){if(step_name="message-libre",$("#version_ao").length){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="message-libre-0";break;case"Msg_libre_V2":step_name="message-libre-2";break;case"Msg_libre_V3":step_name="message-libre-3";break;default:step_name="message-libre-0"}step_name="message-libre-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="message-libre-1")}}else if(active_screen.hasClass("coordonnees")){if(step_name="champ-mail",$("#version_ao").length){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="champ-mail-0";break;case"Msg_libre_V2":step_name="champ-mail-2";break;case"Msg_libre_V3":step_name="champ-mail-3";break;default:step_name="champ-mail-0"}step_name="champ-mail-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="champ-mail-1")}if(active_screen.find("div.input-parent:not(.email-container):visible").length&&(step_name="champ-coordonnees",$("#version_ao").length)){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="champ-coordonnees-0";break;case"Msg_libre_V2":step_name="champ-coordonnees-2";break;case"Msg_libre_V3":step_name="champ-coordonnees-3";break;default:step_name="champ-coordonnees-0"}step_name="champ-coordonnees-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="champ-coordonnees-1")}}else(active_screen.find(".group-input.radio").length||active_screen.find(".group-input.checkbox").length||active_screen.find(".upload-fichier").length||active_screen.find(".group-input.csimple").length)&&(step_name=`${question_number}eme-question`,1==question_number&&(step_name=`${question_number}ere-question`));"pro_part_screen"==active_screen.attr("id")&&(step_name="choix-propart"),console.log(step_name),step_name&&event_ga_ao_quote_form_funnel_push(step_index,step_name,STEP_NUMBER_DE_BASE_GTM,devis_plus,context,user_known,category5)}}if(actu_ao_prev(),initialiser_critere_conditionnel(),"object"==typeof cookie_redir_di_ao){if("object"==typeof cookie_redir_di_ao.a){var cookie_critere_ao=cookie_redir_di_ao.a,message_acheteur_c=cookie_critere_ao.com,mail_acheteur_c=cookie_critere_ao.m,id_acheteur_c=cookie_critere_ao.id,critere_acheteur_c=cookie_critere_ao.crit;$("#ao-input-mail-acheteur").val(mail_acheteur_c).blur(),$("#ao-message-acheteur").val(message_acheteur_c);var tab_critere=critere_acheteur_c;$.each(tab_critere.choix,(function(index,value){"on"==value?$("#r_"+index).prop("checked",!0):($("#r_"+index).prop("checked",!0),$("#r_"+index).siblings(".input-autre").val(value))})),$.each(tab_critere.input,(function(index,value){$("#r_"+index).val(value)}))}cookie_redir_di_ao=""}$(".bandeau_cookie").length&&!$(".bandeau_cookie").is(":hidden")&&$(".bandeau_cookie").hide()},error:function(e){console.log(e)}})}function activate_screen(number){$(".screen.active").removeClass("active"),$(".screen:nth-of-type("+number+")").addClass("active")}function actu_ao_prev(){var index_active;$slider.slick("slickCurrentSlide")?$("#ao-form #ao-prev").show():$("#ao-form #ao-prev").hide()}function gerer_pub_modal(){$("#delai-rep-frns").remove(),$(".btn-group-ao .pub-ind").show()}function ao_gerer_selection_ville(nom_ville){$("#ao-ville-acheteur").attr("data-selected",nom_ville),$("#ao-ville-acheteur option:not(.disabled)").remove(),$("#ao-ville-acheteur").append('<option class="selection" value="'+nom_ville+'" selected>'+nom_ville+"</option>"),$("#ao-ville-acheteur + .select-custom .custom-options .custom-option:not(.disabled)").remove(),$("#ao-ville-acheteur + .select-custom .custom-select-trigger").text(nom_ville),$("#ao-ville-acheteur + .select-custom .custom-options").append('<span class="custom-option selection" data-value="'+nom_ville+'">'+nom_ville+"</span>"),$("#ville-fr").show()}function traite_gtm_quote_form_funnel(has_next_screen,begin=!0,is_prev=!1){let step_index,step_number,step_name,step_type,user_known=1==$("#ao-mail_acheteur_connu").val()?"Known":"Unknown",devis_plus="True";if($("#entry").hasClass("demandeinfopopup")){step_number=3;let produitSimilaireVersion=getCookie("_ab_version_tcta2_"),isVersionOriginal=Boolean(-1===$.inArray(produitSimilaireVersion,["produit-similaire-1","produit-similaire-2"])),isPageProduit=Boolean("undefined"!=typeof page_template_gtm&&"product"==page_template_gtm);switch(isVersionOriginal=!1,!isVersionOriginal&&isPageProduit&&(step_number=4),page_referer_apo){case"feuille_fa":context="cta devis pages feuilles","fa"==page_template_gtm&&(context="cta devis pages fa");break;case"page_conseil":context="cta devis pages conseils";break;case"fiche_produit":context="form pages produits"}if(context){if(devis_plus=1==$('input[name="souhait_devis_prod_sim"]:checked').val()?"True":"False","Known"==user_known&&(step_number=2,!isVersionOriginal&&isPageProduit&&(step_number=3)),$(".screen.active").hasClass("coordonnees")&&has_next_screen){if(step_index=1,step_name="champ-coordonnees",$("#version_ao").length)switch($("#version_ao").val()){case"Msg_libre_V0":step_name="champ-coordonnees-0";break;case"Msg_libre_V2":step_name="champ-coordonnees-2";break;case"Msg_libre_V3":step_name="champ-coordonnees-3";break;default:step_name="champ-coordonnees-0"}$("#rep2_prod_sim").prop("checked")&&(step_number=2)}else if($(".screen.active").hasClass("produits-similaires")&&has_next_screen)step_index=2,"Known"==user_known&&(step_index=1),step_name="produit-similaire";else if($(".screen.active").hasClass("screen-last")&&has_next_screen)step_index=2,!isVersionOriginal&&isPageProduit&&(step_index=3),"Known"==user_known&&(step_index=1,!isVersionOriginal&&isPageProduit&&(step_index=2)),step_name="toutes-questions";else if(!has_next_screen&&(step_index=3,!isVersionOriginal&&isPageProduit&&(step_index=4),"Known"==user_known?(step_index=2,!isVersionOriginal&&isPageProduit&&(step_index=3),$(".screen.coordonnees").hasClass("skip")&&$("#rep2_prod_sim").prop("checked")&&(step_index=step_number=1,!isVersionOriginal&&isPageProduit&&(step_index=step_number=2))):$("#rep2_prod_sim").prop("checked")&&(step_index=step_number=2,!isVersionOriginal&&isPageProduit&&(step_index=step_number=3)),step_name="page-remerciement",step_type="page-remerciement",$("#version_ao").length)){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="page-remerciement-0";break;case"Msg_libre_V2":step_name="page-remerciement-2";break;case"Msg_libre_V3":step_name="page-remerciement-3";break;default:step_name="page-remerciement-0"}step_name="page-remerciement-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="page-remerciement-1")}0!=step_index||is_prev||(STEP_NUMBER_DE_BASE_GTM=step_number);var screenActiveElement,dataTypeqValue="autres",elementWithTypeq;if(screenActiveElement=document.querySelector(".screen.active"))(elementWithTypeq=screenActiveElement.querySelector("[data-typeq]"))&&(dataTypeqValue=elementWithTypeq.getAttribute("data-typeq")),"screen-ab"==screenActiveElement.getAttribute("id")?dataTypeqValue="message-libre":"email-step"==screenActiveElement.getAttribute("id")&&(dataTypeqValue="champ-mail");if("1ere-question"==step_name&&"autres"==dataTypeqValue?dataTypeqValue="1ere-question":"2eme-question"==step_name&&"autres"==dataTypeqValue&&(dataTypeqValue="2eme-question"),step_name&&has_next_screen)if(/mca\.hellopro\.fr/.test(window.location.hostname)){let YN_MCF_societe_id;"undefined"!=typeof gtm_page_load?YN_MCF_societe_id=gtm_page_load.YN_MCF_societe_id:"undefined"!=typeof gtm_page_load_spa&&(YN_MCF_societe_id=gtm_page_load_spa.YN_MCF_societe_id);let quoteFormFunnelPush=generateQuoteFormFunnelMCAPush({step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,YN_MCF_societe_id:YN_MCF_societe_id,funnel_context:context,product_category:category5});event_datalayer_push(quoteFormFunnelPush)}else event_ga_ao_quote_form_funnel_push(step_index,step_name,STEP_NUMBER_DE_BASE_GTM,devis_plus,context,user_known,category5,"originale",dataTypeqValue);if(!has_next_screen){let data_to_add={};if(/mca\.hellopro\.fr/.test(window.location.hostname)){let YN_MCF_societe_id;"undefined"!=typeof gtm_page_load?YN_MCF_societe_id=gtm_page_load.YN_MCF_societe_id:"undefined"!=typeof gtm_page_load_spa&&(YN_MCF_societe_id=gtm_page_load_spa.YN_MCF_societe_id),data_to_add=generateQuoteFormFunnelMCAPush({step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,YN_MCF_societe_id:YN_MCF_societe_id,funnel_context:context,product_category:category5})}else data_to_add={event:"quote_form_funnel",step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,funnel_devisplus:devis_plus,funnel_context:context,user_known_status:user_known,product_category5:category5,step_type:dataTypeqValue};isPageProduit&&""!=produitSimilaireVersion&&(data_to_add.abtest=produitSimilaireVersion),submit_form_with_gtm_data($("#ao-form"),data_to_add)}}}else if($("#entry").hasClass("popup-apo")&&$("#entry").is(":visible")){let container=$("#screen-container"),active_screen=container.find(".screen.active");step_number=container.find("div.screen").length,STEP_NUMBER_DE_BASE_GTM=step_number,step_index=container.find("div.screen").index(active_screen.get(0));let question_number=step_index+1;if("auto pop pages feuilles"!=context)switch(page_referer_apo){case"feuille_fa":context="header pages feuilles","fa"==page_template_gtm&&(context="header pages fa");break;case"page_conseil":context="header pages conseils";break;case"fiche_produit":context="suggest pages produits"}var dataTypeqValue=null;if(context){if(active_screen.hasClass("message")&&has_next_screen){if(step_name="message-libre",$("#version_ao").length){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="message-libre-0";break;case"Msg_libre_V2":step_name="message-libre-2";break;case"Msg_libre_V3":step_name="message-libre-3";break;default:step_name="message-libre-0"}step_name="message-libre-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="message-libre-1")}}else if(active_screen.hasClass("coordonnees")&&has_next_screen){if(step_name="champ-mail",$("#version_ao").length){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="champ-mail-0";break;case"Msg_libre_V2":step_name="champ-mail-2";break;case"Msg_libre_V3":step_name="champ-mail-3";break;default:step_name="champ-mail-0"}step_name="champ-mail-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="champ-mail-1")}if(active_screen.find("div.input-parent:not(.email-container):visible").length&&(step_name="champ-coordonnees",$("#version_ao").length)){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="champ-coordonnees-0";break;case"Msg_libre_V2":step_name="champ-coordonnees-2";break;case"Msg_libre_V3":step_name="champ-coordonnees-3";break;default:step_name="champ-coordonnees-0"}step_name="champ-coordonnees-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="champ-coordonnees-1")}}else if(has_next_screen&&(active_screen.find(".group-input.radio").length||active_screen.find(".group-input.checkbox").length||active_screen.find(".upload-fichier").length||active_screen.find(".group-input.csimple").length))step_name=`${question_number}eme-question`,dataTypeqValue=`${question_number}eme-question`,1==question_number&&(step_name=`${question_number}ere-question`,dataTypeqValue=`${question_number}ere-question`);else if(!has_next_screen&&(step_index=step_number,step_name="page-remerciement",$("#version_ao").length)){switch($("#version_ao").val()){case"Msg_libre_V0":step_name="page-remerciement-0";break;case"Msg_libre_V2":step_name="page-remerciement-2";break;case"Msg_libre_V3":step_name="page-remerciement-3";break;default:step_name="page-remerciement-0"}step_name="page-remerciement-0","etape_coordonne_v1"==$("#version_ao").val()&&(step_name="page-remerciement-1")}var screenActiveElement,elementWithTypeq;if(screenActiveElement=document.querySelector(".screen.active"))(elementWithTypeq=screenActiveElement.querySelector("[data-typeq]"))&&"autres"!=elementWithTypeq.getAttribute("data-typeq")&&(dataTypeqValue=elementWithTypeq.getAttribute("data-typeq")),"screen-ab"==screenActiveElement.getAttribute("id")?dataTypeqValue="message-libre":"email-step"==screenActiveElement.getAttribute("id")&&(dataTypeqValue="champ-mail");if(step_name&&has_next_screen)if(/mca\.hellopro\.fr/.test(window.location.hostname)){let YN_MCF_societe_id;"undefined"!=typeof gtm_page_load?YN_MCF_societe_id=gtm_page_load.YN_MCF_societe_id:"undefined"!=typeof gtm_page_load_spa&&(YN_MCF_societe_id=gtm_page_load_spa.YN_MCF_societe_id);let quoteFormFunnelPush=generateQuoteFormFunnelMCAPush({step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,YN_MCF_societe_id:YN_MCF_societe_id,funnel_context:context,product_category:category5});event_datalayer_push(quoteFormFunnelPush)}else event_ga_ao_quote_form_funnel_push(step_index,step_name,STEP_NUMBER_DE_BASE_GTM,devis_plus,context,user_known,category5,"originale",dataTypeqValue);if(has_next_screen&&"pro_part_screen"==active_screen.attr("id")&&event_ga_ao_quote_form_funnel_push(step_index,"choix-propart",STEP_NUMBER_DE_BASE_GTM,devis_plus,context,user_known,category5,"originale",dataTypeqValue),!has_next_screen){let data_to_add={};if(/mca\.hellopro\.fr/.test(window.location.hostname)){let YN_MCF_societe_id;"undefined"!=typeof gtm_page_load?YN_MCF_societe_id=gtm_page_load.YN_MCF_societe_id:"undefined"!=typeof gtm_page_load_spa&&(YN_MCF_societe_id=gtm_page_load_spa.YN_MCF_societe_id),data_to_add=generateQuoteFormFunnelMCAPush({step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,YN_MCF_societe_id:YN_MCF_societe_id,funnel_context:context,product_category:category5})}else data_to_add={event:"quote_form_funnel",step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,funnel_devisplus:devis_plus,funnel_context:context,user_known_status:user_known,product_category5:category5,step_type:dataTypeqValue};submit_form_with_gtm_data($("#ao-form"),data_to_add)}}}has_next_screen||$("#ao-form").trigger("submit")}function submit_form_with_gtm_data(form,data){$.each(data,(function(attribute,value){$("<input />").attr("type","hidden").attr("name",attribute).attr("value",value).appendTo(form)}))}function est_question_matching(elem){return 1==$(elem).parents(".info-group").attr("data-matching")}function initialiser_critere_conditionnel(){var tab_cible_afficher=[];$(".is_conditionnel:not(.custom-option)").each((function(i,el){var cible=$(this).attr("data-cible"),effet=$(this).attr("data-effet"),tab_cible=cible.split(","),el_source=el;tab_cible.forEach((function(elem){var is_reponse=!1,is_question=!1;if(/r_/.test(elem)?is_reponse=!0:is_question=!0,!$(el_source).find(".choix_reponse").prop("checked")||$(el_source).hasClass("option")){if("show"==effet){if($(el_source).hasClass("option")&&$(el_source).hasClass("init_condition")||tab_cible_afficher.includes(elem))return;is_question&&$("#"+elem).parents(".screen").addClass("skip"),is_reponse&&$("#"+elem).addClass("d-none")}}else $(el_source).find(".choix_reponse").prop("checked")&&is_question&&($("#"+elem).parents(".screen").removeClass("skip"),$(".screen").removeClass("active"),$("#"+elem).parents(".screen").addClass("active"),tab_cible_afficher.push(elem))}))})),gerer_active_screen_on_load()}function initialiser_critere_conditionnel_tt_question(){var el_to_trait;$(".ab_test_question1 .info-group").each((function(i,el){ao_is_type_radio(el)?$(this).find(".choix_reponse:checked").length&&$(this).find(".choix_reponse:checked").each((function(i,el){if($(this).parent("div").hasClass("is_conditionnel")){var data_cible_ab_test=$(this).parent("div").attr("data-cible");$("#"+data_cible_ab_test).parent("div").removeClass("d-none"),$("#"+data_cible_ab_test).parent("div").addClass("active"),$(this).parent("div").siblings(".is_conditionnel").length&&$(this).parent("div").siblings(".is_conditionnel").each((function(i,el){var data_cible_ab_test_sibling=$(this).attr("data-cible");$("#"+data_cible_ab_test_sibling).parent("div").removeClass("active"),$("#"+data_cible_ab_test_sibling).parent("div").addClass("d-none")}))}else $(this).parent("div").parent("div").find(".is_conditionnel").each((function(i,el){var data_cible_ab_test=$(this).attr("data-cible");$("#"+data_cible_ab_test).parent("div").removeClass("active"),$("#"+data_cible_ab_test).parent("div").addClass("d-none")}))})):ao_is_type_checkbox(el)&&$(this).find(".choix_reponse:checked").length&&$(this).find(".choix_reponse:checked").each((function(i,el){if($(el).parents(".is_conditionnel").length){var cible=$(el).parent().attr("data-cible");$(el).prop("checked")?$("#"+cible).parent().removeClass("d-none").addClass("active"):$("#"+cible).parent().addClass("d-none").removeClass("active")}}))}))}function gerer_active_screen_on_load(){var add_active=!1;$(".screen:nth-of-type(1)").hasClass("active")||$(".screen:not(.screen:nth-of-type(1))").each((function(i,el){if(!$(this).hasClass("skip")&&!add_active)return $(".screen").removeClass("active"),$(this).addClass("active"),void(add_active=!0)}))}function has_siblings_conditionnel(class_cible){return $(".screen.active").find("."+class_cible).hasClass("is_conditionnel")}function ao_construire_tab_matching_critere(type_return="0"){var object_critere={},el_to_trait='.info-group[data-matching="1"]';if(2==type_return&&(el_to_trait='.info-group[data-matching="1"],.info-group[data-matching="0"]'),$(el_to_trait).each((function(i,el){var id_question=$(this).attr("id").split("_")[1];if(ao_is_type_radio(el))$(this).find(".choix_reponse:checked").length&&(object_critere[id_question]=[],$(this).find(".choix_reponse:checked").each((function(i,el){var id_reponse=$(this).attr("id").split("_")[1];object_critere[id_question].push(id_reponse)})));else if(ao_is_type_checkbox(el))$(this).find(".choix_reponse:checked").length&&(object_critere[id_question]=[],$(this).find(".choix_reponse:checked").each((function(i,el){var id_reponse=$(this).attr("id").split("_")[1];object_critere[id_question].push(id_reponse)})));else if(ao_is_type_select(el)){var id_reponse;"0"!=(id_reponse=$(this).find("select.liste_custom").attr("data-selected"))&&(object_critere[id_question]=[id_reponse])}else if(ao_is_type_input(el)){var val_entered=$(this).find(".group-input>input").val(),id_reponse=$(this).attr("id").split("_")[1];""==$.trim(val_entered)&&(object_critere[id_question]=[id_reponse])}})),Object.keys(object_critere).length){var critere_matching=JSON.stringify(object_critere);if(1==type_return||2==type_return)return critere_matching;$("#ao-info_critere_matching").val(critere_matching)}}function ao_construire_tab_matching_acheteur(type_return="0",type_lead="apo"){var object_info_acheteur={};object_info_acheteur.type_lead=type_lead,object_info_acheteur.id_rubrique=$("#ao-id_rubrique").val(),$("#ao-mail_acheteur_connu")||$("#ao-id_acheteur").val(""),object_info_acheteur.id_acheteur=$("#ao-id_acheteur").val(),object_info_acheteur.naf_acheteur=$("#ao-code_naf").val(),object_info_acheteur.cp=$("#ao-code-postal-acheteur").val(),object_info_acheteur.pays=$("#ao-pays-acheteur").val(),object_info_acheteur.typologie=$(".statut-ach-container .prof_part.real_input:checked").val(),object_info_acheteur.nom_commercial=$('input[name="societe-acheteur"]').val(),object_info_acheteur.mail_acheteur=$('input[name="mail-acheteur"]').val();var info_acheteur=JSON.stringify(object_info_acheteur);if(1==type_return||2==type_return)return info_acheteur;$("#ao-info_acheteur_matching").val(info_acheteur)}function ao_is_type_radio(elem){return"radio"==$(elem).find(".choix_reponse").attr("type")}function ao_is_type_checkbox(elem){return"checkbox"==$(elem).find(".choix_reponse").attr("type")}function ao_is_type_input(elem){var type=$(elem).find(".group-input>input").attr("type");return"text"==type||"number"==type}function ao_is_type_select(elem){return $(elem).find("select.liste_custom").length}function ao_remplir_select_form(){$(".liste_custom").each((function(i,el){var id=$(this).attr("id"),data_selected=$(this).attr("data-selected"),ordre_question,name_input="reponses["+$(this).attr("data-ordre")+"][liste]["+data_selected+"]";"0"!=data_selected?$(".input_liste_"+id).attr("name",name_input):$(".input_liste_"+id).attr("name","")}))}function ao_afficher_cible(tab_cible,effet){tab_cible.forEach((function(elem){var is_reponse=!1,is_question=!1;/r_/.test(elem)?is_reponse=!0:is_question=!0,"show"==effet?(is_question&&($("#"+elem).parents(".screen").removeClass("skip"),$("#"+elem).parents(".info-group.d-none").removeClass("d-none")),is_reponse&&$("#"+elem).removeClass("d-none")):(is_question&&($("#"+elem).parents(".screen").addClass("skip"),$("#"+elem).parents(".info-group").addClass("d-none")),is_reponse&&$("#"+elem).addClass("d-none"))}))}function ao_cacher_cible(tab_cible,effet){tab_cible.forEach((function(elem){var is_reponse=!1,is_question=!1;/r_/.test(elem)?is_reponse=!0:is_question=!0,"show"==effet?(is_question&&($("#"+elem).parents(".screen").addClass("skip"),$("#"+elem).parents(".info-group").addClass("d-none"),$("#"+elem).find(".choix_reponse").prop("checked",!1).parents(".group-input").removeClass("checked")),is_reponse&&$("#"+elem).addClass("d-none")):(is_question&&($("#"+elem).parents(".screen").removeClass("skip"),$("#"+elem).parents(".info-group").removeClass("d-none")),is_reponse&&$("#"+elem).removeClass("d-none"))}))}function construire_name_input_autre(){$(".group-input.checked .choix_reponse.has-autre").each((function(i,el){var val_input=$(this).parents(".group-input").find(".input-autre").val(),attr_name=$(this).attr("name");""!=$.trim(val_input)&&$(this).parents(".group-input").find(".input-autre").attr("name",attr_name)}))}function show_toast(content,type){$.toast().reset("all");let options={text:content,textAlign:"center",loader:!1,hideAfter:5e3,showHideTransition:"move",allowToastClose:!1,position:"bottom-center-hp"};"success"==type?options.bgColor="#05A47A":"error"==type&&(options.bgColor="#EA1F38"),$.toast(options)}function init_formulaire(){($slider=$(".questions-container")).slick({infinite:!1,slidesToShow:1,slidesToScroll:1,arrows:!1,draggable:!1,adaptiveHeight:!0,swipe:!1,speed:0});var init_slide=$(".question-wrapper.screen.active").parents(".slick-slide").data("slick-index");$slider.slick("slickGoTo",init_slide),update_step(init_slide,"#apoModal"),$("#ao-cta").off("click").click((function(){if($(this).hasClass("btn-disabled"))return!1;let that=this;const url=new URL(window.location.href),params=new URLSearchParams(url.search);var qualif_ia=!1,type_ai=1;if(params.has("ai")&&"1"===params.get("ai")&&$("#diia").length>0&&(qualif_ia=!0),null!==params.get("type")&&(type_ai=params.get("type")),screen_active=$(".screen.active"),screen_active.hasClass("coordonnees")&&!verif_mail_valide())return $("input#ao-input-mail-acheteur").addClass("error"),$("input#ao-input-mail-acheteur").parent().addClass("contains-error"),$("#ao-cta").addClass("disable"),$("#ao-input-mail-acheteur").removeClass("valid-email"),$("#emailFeedback").removeClass("d-none-important"),$("#ao-cta").on("click",disable_click),console.log("Called from line 2582"),!1;if(!verif_mail_acheteur())return!1;var ok=ao_verif_contrainte(screen_active);if("final-step"==screen_active.attr("id")?$(".hp-modal-dialog .hp-modal-close").hide():$(".hp-modal-dialog .hp-modal-close").show(),$(".screen.active").hasClass("message")&&($("#ao-message-acheteur").val().length<40&&($(".textarea-alert-inner").css("animation","shake 0.8s"),$(".textarea-alert-inner").show()&&setTimeout(()=>$(".textarea-alert-inner").is(":visible")&&scrollToEl(".textarea-alert-inner"),0),setTimeout((function(){$(".textarea-alert-inner").css("animation","none")}),800)),$slider.slick("setPosition")),ok){if("email-step"==screen_active.attr("id")&&$("#input_pro_france").length&&$("#input_pro_france").click(),"screen-ab"==screen_active.attr("id")&&qualif_ia&&0==$("#msg-writ").length){var newDiv=$("<div>",{id:"screen-msg-att",class:"screen",style:"margin-bottom:30px"}).html('<h3  id="titre-msg-writ" style="margin-top:20px;margin-bottom:30px">Nous personnalisons votre expérience ! <img src="/images/deal-agreement.jpg" width="40" ></h3><div id="charg-icone" style="margin-bottom:20px;text-align:center"><i class="loader loader-md font-color-orange"></i></div><div id="msg-writ" style="min-height:250px">Votre demande est unique, et nous sommes en train de peaufiner les détails pour vous assurer une correspondance parfaite avec nos meilleures offres de fournisseurs. Ce processus peut prendre quelques instants, mais c\'est une étape essentielle pour vous apporter des solutions sur mesure qui répondent précisément à vos besoins. Restez avec nous, une expérience personnalisée vous attend !</div>');1==type_ai?$("#screen-ab").after(newDiv):$("#final-step").after(newDiv);var messageText=$("#msg-writ").text();$("#msg-writ").html(""),typeWriter("#msg-writ",messageText,0,(function(){})),construire_name_input_autre();var d=$("#ao-form").serialize(),quest_qualif=$.ajax({type:"POST",url:window.location.protocol+"//"+window.location.hostname+"/fichiers_communs_bo_front/hellopro_fr/qualif_ia/qualif_a.php",data:d,success:function(r){$("#charg-icone").remove(),$("#titre-msg-writ").html('Peaufinez votre demande pour une correspondance parfaite avec les Offres ! <img src="/images/deal-agreement.jpg" width="40" >'),stopAnimation(),$("#msg-writ").html(r)}})}var messageText,code_naf_ia,l_code_naf_ia;if("final-step"==screen_active.attr("id")&&qualif_ia&&$("#screen-msg-att").length>0&&1!=type_ai)if(-1!=(messageText=$("#msg-writ").text()).indexOf("Votre demande est unique")&&($("#msg-writ").html(""),typeWriter("#msg-writ",messageText,0,(function(){}))),3==type_ai)if($("#ao-code_naf").val().length>4){$("#titre-msg-writ").html('Nous personnalisons votre expérience ! <img src="/images/deal-agreement.jpg" width="40" >'),$("#titre-msg-writ").after('<div id="charg-icone" style="margin-bottom:20px;text-align:center"><i class="loader loader-md font-color-orange"></i></div>'),animationInProgress=!0,$("#msg-writ").html("Votre demande est unique, et nous sommes en train de peaufiner les détails pour vous assurer une correspondance parfaite avec nos meilleures offres de fournisseurs. Ce processus peut prendre quelques instants, mais c'est une étape essentielle pour vous apporter des solutions sur mesure qui répondent précisément à vos besoins. Restez avec nous, une expérience personnalisée vous attend !");var messageText=$("#msg-writ").text();$("#msg-writ").html(""),typeWriter("#msg-writ",messageText,0,(function(){}));var d=$("#ao-form").serialize(),quest_qualif=$.ajax({type:"POST",url:window.location.protocol+"//"+window.location.hostname+"/fichiers_communs_bo_front/hellopro_fr/qualif_ia/qualif_a.php",data:d,success:function(r){$("#charg-icone").remove(),animationInProgress=!1,$("#titre-msg-writ").html('Peaufinez votre demande pour une correspondance parfaite avec les Offres ! <img src="/images/deal-agreement.jpg" width="40" >'),$("#msg-writ").html(r)}})}var currentSlide=$slider.slick("slickCurrentSlide"),isValid;if(validateStep(currentSlide)){handle_conditionnnel();var nextSlide=ao_getNextSlide(currentSlide);if(nextSlide){var has_next_screen=ao_change_screen("next",nextSlide);gerer_pub_modal()}else $(that).removeAttr("id"),$(that).on("click",disable_click),$(that).addClass("btn-disabled"),ao_construire_tab_matching_acheteur(),ao_construire_tab_matching_critere(),ao_remplir_select_form(),construire_name_input_autre(),ao_attribution(),traite_gtm_quote_form_funnel(nextSlide,is_begin)}}else ao_scroll_to_top()})),$("#ao-prev").off("click").click((function(){if($("#ao-cta").off("click",disable_click),$("#ao-cta").removeClass("btn-disabled"),screen_active=$(".screen.active"),"final-step"==screen_active.attr("id")?$(".hp-modal-dialog .hp-modal-close").hide():$(".hp-modal-dialog .hp-modal-close").show(),screen_active.hasClass("coordonnees")&&screen_active.find("div.input-parent:not(.email-container):visible").length&&"etape_coordonne_v1"!=$("#version_ao").val())return $(".input-parent.email-container").siblings("label").show(),$(".input-parent.email-container").addClass("mt-4").removeClass("mt-24").find("label").addClass("d-none"),$(".badge-confidentialite").show(),$(".input-parent:not(.email-container)").hide(),$("#ao-cta").off("click",disable_click),console.log("Called from line 2768"),$("#ao-input-mail-acheteur").removeClass("disable"),!1;var currentSlide=$slider.slick("slickCurrentSlide"),prevSlide;handle_conditionnnel(),ao_change_screen("prev",ao_getPreviousSlide(currentSlide)),gerer_pub_modal()})),$slider.off("beforeChange").on("beforeChange",(function(event,slick,currentSlide,nextSlide){update_step(nextSlide,"#apoModal")})),$slider.off("afterChange").on("afterChange",(function(event,slick,currentSlide,nextSlide){afterChangeActions()})),$(document).off("click","#apoModal .slick-slide",ajustModalHeight).on("click","#apoModal .slick-slide",ajustModalHeight);var observer=new MutationObserver((function(mutationsList,observer){$slider.slick("setPosition")})),observerConfig={attributes:!0,childList:!0,subtree:!0};$slider.find(".slick-slide").each((function(){observer.observe(this,observerConfig)}))}function ajustModalHeight(){null!=$slider&&$slider.slick("setPosition")}function validateStep(stepIndex){return!0}function ao_getNextSlide(currentIndex){var nextIndex=currentIndex+1;do{if(slide=$slider.slick("getSlick").$slides.eq(nextIndex),toskip=$(slide).find(".question-wrapper.skip").length>0,!toskip&&slide.length)return nextIndex;nextIndex++}while(nextIndex<$slider.slick("getSlick").slideCount);return!1}function ao_getPreviousSlide(currentIndex){var prevIndex=currentIndex-1;do{if(slide=$slider.slick("getSlick").$slides.eq(prevIndex),toskip=$(slide).find(".question-wrapper.skip").length>0,!toskip)return prevIndex;prevIndex--}while(prevIndex>-1);return prevIndex}function update_step(nextSlide,parentSelector){var current_slide=nextSlide+1,prev_max_step=0,activate_step=null;$(parentSelector+" .step-wrapper-form .step-item").removeClass("step-item-active"),$(parentSelector+" .step-item").each((function(){var step_type=$(this).data("step").replace("step-",""),step_number=$(parentSelector+" .question-wrapper."+step_type).length,default_step_done=1,max_step=step_number;if(current_slide>prev_max_step&&current_slide<=prev_max_step+max_step)$(this).find(".step-item-loader-inner").css("width",100*(current_slide-prev_max_step)/max_step+"%"),activate_step=this,default_step_done=current_slide-prev_max_step;else{if(per=0,current_slide>prev_max_step){var per=100;default_step_done=step_number}$(this).find(".step-item-loader-inner").css("width",per+"%")}prev_max_step+=max_step,$(this).find(".step-item-text span").html(default_step_done+"/"+step_number)})),$(activate_step).addClass("step-item-active"),$(parentSelector+" .step-item-text-mobile").html($(parentSelector+" .step-item.step-item-active .step-item-text").html())}function verif_mail_valide(){var m=document.querySelector("input#ao-input-mail-acheteur").value.trim();return/^([a-zA-Z0-9]+(([\.\-\_]?[a-zA-Z0-9+]+)+)?)\@(([a-zA-Z0-9+]+[\.\-\_])+[a-zA-Z]{2,8})$/.test(m)}function bloquer_envoi_formulaire(){return!!$("#dbl_di").length}var http_host=window.location.hostname,protocol=window.location.protocol,animationInProgress=!0;if(http_host.includes("conseils.hellopro")&&(http_host=http_host.replace("conseils.","www."),protocol="https:"),void 0===STEP_NUMBER_DE_BASE_GTM)var STEP_NUMBER_DE_BASE_GTM=0;if(void 0===ab_google_ads)var ab_google_ads=null;var $slider=null,pond=null,ajax_siretisation,ajax_recup_ville,ajax_matching,backup_bloc_depile,is_scroll_down=!1,is_apo_shown=!1,event_handler={handleEvent:event=>event.type,radio_event:event=>{"quantite"==event.target.getAttribute("name")?ao_save_info_acheteur("qtte",$('input[name="quantite"]:checked').val()):ao_save_info_acheteur("_critere_")},checkbox_event:event=>{ao_save_info_acheteur("_critere_")}},telMask,maskOptions={lazy:!0,definitions:{"#":/[1-9]/}},template_tel_top={1:{id:1,nom_pays:"France",indicatif:"+33",exemple_num_mobile:"6 12 34 56 78",mask:"# 00 00 00 00",regex_verif:/^\d\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},4:{id:4,nom_pays:"Belgique",indicatif:"+32",exemple_num_mobile:"212 12 34 56",mask:"000 00 00 00",regex_verif:/^\d{3}\s\d{2}\s\d{2}\s\d{2}$/},353:{id:353,nom_pays:"Maroc",indicatif:"+212",exemple_num_mobile:"6 50 12 34 56",mask:"0 00 00 00 00",regex_verif:/^\d{1}\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},224:{id:224,nom_pays:"Algerie",indicatif:"+213",exemple_num_mobile:"0551 23 45 67",mask:"0000 00 00 00",regex_verif:/^\d{4}\s\d{2}\s\d{2}\s\d{2}$/},439:{id:439,nom_pays:"Tunisie",indicatif:"+216",exemple_num_mobile:"20 123 456",mask:"00 000 000",regex_verif:/^\d{2}\s\d{3}\s\d{3}$/},28:{id:28,nom_pays:"Suisse",indicatif:"+41",exemple_num_mobile:"78 123 45 67",mask:"00 000 00 00",regex_verif:/^\d{2}\s\d{3}\s\d{2}\s\d{2}$/},12:{id:12,nom_pays:"Canada",indicatif:"+1",exemple_num_mobile:"506 234 5678",mask:"000 000 0000",regex_verif:/^\d{3}\s\d{3}\s\d{4}$/},275:{id:275,nom_pays:"Cote d'ivoire",indicatif:"+225",exemple_num_mobile:"01 23 45 67 89",mask:"00 00 00 00 00",regex_verif:/^\d{2}\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/},399:{id:399,nom_pays:"Reunion",indicatif:"+262",exemple_num_mobile:"692 12 34 56",mask:"000 00 00 00",regex_verif:/^\d{3}\s\d{2}\s\d{2}\s\d{2}$/},260:{id:260,nom_pays:"Cameroun",indicatif:"+237",exemple_num_mobile:"6 71 23 45 67",mask:"0 00 00 00 00",regex_verif:/^\d\s\d{2}\s\d{2}\s\d{2}\s\d{2}$/}},ajax_envoi_demande;$((function(){"undefined"==typeof form_abtest&&(form_abtest=null),focus_scrollToTop();var reponse_autre=null;target_msg="#ao-message-acheteur",$("body").on("paste",target_msg,(function(event){var restant=ao_gestionCaractereRestant(target_msg),curval=$(target_msg).val(),paste=(event.originalEvent.clipboardData||window.clipboardData).getData("text");$(target_msg).val(curval+paste.substr(0,restant).trim()),ao_gestionCaractereRestant(target_msg),event.preventDefault()})),$(document).on("keydown",target_msg,(function(event){var keycode,ret=[8,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(parseInt(event.which)),remaining;if(event.ctrlKey||"-1"!=ret)$(target_msg).removeClass("in-error");else if(!ao_gestionCaractereRestant(target_msg))return void event.preventDefault()})),$(document).on("keyup",target_msg,(function(event){ao_gestionCaractereRestant(target_msg)})),$(document).on("focus",target_msg,(function(event){ao_gestionCaractereRestant(target_msg)})),$(document).on("blur",target_msg,(function(event){ao_gestionCaractereRestant(target_msg)})),$(document).on("click",target_msg,(function(event){ao_gestionCaractereRestant(target_msg)})),$(document).on("input","[name=budget_di]",(function(){""!=$(this).val()&&$("#reponse_autre_question-3-1").click()})),$(document).on("click","#reponse_autre_question-3-2",(function(){$("[name=budget_di]").val("")})),$(document).on("change","#apoModal .choix_reponse ",(function(){if($(this).hasClass("has-autre")&&$(this).prop("checked")){var val_name=$(this).attr("name");$(this).parent().find(".input-autre").addClass("visible").focus(),$(this).parent().find(".input-autre").attr("name",val_name)}else $(this).hasClass("has-autre")&&!$(this).prop("checked")&&$(this).parent().find(".input-autre").removeClass("visible"),$(this).parent().find(".input-autre").attr("name","");est_question_matching(this)&&ao_attribution();var rubrique_actuel=id_rubrique_js;$("#ao-id_rubrique").length&&""!=$("#ao-id_rubrique").val()&&(rubrique_actuel=$("#ao-id_rubrique").val());var actual_input=$(this),di_popup=$("#entry").hasClass("demandeinfopopup")?1:0;$(this).hasClass("has-autre")&&$(this).prop("checked")&&$(this).parent().find(".input-autre").addClass("visible").focus();var parent=$(this).parents(".info-group");parent.find("input[type=checkbox]").length>0&&parent.find("input[type=checkbox]").length==parent.find("input[type=checkbox]:checked").length&&$("#ao-cta").click(),$(this).parents(".popup-apo").length&&!$("#screen-container").hasClass("demandeinfopopup")&&($(this).prop("checked")?$(this).parents(".info-group-input:not(.with-images)").length:($(this).hasClass("has-autre")&&$(this).siblings(".input-autre").removeClass("visible"),$(this).parents(".info-group-input:not(.with-images)").length)),$slider.slick("setPosition")})),$(document).on("change","#cn-form-ao .radio .choix_reponse:not(.has-autre)",(function(e){e.preventDefault(),$("#apo-source").trigger("click")}));var check_radio_=function(actual_input){$("#cn-form-ao label.checked").removeClass("checked"),actual_input.prop("checked")&&actual_input.parent("label").addClass("checked"),$(".choix_reponse").each((function(){"radio"==$(this).attr("type")&&$(this).val()!=actual_input.val()&&$(this).prop("checked",!1)}))},verif_keyup_mail;if(ao_ek_upload(),ao_selecteur(),$(document).on("click",".btn_dmd_groupe",(function(){"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo?($("html, body ,.modal-wrapper").animate({scrollTop:0},"slow"),$("#sub-devis-minute").click(),$("#apo-source").click()):afficher_popup_apo(1)})),$(document).on("click","#apo-source",(function(e,extraParam){var exP=void 0!==extraParam?1:0;e.preventDefault(),ao_valider_step_one_ffa()?(event_ga_ao_push("Popup_Appel_Offre","click","Popup_AO_Q1_Answered"),afficher_popup_apo(exP)):$("body").animate({scrollTop:230},"slow")})),$(document).on("click",".form-apo-cta",(function(){var param_ao=$(this).data("param");if(param_ao){var old_param_ao=$("#x-tag-apo").val();if($("#x-tag-apo").val(param_ao).data("old_param_ao",old_param_ao),$(this).data("form-cta")){var old_ao_id_rubrique=$("#ao-id_rubrique").val(),old_objet=$("#objet").val(),tab_rub=$(this).data("form-cta").split("_#_"),nom_rub=tab_rub[1],id_rub=tab_rub[0];$("#ao-id_rubrique").val(id_rub).data("old_ao_id_rubrique",old_ao_id_rubrique),$("#objet").val(nom_rub).data("old_objet",old_objet)}}afficher_popup_apo(1)})),$(document).on("click","#apoModal .close",(function(e){$(".bandeau_cookie").length&&$(".bandeau_cookie").is(":hidden")&&$(".bandeau_cookie").show(),$("#ao-origine").val(46),$("#js_popup_ao").length||"undefined"==typeof js_global||null==typeof js_global||void 0===js_global[0]||$("head").append(js_global[0]),$("#css_popup_ao").length||"undefined"==typeof css_global||null==typeof css_global||void 0===css_global[0]||$("head").append(css_global[0]),ao_hide_modal();var old_param_ao=$("#x-tag-apo").data("old_param_ao"),old_ao_id_rubrique=$("#ao-id_rubrique").data("old_ao_id_rubrique"),old_objet=$("#objet").data("old_objet");old_param_ao&&$("#x-tag-apo").val(old_param_ao),old_ao_id_rubrique&&$("#ao-id_rubrique").val(old_ao_id_rubrique),old_objet&&$("#objet").val(old_objet),$("#apoModal .bloc-popup-content").html("")})),$(document).on("click",".screen #list_pays_tel_form li.country",(function(e){ao_reset_form_tel("#telephone-acheteur");var flag_pays_courant=$(".screen #list_pays_tel_form li.country.active_").data("flag_class");$(".screen #list_pays_tel_form li.country").removeClass("active_"),$(this).addClass("active_");var flag_pays_sel=$(this).data("flag_class"),id_pays;ao_gerer_changement_indicatif_tel($(this).data("id_pays"),this,".screen #telephone-acheteur"),$(this).parents(".intl-tel-input").find(".indicatif_tel").val($(this).data("flag_class")),$(this).parents(".intl-tel-input").find(".id_pays_tel").val($(this).data("id_pays")),$(this).parents(".intl-tel-input").find(".select_pays .flag").removeClass(flag_pays_courant).addClass(flag_pays_sel),$(".screen #list_pays_tel_form").hide(100),e.stopPropagation()})),$(document).on("click",(function(){$(".screen .flag-dropdown").length&&$(".screen .list_pays_tel").hide(100)})),$(document).on("click","#apoModal .screen .flag-dropdown",(function(e){$(".screen #list_pays_tel_form").toggle(250),e.stopPropagation()})),$(document).on("keydown keypress keyup",".screen #telephone-acheteur",(function(e){32==e.keyCode&&e.preventDefault()})),$(document).on("propertychange input","#telephone-acheteur,#ao-code-postal-acheteur",(function(){ao_forcer_champ_numerique($(this))})),$(document).on("change",'.real_input[name="civilite"]',(function(e){$(this).parents(".input-parent").find(".has-error").hide()})),$(document).on("change","#apoModal .prof_part",(function(){var c=$(".prof_part:checked").attr("id");"prof_option"==c?($("#ao-societe-acheteur").show(),$("#ao-societe-acheteur").parent().show()):"part_option"==c&&($("#ao-code_naf").val(""),$("#ao-societe-acheteur").hide(),$("#ao-societe-acheteur").parent().hide(),$("#ao-societe-acheteur").val("").removeClass("readonly"),$("#ao-code-postal-acheteur").removeClass("readonly"),$("#ao-pays-acheteur").parent().removeClass("disabled"),$("#ao-recup-adresse,#ao-adresse-acheteur").val(""),$("#ao-id_cartegie_siret,#ao-id_siret_insee").val("")),ao_attribution()})),$(document).on("blur","#ao-societe-acheteur",(function(){ao_siretisation()})),$(document).on("blur","#ao-code-postal-acheteur",(function(){ao_siretisation(),ao_attribution()})),$(document).on("blur","input#ao-input-mail-acheteur",(function(){$(this).val().trim().length>0?verif_mail_valide()?(verif_mail_acheteur(),$("#ao-input-mail-acheteur").addClass("valid-email"),$("#emailFeedback").addClass("d-none-important"),$("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"),$(".input-parent #ao-input-mail-acheteur").siblings(".has-error").hide(),$("#ao-cta").off("click",disable_click),console.log("Called from line 3459"),$("#dbl_di").length&&($(".dbl_di,#dbl_di").remove(),$("#ao-cta").removeClass("btn-grise readonly"),$("input#ao-input-mail-acheteur").attr("ancien_valeur",""))):($("#ao-cta").on("click",disable_click),$("#ao-cta").addClass("btn-disabled"),$("#emailFeedback").removeClass("d-none-important").html('\n                    <span class="alert-error"><i class="bx bxs-x-circle"></i> Merci de renseigner un e-mail valide</span>\n                ')):($("#emailFeedback").addClass("d-none-important"),$("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"))})),$(document).on("click","#ao-cta-siret",(function(e){e.preventDefault(),ao_hide_modal()})),$(".screen [name=reponse_autre_question-1], .screen #reponse_autre_question-3-2").on("change",(function(){$("#ao-cta").click()})),$(".pj-remover").on("click",(function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".uploader").find("input[type=file]").get(0).value="",$(this).parents(".uploader").find(".response").addClass("hidden"),$(this).parents(".uploader").find(".start").removeClass("hidden")})),$("body").on("keyup",".input-autre.visible",(function(){var choix_autre=$(this).parents(".group-input").find(".choix_reponse.has-autre");if(choix_autre.prop("checked",!0),$(this).parents(".group-input").addClass("checked"),"reponse_autre_question-3-1"!=choix_autre.attr("id")&&"radio"==choix_autre.attr("type")){var is_ffa=!1;"undefined"!=typeof page_referer_apo&&"feuille_fa"==page_referer_apo&&(is_ffa=!0),choix_autre.parents(".group-input").siblings().find("input[type=radio]").each((function(index,el){$(this).prop("checked",!1),$(this).parent(".group-input").removeClass("checked"),is_ffa&&$(el).parent("label").removeClass("checked")}))}})),$("body").on("focus","#ao-prenom-acheteur,#ao-nom-acheteur,#telephone-acheteur,#ao-societe-acheteur,#ao-code-postal-acheteur",(function(e){$(this).parents(".input-parent").find(".has-error").hide()})),"IntersectionObserver"in window){let apo=document.querySelector("#cn-form-devis-minute");const pattern=new RegExp(".*conseils\\.hellopro");if(pattern.test(window.location.origin)&&!apo&&(apo=document.querySelector("#apo")),apo||(apo=document.querySelector("#form_abtest")),apo&&!is_apo_shown){let apoObserver=new IntersectionObserver((function(entries){entries.forEach((function(entry){if(entry.intersectionRatio>0){is_apo_shown=!0,apoObserver.unobserve(entry.target);let param=$("#x-tag-apo").val(),param_dip,fp_coord,souhait_prod_sim,mail="";$.ajax({url:protocol+"//"+http_host+"/hellopro_fr/ajax/ajax_popup_appel_offre_v2.php",type:"post",data:{param:param,scroll:scroll,param_dip:param_dip,fp_coord:fp_coord,souhait_prod_sim:souhait_prod_sim,mail:mail},dataType:"HTML",success:function(data){if($(data).hasClass("apopopup")){let step_index=0,step_number=$(data).find("div.screen").length;STEP_NUMBER_DE_BASE_GTM=step_number;let user_known=1==$("#ao-mail_acheteur_connu").val()?"Known":"Unknown",step_name,devis_plus="True";switch(page_referer_apo){case"feuille_fa":context="header pages feuilles","fa"==page_template_gtm&&(context="header pages fa");break;case"page_conseil":context="header pages conseils";break;case"fiche_produit":context="suggest pages produits"}if($("#from_input_categ").length){var from_input_categ=$("#from_input_categ").val();"template_listing"!=from_input_categ&&"template_hub"!=from_input_categ||(context="Bandeau question 1")}context&&(step_name="1ere-question",step_name&&event_ga_ao_quote_form_funnel_push(step_index,step_name,step_number,devis_plus,context,user_known,category5))}}})}}))}),{rootMargin:"50px",threshold:.01});apoObserver.observe(apo)}}recup_cookie_redir_ao("redir_di_f")&&void 0!==(cookie_redir_di_ao=recup_cookie_redir_ao("redir_di_f"))&&(cookie_redir_di_ao=JSON.parse(cookie_redir_di_ao),afficher_popup_apo(1),remove_cookie_ao("redir_di_f")),$(document).on("change","#apoModal [name=type_societe]",(function(e,i){$("#siretisation-input, #ao-societe-acheteur-mockup, #ao-code-postal-acheteur-mockup, #societe-acheteur-mockup-20, #ao-adresse-acheteur, #ao-recup_adresse , #ao-id_siret_insee, #ao-id_cartegie_siret-hpfr, #ao-recup_adresse-hpfr, #ao-adresse-acheteur-hpfr").val(""),$("#apoModal #block_pro_part_not_france #pays-acheteur-mockup-30").val("").attr("data-selected",""),$("#apoModal #block_pro_part_not_france #pays-ach-mkp .custom-select-trigger").text(""),$("#apoModal .insert_manuel_texts > a.text-underline").click(),$("#apoModal #input_particulier").prop("checked")?($("#apoModal .info-particulier").removeClass("d-none"),$("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"),"pro_part_screen"==$(".screen.active").attr("id")&&($("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"))):($("#apoModal .info-particulier").addClass("d-none"),"pro_part_screen"==$(".screen.active").attr("id")&&$("#ao-cta").addClass("btn-disabled")),($("#apoModal #input_particulier").prop("checked")||$("#apoModal #input_pro_not_france").prop("checked"))&&$("#apoModal [name=id_siret_insee]").val(""),"input_pro_not_france"==$("#apoModal [name=type_societe]:checked").attr("id")&&($("#apoModal #block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").hasClass("d-none")||$("#apoModal #block-cp-pays-ville #ao-code-postal-acheteur").siblings("label").children("span").addClass("d-none"))})),$(document).on("input","#apoModal #ao-societe-acheteur-mockup,#apoModal #ao-code-postal-acheteur-mockup, #apoModal #societe-acheteur-mockup-20",(function(){let activated=!0;$(this).is("#societe-acheteur-mockup-20")?0==$(this).val().trim().length&&(activated=!1):$("#apoModal #ao-societe-acheteur-mockup, #apoModal #ao-code-postal-acheteur-mockup").each((function(){0==$(this).val().trim().length&&(activated=!1)})),activated?$("#apoModal .screen.active").attr("id").length&&"pro_part_screen"==$("#apoModal .screen.active").attr("id")&&$("#ao-cta").removeClass("btn-disabled disable"):$("#apoModal .screen.active").attr("id").length&&"pro_part_screen"==$("#apoModal .screen.active").attr("id")&&($("#ao-cta").hasClass("btn-disabled")||$("#ao-cta").addClass("btn-disabled"))})),$(document).on("propertychange input change","#ao-code-postal-acheteur-mockup",(function(){if(5!=$(this).val().length||1!=$("#ao-pays-acheteur-mockup-2").data("selected")&&454!=$("#ao-pays-acheteur-mockup-2").data("selected"))$("#ville-fr-mockup").parents(".choice-form-champ").addClass("d-none-important"),$("#ville-fr-mockup").children().remove();else{var cp_acheteur=$(this).val();ajax_recup_ville&&ajax_recup_ville.abort(),ajax_recup_ville=$.ajax({url:protocol+"//"+http_host+"/annuaire_hp/ajax/ajax_recherche_ville_acheteur.php",type:"post",data:{cp_acheteur:cp_acheteur},beforeSend:function(){},success:function(data){if(""==data)return!1;var ville_mockup;$("#ville-fr-mockup").parents(".choice-form-champ").html('\n                        <div class="choice-form-label">Ville</div>\n                        <div class="choice-form-input" id="ville-fr-mockup">\n                            '+data+"\n                        </div>\n                    ").removeClass("d-none-important"),$("#ville-fr-mockup .select-custom").length&&ao_init_select_custom("ville"),$("#ville-fr-mockup").show(),$("#ville-fr-mockup").find(".custom-option.selection").trigger("click")},error:function(e){}})}})),$(document).on("propertychange input change","#ao-code-postal-acheteur",(function(){if(5!=$(this).val().length||1!=$("#ao-pays-acheteur").data("selected")&&454!=$("#ao-pays-acheteur").data("selected"))$("#ville-fr").parents(".default-champ-content").addClass("d-none-important"),$("#ville-fr").children().remove();else{var cp_acheteur=$(this).val();ajax_recup_ville&&ajax_recup_ville.abort(),ajax_recup_ville=$.ajax({url:protocol+"//"+http_host+"/annuaire_hp/ajax/ajax_recherche_ville_acheteur.php",type:"post",data:{cp_acheteur:cp_acheteur},beforeSend:function(){},success:function(data){if(""==data)return!1;var ville_mockup;$("#ville-fr").parents(".default-champ-content").html('\n                        <div class="default-champ-lib">Ville</div>\n                        <div class="default-champ-box" id="ville-fr">\n                        '+data+"\n                        </div>\n                    ").removeClass("d-none-important"),$("#ville-fr .select-custom").length&&ao_init_select_custom("ville"),$("#ville-fr").show()},error:function(e){}})}})),$("body").on("keydown input keyup paste blur","#input-budget",(function(){var autreValue=$(this).val().trim(),$infoGroup=$('div[data-typeq="budget"]');$infoGroup.length&&($infoGroup.find(".input-autre").val(autreValue),$(this).attr("name",$infoGroup.find("input").not("#input-budget").attr("name"))),autreValue.length>0&&$(this).css("border","1px solid var(--color-noir-heavy)")})),$("body").on("change","#take-photo-input",(function(){Array.from(this.files).forEach(file=>{pond.addFile(file)})})),$(document).on("change","#apoModal [name='type_societe']",(function(){$slider.slick("setPosition")})),$(document).on("click",".input_radio_budget",(function(e){$(".error-info").hide(),$(".input_radio_budget").not(this).is(":checked")&&($(".input_radio_budget").not(this).prop("checked",!1),$(".input_radio_budget").not(this).parent().removeClass("checked"));var old_value=$(this).attr("data-actuel"),$parent=$(this).closest('[data-typeq="budget"]'),$inputAutreForm=$parent.find(".input-autre-form"),$input_autre_budget=$parent.find(".input-autre-form #input-budget"),$goodToKnow=$parent.find(".good-to-know"),$infoGroup;"on"==old_value?($(this).prop("checked",!1),$(this).attr("data-actuel","off"),$inputAutreForm.addClass("d-none"),$("#input-budget").val(""),$('div[data-typeq="budget"]').find(".input-autre").val(""),$goodToKnow.removeClass("d-none"),$(this).parent().removeClass("checked")):($(this).hasClass("input_radio_budget_non")&&("apoModal"==$(this).closest(".hp-modal").attr("id").trim()?ao_ctrl_radio():ctrl_radio()),$(".input_radio_budget ").each((function(){$(this).attr("data-actuel",$(this).is(":checked")?"on":"off")})),$(this).is(":checked")&&$(this).hasClass("has-autre")?($inputAutreForm.removeClass("d-none"),$goodToKnow.addClass("d-none"),$input_autre_budget.focus()):$(this).is(":checked")&&($inputAutreForm.addClass("d-none"),$goodToKnow.removeClass("d-none")))}))})),$(document).on("submit","#ao-form,#form-demande-devis",(function(e){if(e.preventDefault(),!ajax_envoi_demande){var path_fic_traitement="/hellopro_fr/include/demande_information/demande_info_insertion.php";/mca\.hellopro\.fr/.test(window.location.hostname)&&(path_fic_traitement="/mon_compte_acheteur_hp/src/Devis/demande_info_insertion.php");var id_form=$(this).attr("id"),formID=$("#"+id_form),formdata=window.FormData?new FormData(formID[0]):null,data=null!==formdata?formdata:formID.serialize();if("form-demande-devis"==id_form)var default_btn_content=$(`#${id_form} .screen.active .cta-devis`).html();else if("ao-form"==id_form)var default_btn_content=$("#ao-cta").html();var loader_content='<i class="loader loader-xs font-color-white"></i> Envoi en cours';"form-demande-devis"==id_form?$(`#${id_form} .screen.active .cta-devis`).html(loader_content).css("pointerEvents","none"):"ao-form"==id_form&&$("#ao-cta").html(loader_content).css("pointerEvents","none"),ajax_envoi_demande=$.ajax({url:protocol+"//"+http_host+path_fic_traitement,type:"POST",contentType:!1,processData:!1,data:data,beforeSend:function(){show_toast('\n                    <div class="d-flex gp-8 font-color-white align-items-center">\n                        <i class="bx bx-hourglass font-18"></i>\n                        <span class="font-weight-600 font-14">Votre demande est en cours de traitement.</span>\n                    </div>\n                    ',"success")},success:function(data){if(/^https?/.test(data)){let step_index=formID.find('[name="step_index"]').val(),step_name=formID.find('[name="step_name"]').val(),step_number=formID.find('[name="step_number"]').val(),funnel_devisplus=formID.find('[name="funnel_devisplus"]').val(),funnel_context=formID.find('[name="funnel_context"]').val(),user_known_status=formID.find('[name="user_known_status"]').val(),product_category5=formID.find('[name="product_category5"]').val();if(/mca\.hellopro\.fr/.test(window.location.hostname)){let YN_MCF_societe_id;"undefined"!=typeof gtm_page_load?YN_MCF_societe_id=gtm_page_load.YN_MCF_societe_id:"undefined"!=typeof gtm_page_load_spa&&(YN_MCF_societe_id=gtm_page_load_spa.YN_MCF_societe_id);let quoteFormFunnelPush=generateQuoteFormFunnelMCAPush({step_index:step_index,step_name:step_name,step_number:STEP_NUMBER_DE_BASE_GTM,YN_MCF_societe_id:YN_MCF_societe_id,funnel_context:context,product_category:category5});event_datalayer_push(quoteFormFunnelPush)}else event_ga_ao_quote_form_funnel_push(step_index,step_name,step_number,funnel_devisplus,funnel_context,user_known_status,product_category5);window.location.href=data}else show_toast('\n                        <div class="d-flex gp-8 font-color-white align-items-center">\n                            <i class=\'bx bxs-x-circle font-18\'></i>\n                            <span class="font-weight-600 font-14">Pour des raisons techniques, nous n\'avons pas pu traiter votre demande.</span>\n                        </div>\n                        ',"error"),"form-demande-devis"==id_form?$(`#${id_form} .screen.active .cta-devis`).html(default_btn_content).css("pointerEvents","unset"):"ao-form"==id_form&&$("#ao-cta").html(default_btn_content).css("pointerEvents","unset");ajax_envoi_demande=!1}})}})),$(document).on("click","#ao-pays-acheteur + .select-custom .custom-option",(function(e){$("#ao-pays-acheteur").data("selected",$(this).data("value")),$("#ville-fr").hide(),$("#ao-ville-acheteur").attr("data-selected",""),$("#ao-code-postal-acheteur").trigger("input"),1==parseInt($("#ao-pays-acheteur").val())?$("#ao-code-postal-acheteur").parents(".input-parent").find("label > span").removeClass("d-none"):$("#ao-code-postal-acheteur").parents(".input-parent").find("label > span").addClass("d-none")})),$(document).on("click",".select-custom.liste_custom .custom-option:not(.disabled)",(function(e){if(est_question_matching(this)&&$(this).attr("data-value")!=$(this).siblings(".liste_custom").attr("data-selected")&&ao_attribution(),$(this).hasClass("is_conditionnel")){var id_reponse=$(this).attr("data-value"),list_cible=$("#r_"+id_reponse).attr("data-cible"),effet=$("#r_"+id_reponse).attr("data-effet"),tab_cible;ao_afficher_cible(tab_cible=list_cible.split(","),effet)}else if(has_siblings_conditionnel("custom-option.option")){var id_rep_reset=$(".screen.active").find(".custom-option.is_conditionnel").attr("data-value"),elem_reset=$("#r_"+id_rep_reset),cible=elem_reset.attr("data-cible"),effet=elem_reset.attr("data-effet"),tab_cible;ao_cacher_cible(tab_cible=cible.split(","),effet)}})),$(document).on("click","#ao-siret",(function(){gerer_click_siretisation()})),$(document).on("click",".cartegid_list",(function(){var code_naf=$(this).attr("data-naf");""!=$.trim($("#apoModal .content").html())&&($("#ao-code_naf").val(code_naf),ao_attribution())}));var ajax_verif=null;function verif_mail_acheteur(){ajax_verif&&ajax_verif.abort();var retour=!0;if(!$(".screen.active input#ao-input-mail-acheteur").length)return $("#dbl_di").length&&($("#ao-cta").on("click",disable_click).addClass("btn-grise btn-disabled readonly"),console.log("Called from line 3887")),!0;var self=$("input#ao-input-mail-acheteur"),a=self.attr("ancien_valeur");$("#ao-mhp-mail-ok").remove();var i=document.querySelector("input#ao-input-mail-acheteur").value.trim();if(a==i&&verif_mail_valide()&&($("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"),$("#ao-cta").off("click",disable_click),$("#ao-input-mail-acheteur").addClass("valid-email")),document.querySelector("input#ao-input-mail-acheteur").value=i,a!=i)if($("input#ao-input-mail-acheteur").parent().removeClass("contains-error"),self.attr("ancien_valeur",i),/^([a-zA-Z0-9+]+(([\.\-\_]?[a-zA-Z0-9+]+)+)?)\@(([a-zA-Z0-9]+[\.\-\_])+[a-zA-Z]{2,8})$/.test(i)){if($("input#ao-input-mail-acheteur").removeClass("error"),ao_verif_dbl_di("input#ao-input-mail-acheteur"),bloquer_envoi_formulaire())return!1;var r=ao_init_data_dir(i);ajax_verif=$.ajax({url:protocol+"//"+http_host+"/hellopro_fr/ajax/ajax_verification_mail_acheteur.php",type:"POST",dataType:"JSON",async:!1,data:r,beforeSend:function(){},success:function(e){if(e.dir>0&&$("#ao-id_svgrd").val(e.dir),"#0#"!=e.verif){for(var property in $(".input-parent:not(.email-container)").hide(),$("#ao-mail_acheteur_connu").val(1),$("#ao-recup_adresse").val(e.adr),e){var name=property;"cv"==property?1==e[property]?$("#m_option").prop("checked",!0):2==e[property]?$("#mme_option").prop("checked",!0):$("#m_option").prop("checked",!0):"statut"==property?7==e[property]?$("#part_option").prop("checked",!0):$("#prof_option").prop("checked",!0):("cp"==property&&(name="code-postal-acheteur"),"nom"==property&&(name="nom-acheteur"),"prenom"==property&&(name="prenom-acheteur"),"pays"==property&&(name="pays-acheteur"),"statut"==property&&(name="rep_prof_part"),"tel"==property&&(name="telephone-acheteur"),"raison_soc"==property&&(name="societe-acheteur"),"id"==property&&(name="id-acheteur"),$("#ao-form [name="+name+"]").val(e[property]))}ao_attribution(),$("#apoModal").hasClass("modal-demande-info")&&$("#screen-container").find(".screen.coordonnees"),$("#ao-cta").off("click",disable_click),$("#ao-cta").removeClass("btn-disabled"),$("#ao-cta").removeClass("disable"),console.log("Called from line 3957"),$("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val()&&($("#ao-cta").html('<span>Envoyer <span class="md-none">ma demande</span></span>'),$("#screen-container").find(".screen.coordonnees").addClass("skip"),$("#screen-container").find(".screen#pro_part_screen").addClass("skip"))}else $("#ao-mail_acheteur_connu").val(0),$(".input-parent.email-container").find("label").removeClass("d-none"),$(".input-parent:not(.email-container,.souhait-choix)").each((function(){$(this).find("input").prop("checked",!1),$(this).find("input[type=text]").val("")})),$(".input-parent:not(.email-container)").show(),$("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val()?$(".screen #list_pays_tel_form").width($(".screen.active").width()):($(".input-parent.email-container").siblings("label").hide(),$("#ao-input-mail-acheteur").addClass("disable").addClass("1stAff"),$(".screen #list_pays_tel_form").width($(".screen #telephone-acheteur").parents(".intl-tel-input").width()),$(".badge-confidentialite").hide(),$(".input-parent.email-container").removeClass("mt-4").addClass("mt-24")),$(".input-parent .has-error").hide(),$("#prof_option.prof_part").prop("checked",!0),$("#apoModal").hasClass("modal-demande-info")&&$("#screen-container").find(".screen.coordonnees").removeClass("skip"),$("#ao-cta").off("click",disable_click),console.log("Called from line 4001"),$("#ao-cta").removeClass("disable"),$("#ao-cta").removeClass("btn-disabled"),$("#version_ao").length&&"etape_coordonne_v1"==$("#version_ao").val()&&($("#ao-cta").removeClass("disable").html('Suivant<i class="bx bx-right-arrow-alt"></i>'),$("#ao-cta").removeClass("btn-disabled"),$("#screen-container").find(".screen.coordonnees").removeClass("skip"),$("#screen-container").find(".screen#pro_part_screen").removeClass("skip"));ao_selecteur()},complete:function(){ao_save_info_acheteur("_critere_")}})}else $("input#ao-input-mail-acheteur").addClass("error"),$("input#ao-input-mail-acheteur").parent().addClass("contains-error");return a!=i||self.hasClass("error")||($("#ao-cta").off("click",disable_click).css("background-color",""),console.log("Called from line 4032")),!0}function init_filepond(){const acceptedFileTypes=["text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/rtf","application/x-zip-compressed","image/jpeg","image/png","image/gif","image/bmp","image/svg+xml","image/tiff","video/mp4","video/x-msvideo","video/quicktime","video/x-matroska","video/webm","text/csv"],MAX_TOTAL_SIZE=20971520;var browse_file=document.querySelector(".file-drop-drag"),filePondList=document.querySelector(".filepond--list"),inputClassic=$("#take-photo-input");let totalHeight=0;if(pond=FilePond.create(browse_file,{allowMultiple:!0,storeAsFile:!0,disabled:!1,maxFiles:8,maxFileSize:"20MB",labelIdle:"<i class='bx bxs-file-export'></i> Choisir un fichier",styleButtonRemoveItemPosition:"right",oninit:()=>{$('\n                <label class="filepond-empty-label">Aucun fichier sélectionné.</label>\n                <label class="filepond-not-empty-label">Les fichiers suivants seront joints à votre demande : </label>\n            ').prependTo(".filepond--list-scroller"),updateLabels()},beforeAddFile:file=>{var returned_val=!0;const fileType=file.fileType,currentTotalSize=pond.getFiles().reduce((sum,f)=>sum+f.fileSize,0);return currentTotalSize+file.fileSize>20971520&&(show_toast(generate_error_message("L'ajout de ce fichier dépasserait la limite de 20 Mo. Il ne sera pas ajouté."),"error"),returned_val=!1),acceptedFileTypes.includes(fileType)||(show_toast(generate_error_message("Type de fichier non valide"),"error"),returned_val=!1),"text/csv"===file.fileType&&returned_val&&(returned_val=validateCSVSeparator(file.file)),returned_val&&$(".filepond-empty-label").hide()&&$(".filepond-not-empty-label").show(),returned_val},onaddfile:(error,file)=>{error?show_toast(generate_error_message(error),"error"):validateUploadedFiles(),sync_with_take_photo_input(inputClassic);const totalFiles=pond.getFiles().length},onremovefile:(error,file)=>{validateUploadedFiles(),sync_with_take_photo_input(inputClassic),setTimeout(()=>{updateLabels()},1e3)},onerror:(error,file,status)=>{pond.removeFile(file.id)}}),filePondList){const observer=new MutationObserver(mutationsList=>{for(let mutation of mutationsList)"childList"===mutation.type&&validateUploadedFiles()}),config={childList:!0};observer.observe(filePondList,config)}$slider.length&&$slider.slick("setPosition")}function sync_with_take_photo_input(inputClassic){const dataTransfer=new DataTransfer;pond.getFiles().forEach(fileItem=>{dataTransfer.items.add(fileItem.file)}),inputClassic[0].files=dataTransfer.files}function generate_error_message(message){return message||(message="Une erreur a été rencontrée. Veuillez réessayer s'il vous plaît !"),`\n        <div class="d-flex gp-8 font-color-white align-items-center">\n            <i class="bx bx-x-circle font-18"></i>\n            <span class="font-weight-700 font-14">${message}</span>\n        </div>\n    `}function validateCSVSeparator(file){const reader=new FileReader;return reader.onload=function(event){const csvContent=event.target.result,firstLine=csvContent.split("\n")[0];if(!firstLine.includes(";"))return alert("Erreur : Le fichier CSV doit utiliser ';' comme séparateur."),pond.removeFile(file),!1},reader.readAsText(file),!0}function validateUploadedFiles(){const totalFiles=pond.getFiles(),totalSize=totalFiles.reduce((total,file)=>total+file.fileSize,0);totalFiles.length>=8?isMobileDevice()&&$("#cam-container").slideUp(200):totalSize>20971520?show_toast(generate_error_message("La taille de total de fichier à importer ne doit pas depasser 20Mo !"),"error"):isMobileDevice()?$("#cam-container").slideDown(200,(function(){$(this).show(0,(function(){$(this).css("display","flex")}))})):$(this).css("display","none")}function updateLabels(){$(".filepond--list li").length<1?($(".filepond-empty-label").show(),$(".filepond-not-empty-label").hide()):($(".filepond-empty-label").hide(),$(".filepond-not-empty-label").show())}function isMobileDevice(){return/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)}function focus_scrollToTop(){$(document).on("focus",".nv_coordonnee input, #email-step input, #pro_part_screen input",(function(){const $popupContent=$("#apoModal .popup-content"),inputOffset=$(this).offset().top,popupOffset=$popupContent.offset().top;let scrollTo=inputOffset-popupOffset+$popupContent.scrollTop();const maxScroll=$popupContent[0].scrollHeight-$popupContent.innerHeight();scrollTo=Math.min(scrollTo,maxScroll),scrollTo=Math.max(scrollTo,0),$popupContent.animate({scrollTop:scrollTo},500)}))}